<!doctype html>
<html lang="tr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOMTECH_SOF v2.0.0 - Ana Panel</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #2459a0;
            --accent-color: #cf2e26;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --border-light: #e2e8f0;
            --shadow-light: rgba(36, 89, 160, 0.1);
            --sidebar-width: 280px;
        }
        
        .dark-theme {
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --text-dark: #f1f5f9;
            --text-gray: #94a3b8;
            --border-light: #334155;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            transition: all 0.3s ease;
            min-height: 100%;
        }
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-white);
            border-right: 1px solid var(--border-light);
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-light);
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }
        
        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .sidebar.collapsed .logo-icon {
            margin-right: 0;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .nav-menu {
            padding: 24px 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 24px;
            color: var(--text-gray);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }
        
        .nav-item:hover {
            background: rgba(36, 89, 160, 0.05);
            color: var(--primary-color);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(36, 89, 160, 0.1), transparent);
            color: var(--primary-color);
            border-right: 3px solid var(--primary-color);
        }
        
        .nav-icon {
            width: 24px;
            height: 24px;
            margin-right: 16px;
            transition: margin 0.3s ease;
        }
        
        .sidebar.collapsed .nav-icon {
            margin-right: 0;
        }
        
        .nav-text {
            font-weight: 500;
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .language-selector {
            position: absolute;
            bottom: 24px;
            left: 24px;
            right: 24px;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .lang-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            transition: margin-left 0.3s ease;
        }
        
        .sidebar.collapsed + .main-content {
            margin-left: 80px;
        }
        
        /* Header */
        .header {
            background: var(--bg-white);
            border-bottom: 1px solid var(--border-light);
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            margin-right: 16px;
            transition: all 0.3s ease;
        }
        
        .menu-toggle:hover {
            background: var(--bg-light);
            color: var(--primary-color);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .welcome-message {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(36, 89, 160, 0.1), rgba(36, 89, 160, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(36, 89, 160, 0.2);
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .welcome-message.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .welcome-icon {
            width: 20px;
            height: 20px;
            color: var(--primary-color);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: var(--bg-light);
            border-radius: 12px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .user-info.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .user-role {
            font-size: 12px;
            color: var(--text-gray);
        }
        
        .theme-toggle, .logout-btn {
            padding: 10px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(20px);
        }
        
        .theme-toggle.show, .logout-btn.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .theme-toggle:hover, .logout-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(36, 89, 160, 0.3);
        }
        
        .logout-btn {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
            border-color: var(--accent-color);
        }
        
        .logout-btn:hover {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }
        
        /* Content Area */
        .content-area {
            padding: 32px;
        }
        
        /* Summary Cards */
        .summary-cards {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .summary-card {
            background: var(--bg-white);
            border-radius: 12px;
            padding: 32px 24px;
            border: 1px solid var(--border-light);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        .summary-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), #1e40af);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-8px) scale(1.02);
            box-shadow: 0 20px 60px rgba(36, 89, 160, 0.15);
        }
        
        .summary-card:hover::before {
            transform: scaleX(1);
        }
        
        .summary-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            color: white;
            transition: all 0.3s ease;
        }
        
        .summary-card:hover .summary-icon {
            transform: scale(1.1);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        .summary-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .summary-subtitle {
            font-size: 14px;
            color: var(--text-gray);
            line-height: 1.4;
        }
        
        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        .dashboard-section-card {
            background: var(--bg-white);
            border-radius: 12px;
            border: 1px solid var(--border-light);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .dashboard-section-card:hover {
            box-shadow: 0 8px 32px rgba(36, 89, 160, 0.1);
        }
        
        .section-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .section-badge {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }
        
        .notification-badge {
            background: var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .section-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-light);
            text-align: center;
        }
        
        .view-all-btn {
            background: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .view-all-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        /* Request Lists */
        .request-list, .approval-list, .payment-list, .purchasing-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .request-item {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.3s ease;
        }
        
        .request-item:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .request-item:last-child {
            border-bottom: none;
        }
        
        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .request-id {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .request-date {
            font-size: 12px;
            color: var(--text-gray);
        }
        
        .request-description {
            font-size: 14px;
            color: var(--text-gray);
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        /* Progress Bar */
        .progress-container {
            margin-bottom: 12px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-light);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #1e40af);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: var(--text-gray);
        }
        
        .progress-step {
            font-weight: 500;
        }
        
        .progress-step.active {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .btn-approve {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-approve:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-reject {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-reject:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }
        
        .btn-payment {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-payment:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .btn-invoice {
            background: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-invoice:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 16px;
        }
        
        .card-icon.total {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .card-icon.approved {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .card-icon.pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .card-icon.rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        /* System Overview */
        .system-overview {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 32px;
            margin-bottom: 32px;
        }
        
        .overview-cards {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .overview-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 24px;
        }
        
        .mini-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .mini-card {
            padding: 16px;
            background: var(--bg-light);
            border-radius: 12px;
            text-align: center;
        }
        
        .mini-card-title {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .mini-card-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .chart-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        /* Table Section */
        .table-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .table-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .export-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn-export {
            padding: 10px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-export:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .filter-input, .filter-select {
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 24px;
        }
        
        .data-table th {
            background: var(--bg-light);
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
        }
        
        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
            color: var(--text-dark);
        }
        
        .data-table tr:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }
        
        .status-approved {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .status-rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .page-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn:hover, .page-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Google Drive Section */
        .drive-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
            text-align: center;
        }
        
        .drive-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #4285f4, #34a853);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
        
        .drive-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .drive-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .btn-drive {
            padding: 12px 20px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-drive:hover {
            background: #4285f4;
            color: white;
            border-color: #4285f4;
        }
        
        .drive-note {
            font-size: 12px;
            color: var(--text-gray);
            font-style: italic;
        }
        
        /* Settings Section */
        .settings-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .settings-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.show .modal-container {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-light);
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }
        
        .modal-content {
            color: var(--text-dark);
            line-height: 1.6;
        }
        
        .reject-form {
            margin-top: 16px;
        }
        
        .reject-textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            color: var(--text-dark);
            background: var(--bg-white);
            resize: vertical;
            transition: all 0.3s ease;
        }
        
        .reject-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .modal-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            justify-content: flex-end;
        }
        
        .btn-modal-primary {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        .btn-modal-secondary {
            background: transparent;
            color: var(--text-gray);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-secondary:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }
        
        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
        }
        
        .empty-state-icon {
            width: 64px;
            height: 64px;
            background: var(--bg-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            color: var(--text-gray);
        }
        
        .empty-state-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .empty-state-description {
            font-size: 14px;
            color: var(--text-gray);
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .content-area {
                padding: 16px;
            }
            
            .status-cards {
                grid-template-columns: 1fr;
            }
            
            .filters {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 16px;
            }
            
            .user-details {
                display: none;
            }
        }
        
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Section Transitions */
        .section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        .section.fade-out {
            opacity: 0;
            transform: translateY(-20px);
        }
        
        /* Menu Active States */
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .nav-item.active::before {
            transform: translateX(0);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(36, 89, 160, 0.1), transparent);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .nav-item:not(.active):hover {
            background: rgba(36, 89, 160, 0.05);
            color: var(--primary-color);
        }
        
        /* Login Overlay Styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }
        
        .login-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .login-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 48px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 450px;
            transform: scale(0.9);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .login-overlay:not(.hidden) .login-container {
            transform: scale(1);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .login-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }
        
        .login-logo .logo-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        
        .login-title h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0 0 8px 0;
        }
        
        .login-title p {
            font-size: 14px;
            color: var(--text-gray);
            margin: 0;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .login-buttons {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }
        
        .btn-login {
            flex: 1;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.4);
        }
        
        .btn-register {
            flex: 1;
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-register:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .login-footer {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border-light);
        }
        
        .login-footer p {
            font-size: 12px;
            color: var(--text-gray);
            margin: 0;
            font-style: italic;
        }
        
        /* Dashboard blur effect when not logged in */
        .dashboard-container.blurred {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body><!-- Sidebar -->
  <div id="sidebar" class="sidebar">
   <div class="sidebar-header">
    <div class="logo-container">
     <div class="logo-icon">
      <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
      </svg>
     </div>
     <div class="logo-text">
      <div id="company-name">
       SOMTECH
      </div>
      <div style="font-size: 12px; color: var(--text-gray);" id="system-version">
       v2.0.0
      </div>
     </div>
    </div>
   </div>
   <nav class="nav-menu"><button class="nav-item active" onclick="showSection('dashboard')" data-tr="Ana Sayfa" data-en="Dashboard" data-ru="Ð“Ð»Ð°Ð²Ð½Ð°Ñ">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"></path>
     </svg><span class="nav-text">Ana Sayfa</span> </button> <button class="nav-item" onclick="showSection('new-request')" data-tr="Yeni Talep" data-en="New Request" data-ru="ÐÐ¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
     </svg><span class="nav-text">Yeni Talep</span> </button> <button class="nav-item" onclick="showSection('records')" data-tr="Taleplerim" data-en="My Requests" data-ru="ÐœÐ¾Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
     </svg><span class="nav-text">Taleplerim</span> </button> <button class="nav-item" onclick="showSection('material-records')" data-tr="Malzeme KayÄ±tlarÄ±" data-en="Material Records" data-ru="Ð—Ð°Ð¿Ð¸ÑÐ¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
     </svg><span class="nav-text">Malzeme KayÄ±tlarÄ±</span> </button> <button class="nav-item" onclick="showSection('google-drive')" data-tr="Google Drive" data-en="Google Drive" data-ru="Google Drive">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
     </svg><span class="nav-text">Google Drive</span> </button> <button class="nav-item" onclick="showSection('settings')" data-tr="Ayarlar" data-en="Settings" data-ru="ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
     </svg><span class="nav-text">Ayarlar</span> </button>
   </nav>
   <div class="language-selector"><button class="lang-btn active" onclick="setLanguage('tr')">TR</button> <button class="lang-btn" onclick="setLanguage('en')">EN</button> <button class="lang-btn" onclick="setLanguage('ru')">RU</button>
   </div>
  </div><!-- Main Content -->
  <div class="main-content"><!-- Header -->
   <header class="header">
    <div class="header-left"><button class="menu-toggle" onclick="toggleSidebar()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg></button>
     <h1 id="page-title" class="page-title" data-tr="Ana Panel" data-en="Dashboard" data-ru="ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ">Ana Panel</h1>
    </div>
    <div class="header-right">
     <div id="welcome-message" class="welcome-message">
      <svg class="welcome-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg><span id="welcome-text">HoÅŸ geldiniz</span>
     </div>
     <div id="user-info" class="user-info">
      <div class="user-avatar" id="user-avatar">
       O
      </div>
      <div class="user-details">
       <div class="user-name" id="user-name">
        OÄŸuzhan Kaya
       </div>
       <div class="user-role" id="user-role">
        SatÄ±n Alma
       </div>
      </div>
     </div><button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="Tema DeÄŸiÅŸtir">
      <svg id="theme-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg></button> <button id="logout-btn" class="logout-btn" onclick="logout()" title="Ã‡Ä±kÄ±ÅŸ Yap"> ðŸ”’ </button>
    </div>
   </header><!-- Content Area -->
   <div class="content-area"><!-- Dashboard Section -->
    <div id="dashboard-section" class="section active"><!-- Summary Cards -->
     <div class="summary-cards">
      <div class="summary-card" onclick="showSummaryModal()">
       <div class="summary-icon">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
        </svg>
       </div>
       <div class="summary-title" data-tr="Ã–zet" data-en="Summary" data-ru="Ð¡Ð²Ð¾Ð´ÐºÐ°">
        Ã–zet
       </div>
       <div class="summary-subtitle" data-tr="Genel durum gÃ¶rÃ¼nÃ¼mÃ¼" data-en="General status overview" data-ru="ÐžÐ±Ñ‰Ð¸Ð¹ Ð¾Ð±Ð·Ð¾Ñ€ ÑÑ‚Ð°Ñ‚ÑƒÑÐ°">
        Genel durum gÃ¶rÃ¼nÃ¼mÃ¼
       </div>
      </div>
      <div class="summary-card" onclick="showTrackingModal()">
       <div class="summary-icon">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
       </div>
       <div class="summary-title" data-tr="Takip Logu" data-en="Tracking Log" data-ru="Ð–ÑƒÑ€Ð½Ð°Ð» Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ">
        Takip Logu
       </div>
       <div class="summary-subtitle" data-tr="Talep sÃ¼reÃ§ takibi" data-en="Request process tracking" data-ru="ÐžÑ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ðµ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐ° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°">
        Talep sÃ¼reÃ§ takibi
       </div>
      </div>
      <div class="summary-card" onclick="showSection('new-request')">
       <div class="summary-icon">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
        </svg>
       </div>
       <div class="summary-title" data-tr="Yeni Talep OluÅŸtur" data-en="Create New Request" data-ru="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ">
        Yeni Talep OluÅŸtur
       </div>
       <div class="summary-subtitle" data-tr="Malzeme talebi baÅŸlat" data-en="Start material request" data-ru="ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°">
        Malzeme talebi baÅŸlat
       </div>
      </div>
     </div><!-- Main Dashboard Grid -->
     <div class="dashboard-grid"><!-- My Requests Section -->
      <div class="dashboard-section-card">
       <div class="section-header">
        <h3 class="section-title" data-tr="Taleplerim" data-en="My Requests" data-ru="ÐœÐ¾Ð¸ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹">Taleplerim</h3><span class="section-badge" id="my-requests-count">0</span>
       </div>
       <div class="request-list" id="my-requests-list"><!-- My requests will be loaded here -->
       </div>
       <div class="section-footer"><button class="view-all-btn" onclick="showAllMyRequests()" data-tr="TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le" data-en="View All" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ">TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le</button>
       </div>
      </div><!-- Pending Approval Section -->
      <div class="dashboard-section-card">
       <div class="section-header">
        <h3 class="section-title" data-tr="Onay Bekleyen" data-en="Pending Approval" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ">Onay Bekleyen</h3><span class="section-badge notification-badge" id="pending-approval-count">0</span>
       </div>
       <div class="approval-list" id="pending-approval-list"><!-- Pending approvals will be loaded here -->
       </div>
       <div class="section-footer"><button class="view-all-btn" onclick="showAllPendingApprovals()" data-tr="TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le" data-en="View All" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ">TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le</button>
       </div>
      </div><!-- Pending Payment Section -->
      <div class="dashboard-section-card">
       <div class="section-header">
        <h3 class="section-title" data-tr="Ã–deme Bekleyen" data-en="Pending Payment" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹">Ã–deme Bekleyen</h3><span class="section-badge" id="pending-payment-count">0</span>
       </div>
       <div class="payment-list" id="pending-payment-list"><!-- Pending payments will be loaded here -->
       </div>
       <div class="section-footer"><button class="view-all-btn" onclick="showAllPendingPayments()" data-tr="TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le" data-en="View All" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ">TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le</button>
       </div>
      </div><!-- Purchasing Section -->
      <div class="dashboard-section-card">
       <div class="section-header">
        <h3 class="section-title" data-tr="SatÄ±n Alma" data-en="Purchasing" data-ru="Ð—Ð°ÐºÑƒÐ¿ÐºÐ¸">SatÄ±n Alma</h3><span class="section-badge" id="purchasing-count">0</span>
       </div>
       <div class="purchasing-list" id="purchasing-list"><!-- Purchasing items will be loaded here -->
       </div>
       <div class="section-footer"><button class="view-all-btn" onclick="showAllPurchasing()" data-tr="TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le" data-en="View All" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ÐµÑ‚ÑŒ Ð²ÑÐµ">TÃ¼mÃ¼nÃ¼ GÃ¶rÃ¼ntÃ¼le</button>
       </div>
      </div>
     </div>
    </div><!-- New Request Section -->
    <div id="new-request-section" class="section hidden">
     <div class="table-section">
      <h2 class="table-title" data-tr="Yeni Talep OluÅŸtur" data-en="Create New Request" data-ru="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð½Ð¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ">Yeni Talep OluÅŸtur</h2>
      <form id="new-request-form" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-top: 24px;">
       <div class="form-group"><label class="form-label" data-tr="SOF No" data-en="SOF No" data-ru="SOF No">SOF No</label> <input type="text" class="form-input" id="sof-no" required data-tr-placeholder="Ã–rn: SOF-2024-001" data-en-placeholder="e.g: SOF-2024-001" data-ru-placeholder="Ð½Ð°Ð¿Ñ€: SOF-2024-001">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Ð¢Ð¸Ð¿ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°">Malzeme Tipi</label> <select class="form-input" id="material-type" required> <option value="" data-tr="SeÃ§iniz" data-en="Select" data-ru="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ">SeÃ§iniz</option> <option value="KÄ±rtasiye" data-tr="KÄ±rtasiye" data-en="Stationery" data-ru="ÐšÐ°Ð½Ñ†ÐµÐ»ÑÑ€Ð¸Ñ">KÄ±rtasiye</option> <option value="Elektronik" data-tr="Elektronik" data-en="Electronics" data-ru="Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¸ÐºÐ°">Elektronik</option> <option value="Mobilya" data-tr="Mobilya" data-en="Furniture" data-ru="ÐœÐµÐ±ÐµÐ»ÑŒ">Mobilya</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Birim" data-en="Unit" data-ru="ÐŸÐ¾Ð´Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ">Birim</label> <select class="form-input" id="unit" required> <option value="" data-tr="SeÃ§iniz" data-en="Select" data-ru="Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ">SeÃ§iniz</option> <option value="IT" data-tr="Bilgi Ä°ÅŸlem" data-en="IT" data-ru="Ð˜Ð¢">Bilgi Ä°ÅŸlem</option> <option value="HR" data-tr="Ä°nsan KaynaklarÄ±" data-en="Human Resources" data-ru="ÐšÐ°Ð´Ñ€Ñ‹">Ä°nsan KaynaklarÄ±</option> <option value="Finance" data-tr="Finans" data-en="Finance" data-ru="Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹">Finans</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Adet" data-en="Quantity" data-ru="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾">Adet</label> <input type="number" class="form-input" id="quantity" required min="1" data-tr-placeholder="Adet girin" data-en-placeholder="Enter quantity" data-ru-placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Teslim Tarihi" data-en="Delivery Date" data-ru="Ð”Ð°Ñ‚Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸">Teslim Tarihi</label> <input type="date" class="form-input" id="delivery-date" required>
       </div>
       <div class="form-group" style="grid-column: 1 / -1;"><button type="submit" class="btn-primary" style="width: auto; padding: 16px 32px;"> <span data-tr="Talep OluÅŸtur" data-en="Create Request" data-ru="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ð·Ð°Ð¿Ñ€Ð¾Ñ">Talep OluÅŸtur</span> </button>
       </div>
      </form>
     </div>
    </div><!-- Records Section -->
    <div id="records-section" class="section hidden">
     <div class="table-section">
      <h2 class="table-title" data-tr="TÃ¼m KayÄ±tlar" data-en="All Records" data-ru="Ð’ÑÐµ Ð·Ð°Ð¿Ð¸ÑÐ¸">TÃ¼m KayÄ±tlar</h2>
      <p style="color: var(--text-gray); margin-top: 16px;" data-tr="Bu bÃ¶lÃ¼mde tÃ¼m malzeme kayÄ±tlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebilir ve yÃ¶netebilirsiniz." data-en="You can view and manage all material records in this section." data-ru="Ð’ ÑÑ‚Ð¾Ð¼ Ñ€Ð°Ð·Ð´ÐµÐ»Ðµ Ð²Ñ‹ Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð¿Ñ€Ð¾ÑÐ¼Ð°Ñ‚Ñ€Ð¸Ð²Ð°Ñ‚ÑŒ Ð¸ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÑÑ‚ÑŒ Ð²ÑÐµÐ¼Ð¸ Ð·Ð°Ð¿Ð¸ÑÑÐ¼Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð².">Bu bÃ¶lÃ¼mde tÃ¼m malzeme kayÄ±tlarÄ±nÄ± gÃ¶rÃ¼ntÃ¼leyebilir ve yÃ¶netebilirsiniz.</p>
     </div>
    </div><!-- Google Drive Section -->
    <div id="google-drive-section" class="section hidden">
     <div class="drive-section">
      <div class="drive-icon">
       <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
       </svg>
      </div>
      <h2 class="drive-title" data-tr="Google Drive Senkronizasyonu" data-en="Google Drive Synchronization" data-ru="Ð¡Ð¸Ð½Ñ…Ñ€Ð¾Ð½Ð¸Ð·Ð°Ñ†Ð¸Ñ Google Drive">Google Drive Senkronizasyonu</h2>
      <div class="drive-buttons"><button class="btn-drive" onclick="connectDrive()" data-tr="BaÄŸlan" data-en="Connect" data-ru="ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ">BaÄŸlan</button> <button class="btn-drive" onclick="backupToDrive()" data-tr="Yedekle" data-en="Backup" data-ru="Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ">Yedekle</button> <button class="btn-drive" onclick="restoreFromDrive()" data-tr="Geri YÃ¼kle" data-en="Restore" data-ru="Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ">Geri YÃ¼kle</button>
      </div>
      <p class="drive-note" data-tr="Drive baÄŸlantÄ±sÄ± kurulmadan iÅŸlem yapÄ±lamaz." data-en="Operations cannot be performed without establishing a Drive connection." data-ru="ÐžÐ¿ÐµÑ€Ð°Ñ†Ð¸Ð¸ Ð½Ðµ Ð¼Ð¾Ð³ÑƒÑ‚ Ð±Ñ‹Ñ‚ÑŒ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½Ñ‹ Ð±ÐµÐ· ÑƒÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐ¾ÐµÐ´Ð¸Ð½ÐµÐ½Ð¸Ñ Ñ Drive.">Drive baÄŸlantÄ±sÄ± kurulmadan iÅŸlem yapÄ±lamaz.</p>
     </div>
    </div><!-- Material Records Section -->
    <div id="material-records-section" class="section hidden">
     <div class="table-section">
      <div class="table-header">
       <h2 class="table-title" data-tr="Malzeme KayÄ±tlarÄ± YÃ¶netimi" data-en="Material Records Management" data-ru="Ð£Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÑÐ¼Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²">Malzeme KayÄ±tlarÄ± YÃ¶netimi</h2>
       <div class="export-buttons"><button class="btn-export" onclick="exportToPDF()" data-tr="PDF olarak indir" data-en="Download as PDF" data-ru="Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ ÐºÐ°Ðº PDF">PDF olarak indir</button> <button class="btn-export" onclick="exportToCSV()" data-tr="Excel (CSV) olarak indir" data-en="Download as Excel (CSV)" data-ru="Ð¡ÐºÐ°Ñ‡Ð°Ñ‚ÑŒ ÐºÐ°Ðº Excel (CSV)">Excel (CSV) olarak indir</button>
       </div>
      </div>
      <div class="filters">
       <div class="filter-group"><label class="filter-label" data-tr="Birim" data-en="Unit" data-ru="ÐŸÐ¾Ð´Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ">Birim</label> <select class="filter-select" id="material-unit-filter" onchange="applyFilters()"> <option value="" data-tr="TÃ¼mÃ¼" data-en="All" data-ru="Ð’ÑÐµ">TÃ¼mÃ¼</option> <option value="IT" data-tr="Bilgi Ä°ÅŸlem" data-en="IT" data-ru="Ð˜Ð¢">Bilgi Ä°ÅŸlem</option> <option value="HR" data-tr="Ä°nsan KaynaklarÄ±" data-en="Human Resources" data-ru="ÐšÐ°Ð´Ñ€Ñ‹">Ä°nsan KaynaklarÄ±</option> <option value="Finance" data-tr="Finans" data-en="Finance" data-ru="Ð¤Ð¸Ð½Ð°Ð½ÑÑ‹">Finans</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Ana Tip" data-en="Main Type" data-ru="ÐžÑÐ½Ð¾Ð²Ð½Ð¾Ð¹ Ñ‚Ð¸Ð¿">Ana Tip</label> <select class="filter-select" id="material-type-filter" onchange="applyFilters()"> <option value="" data-tr="TÃ¼mÃ¼" data-en="All" data-ru="Ð’ÑÐµ">TÃ¼mÃ¼</option> <option value="KÄ±rtasiye" data-tr="KÄ±rtasiye" data-en="Stationery" data-ru="ÐšÐ°Ð½Ñ†ÐµÐ»ÑÑ€Ð¸Ñ">KÄ±rtasiye</option> <option value="Elektronik" data-tr="Elektronik" data-en="Electronics" data-ru="Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð¸ÐºÐ°">Elektronik</option> <option value="Mobilya" data-tr="Mobilya" data-en="Furniture" data-ru="ÐœÐµÐ±ÐµÐ»ÑŒ">Mobilya</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Durum" data-en="Status" data-ru="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ">Durum</label> <select class="filter-select" id="material-status-filter" onchange="applyFilters()"> <option value="" data-tr="TÃ¼mÃ¼" data-en="All" data-ru="Ð’ÑÐµ">TÃ¼mÃ¼</option> <option value="approved" data-tr="OnaylandÄ±" data-en="Approved" data-ru="ÐžÐ´Ð¾Ð±Ñ€ÐµÐ½Ð¾">OnaylandÄ±</option> <option value="pending" data-tr="Bekliyor" data-en="Pending" data-ru="Ð’ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ð¸">Bekliyor</option> <option value="rejected" data-tr="Reddedildi" data-en="Rejected" data-ru="ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾">Reddedildi</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Tarih AralÄ±ÄŸÄ±" data-en="Date Range" data-ru="Ð”Ð¸Ð°Ð¿Ð°Ð·Ð¾Ð½ Ð´Ð°Ñ‚">Tarih AralÄ±ÄŸÄ±</label> <input type="date" class="filter-input" id="material-date-from" onchange="applyFilters()" data-tr-placeholder="BaÅŸlangÄ±Ã§ tarihi" data-en-placeholder="Start date" data-ru-placeholder="Ð”Ð°Ñ‚Ð° Ð½Ð°Ñ‡Ð°Ð»Ð°">
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="BitiÅŸ Tarihi" data-en="End Date" data-ru="Ð”Ð°Ñ‚Ð° Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ">BitiÅŸ Tarihi</label> <input type="date" class="filter-input" id="material-date-to" onchange="applyFilters()" data-tr-placeholder="BitiÅŸ tarihi" data-en-placeholder="End date" data-ru-placeholder="Ð”Ð°Ñ‚Ð° Ð¾ÐºÐ¾Ð½Ñ‡Ð°Ð½Ð¸Ñ">
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Arama" data-en="Search" data-ru="ÐŸÐ¾Ð¸ÑÐº">Arama</label> <input type="text" class="filter-input" id="material-search-input" oninput="applyFilters()" data-tr-placeholder="SOF No veya malzeme ara..." data-en-placeholder="Search SOF No or material..." data-ru-placeholder="ÐŸÐ¾Ð¸ÑÐº SOF No Ð¸Ð»Ð¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°...">
       </div>
      </div>
      <div style="overflow-x: auto;">
       <table class="data-table">
        <thead>
         <tr>
          <th data-tr="SOF No" data-en="SOF No" data-ru="SOF No">SOF No</th>
          <th data-tr="Talep Tarihi" data-en="Request Date" data-ru="Ð”Ð°Ñ‚Ð° Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°">Talep Tarihi</th>
          <th data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Ð¢Ð¸Ð¿ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°">Malzeme Tipi</th>
          <th data-tr="Birim" data-en="Unit" data-ru="ÐŸÐ¾Ð´Ñ€Ð°Ð·Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ">Birim</th>
          <th data-tr="Adet" data-en="Quantity" data-ru="ÐšÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð¾">Adet</th>
          <th data-tr="Teslim Tarihi" data-en="Delivery Date" data-ru="Ð”Ð°Ñ‚Ð° Ð´Ð¾ÑÑ‚Ð°Ð²ÐºÐ¸">Teslim Tarihi</th>
          <th data-tr="Durum" data-en="Status" data-ru="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ">Durum</th>
          <th data-tr="Ä°ÅŸlemler" data-en="Actions" data-ru="Ð”ÐµÐ¹ÑÑ‚Ð²Ð¸Ñ">Ä°ÅŸlemler</th>
         </tr>
        </thead>
        <tbody id="material-records-table-body"><!-- Material records will be loaded here -->
        </tbody>
       </table>
      </div>
      <div class="pagination" id="material-pagination"><!-- Pagination will be generated here -->
      </div>
     </div>
    </div><!-- Settings Section -->
    <div id="settings-section" class="section hidden">
     <div class="settings-section">
      <div class="settings-card">
       <h3 class="settings-title" data-tr="KullanÄ±cÄ± Bilgileri" data-en="User Information" data-ru="Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ">KullanÄ±cÄ± Bilgileri</h3>
       <div class="form-group"><label class="form-label" data-tr="Ad Soyad" data-en="Full Name" data-ru="ÐŸÐ¾Ð»Ð½Ð¾Ðµ Ð¸Ð¼Ñ">Ad Soyad</label> <input type="text" class="form-input" id="user-fullname" value="OÄŸuzhan Kaya">
       </div>
       <div class="form-group"><label class="form-label" data-tr="E-posta" data-en="Email" data-ru="Ð­Ð»ÐµÐºÑ‚Ñ€Ð¾Ð½Ð½Ð°Ñ Ð¿Ð¾Ñ‡Ñ‚Ð°">E-posta</label> <input type="email" class="form-input" id="user-email" value="oguzhan@somtech.com">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Rol" data-en="Role" data-ru="Ð Ð¾Ð»ÑŒ">Rol</label> <input type="text" class="form-input" id="user-role-input" value="SatÄ±n Alma" readonly>
       </div><button class="btn-primary" onclick="updateUserInfo()" data-tr="Bilgileri GÃ¼ncelle" data-en="Update Information" data-ru="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸ÑŽ">Bilgileri GÃ¼ncelle</button>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Sistem AyarlarÄ±" data-en="System Settings" data-ru="Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð½Ñ‹Ðµ Ð½Ð°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸">Sistem AyarlarÄ±</h3>
       <div class="form-group"><label class="form-label" data-tr="Dil" data-en="Language" data-ru="Ð¯Ð·Ñ‹Ðº">Dil</label> <select class="form-input" id="language-select" onchange="setLanguage(this.value)"> <option value="tr" data-tr="TÃ¼rkÃ§e" data-en="Turkish" data-ru="Ð¢ÑƒÑ€ÐµÑ†ÐºÐ¸Ð¹">TÃ¼rkÃ§e</option> <option value="en" data-tr="Ä°ngilizce" data-en="English" data-ru="ÐÐ½Ð³Ð»Ð¸Ð¹ÑÐºÐ¸Ð¹">Ä°ngilizce</option> <option value="ru" data-tr="RusÃ§a" data-en="Russian" data-ru="Ð ÑƒÑÑÐºÐ¸Ð¹">RusÃ§a</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Tema" data-en="Theme" data-ru="Ð¢ÐµÐ¼Ð°">Tema</label> <select class="form-input" id="theme-select" onchange="setTheme(this.value)"> <option value="light" data-tr="AÃ§Ä±k" data-en="Light" data-ru="Ð¡Ð²ÐµÑ‚Ð»Ñ‹Ð¹">AÃ§Ä±k</option> <option value="dark" data-tr="Koyu" data-en="Dark" data-ru="Ð¢ÐµÐ¼Ð½Ñ‹Ð¹">Koyu</option> </select>
       </div>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Åžifre DeÄŸiÅŸtir" data-en="Change Password" data-ru="Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">Åžifre DeÄŸiÅŸtir</h3>
       <div class="form-group"><label class="form-label" data-tr="Mevcut Åžifre" data-en="Current Password" data-ru="Ð¢ÐµÐºÑƒÑ‰Ð¸Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">Mevcut Åžifre</label> <input type="password" class="form-input" id="current-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Åžifre" data-en="New Password" data-ru="ÐÐ¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">Yeni Åžifre</label> <input type="password" class="form-input" id="new-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Åžifre Tekrar" data-en="Confirm New Password" data-ru="ÐŸÐ¾Ð´Ñ‚Ð²ÐµÑ€Ð´Ð¸Ñ‚Ðµ Ð½Ð¾Ð²Ñ‹Ð¹ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">Yeni Åžifre Tekrar</label> <input type="password" class="form-input" id="confirm-password">
       </div><button class="btn-primary" onclick="changePassword()" data-tr="Åžifreyi DeÄŸiÅŸtir" data-en="Change Password" data-ru="Ð˜Ð·Ð¼ÐµÐ½Ð¸Ñ‚ÑŒ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">Åžifreyi DeÄŸiÅŸtir</button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Login Overlay -->
  <div id="login-overlay" class="login-overlay">
   <div class="login-container">
    <div class="login-header">
     <div class="login-logo">
      <div class="logo-icon">
       <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
       </svg>
      </div>
      <div class="login-title">
       <h1 data-tr="SOMTECH_SOF v2.0.0 GiriÅŸ" data-en="SOMTECH_SOF v2.0.0 Login" data-ru="SOMTECH_SOF v2.0.0 Ð’Ñ…Ð¾Ð´">SOMTECH_SOF v2.0.0 GiriÅŸ</h1>
       <p data-tr="Malzeme YÃ¶netim Sistemi" data-en="Material Management System" data-ru="Ð¡Ð¸ÑÑ‚ÐµÐ¼Ð° ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð°Ð¼Ð¸">Malzeme YÃ¶netim Sistemi</p>
      </div>
     </div>
    </div>
    <form id="login-form" class="login-form">
     <div class="form-group"><label class="form-label" data-tr="E-posta / KullanÄ±cÄ± AdÄ±" data-en="Email / Username" data-ru="Email / Ð˜Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ">E-posta / KullanÄ±cÄ± AdÄ±</label> <input type="text" class="form-input" id="login-username" required data-tr-placeholder="E-posta adresinizi girin" data-en-placeholder="Enter your email address" data-ru-placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ email">
     </div>
     <div class="form-group"><label class="form-label" data-tr="Åžifre" data-en="Password" data-ru="ÐŸÐ°Ñ€Ð¾Ð»ÑŒ">Åžifre</label> <input type="password" class="form-input" id="login-password" required data-tr-placeholder="Åžifrenizi girin" data-en-placeholder="Enter your password" data-ru-placeholder="Ð’Ð²ÐµÐ´Ð¸Ñ‚Ðµ Ð²Ð°Ñˆ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ">
     </div>
     <div class="login-buttons"><button type="submit" class="btn-login" data-tr="GiriÅŸ Yap" data-en="Login" data-ru="Ð’Ð¾Ð¹Ñ‚Ð¸">GiriÅŸ Yap</button> <button type="button" class="btn-register" onclick="showRegister()" data-tr="KayÄ±t Ol" data-en="Register" data-ru="Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ">KayÄ±t Ol</button>
     </div>
     <div class="login-footer">
      <p data-tr="Admin hesap: admin@somtech.com / somtech2025" data-en="Admin account: admin@somtech.com / somtech2025" data-ru="ÐÐ´Ð¼Ð¸Ð½ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚: admin@somtech.com / somtech2025">Admin hesap: admin@somtech.com / somtech2025</p>
     </div>
    </form>
   </div>
  </div><!-- Summary Modal -->
  <div id="summary-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Sistem Ã–zeti" data-en="System Summary" data-ru="Ð¡Ð²Ð¾Ð´ÐºÐ° ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹">Sistem Ã–zeti</h2><button class="modal-close" onclick="closeSummaryModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div class="mini-cards">
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Toplam Talepler" data-en="Total Requests" data-ru="Ð’ÑÐµÐ³Ð¾ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²">
        Toplam Talepler
       </div>
       <div class="mini-card-value" id="modal-total-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Onaylanan" data-en="Approved" data-ru="ÐžÐ´Ð¾Ð±Ñ€ÐµÐ½Ð¾">
        Onaylanan
       </div>
       <div class="mini-card-value" id="modal-approved-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Bekleyen" data-en="Pending" data-ru="Ð’ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ð¸">
        Bekleyen
       </div>
       <div class="mini-card-value" id="modal-pending-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Ä°ÅŸlemde" data-en="In Process" data-ru="Ð’ Ð¿Ñ€Ð¾Ñ†ÐµÑÑÐµ">
        Ä°ÅŸlemde
       </div>
       <div class="mini-card-value" id="modal-processing-requests">
        0
       </div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Tracking Modal -->
  <div id="tracking-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Takip Logu" data-en="Tracking Log" data-ru="Ð–ÑƒÑ€Ð½Ð°Ð» Ð¾Ñ‚ÑÐ»ÐµÐ¶Ð¸Ð²Ð°Ð½Ð¸Ñ">Takip Logu</h2><button class="modal-close" onclick="closeTrackingModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div id="tracking-log-content"><!-- Tracking log will be loaded here -->
     </div>
    </div>
   </div>
  </div><!-- Reject Modal -->
  <div id="reject-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Talep Reddi" data-en="Request Rejection" data-ru="ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ðµ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°">Talep Reddi</h2><button class="modal-close" onclick="closeRejectModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <p data-tr="Bu talebi reddetmek istediÄŸinizden emin misiniz?" data-en="Are you sure you want to reject this request?" data-ru="Ð’Ñ‹ ÑƒÐ²ÐµÑ€ÐµÐ½Ñ‹, Ñ‡Ñ‚Ð¾ Ñ…Ð¾Ñ‚Ð¸Ñ‚Ðµ Ð¾Ñ‚ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒ ÑÑ‚Ð¾Ñ‚ Ð·Ð°Ð¿Ñ€Ð¾Ñ?">Bu talebi reddetmek istediÄŸinizden emin misiniz?</p>
     <div class="reject-form"><label class="form-label" data-tr="Red sebebi (isteÄŸe baÄŸlÄ±)" data-en="Rejection reason (optional)" data-ru="ÐŸÑ€Ð¸Ñ‡Ð¸Ð½Ð° Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ (Ð½ÐµÐ¾Ð±ÑÐ·Ð°Ñ‚ÐµÐ»ÑŒÐ½Ð¾)">Red sebebi (isteÄŸe baÄŸlÄ±)</label> <textarea id="reject-reason" class="reject-textarea" data-tr-placeholder="Red sebebinizi yazÄ±n..." data-en-placeholder="Write your rejection reason..." data-ru-placeholder="ÐÐ°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ð¿Ñ€Ð¸Ñ‡Ð¸Ð½Ñƒ Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ..."></textarea>
     </div>
     <div class="modal-buttons"><button class="btn-modal-secondary" onclick="closeRejectModal()" data-tr="Ä°ptal" data-en="Cancel" data-ru="ÐžÑ‚Ð¼ÐµÐ½Ð°">Ä°ptal</button> <button class="btn-modal-primary" onclick="confirmReject()" data-tr="Reddet" data-en="Reject" data-ru="ÐžÑ‚ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒ">Reddet</button>
     </div>
    </div>
   </div>
  </div><!-- Invoice Modal -->
  <div id="invoice-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Ã–n Fatura GÃ¶rÃ¼nÃ¼mÃ¼" data-en="Invoice Preview" data-ru="ÐŸÑ€ÐµÐ´Ð²Ð°Ñ€Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ñ‹Ð¹ Ð¿Ñ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÑ‡ÐµÑ‚Ð°">Ã–n Fatura GÃ¶rÃ¼nÃ¼mÃ¼</h2><button class="modal-close" onclick="closeInvoiceModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div id="invoice-content"><!-- Invoice content will be loaded here -->
     </div>
    </div>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            company_name: "SOMTECH",
            system_version: "v2.0.0",
            welcome_message: "HoÅŸ geldin"
        };

        // Global variables
        let currentLanguage = 'tr';
        let isDarkTheme = false;
        let isSidebarCollapsed = false;
        let isLoggedIn = false;
        let currentUser = {
            name: "OÄŸuzhan KarslÄ±",
            role: "SatÄ±n Alma",
            email: "admin@somtech.com"
        };
        let allRecords = [];
        let currentPage = 1;
        let recordsPerPage = 10;
        let statusChart = null;

        // Sample data for demonstration
        const sampleRecords = [
            {
                id: '1',
                sofNo: 'SOF-2024-001',
                requestDate: '2024-01-15',
                materialType: 'KÄ±rtasiye',
                unit: 'IT',
                quantity: 50,
                deliveryDate: '2024-01-25',
                status: 'approved',
                requester: 'OÄŸuzhan Kaya',
                createdAt: new Date().toISOString(),
                progress: 100,
                currentStep: 'completed'
            },
            {
                id: '2',
                sofNo: 'SOF-2024-002',
                requestDate: '2024-01-16',
                materialType: 'Elektronik',
                unit: 'HR',
                quantity: 2,
                deliveryDate: '2024-02-01',
                status: 'pending_approval',
                requester: 'AyÅŸe Demir',
                createdAt: new Date().toISOString(),
                progress: 20,
                currentStep: 'approval'
            },
            {
                id: '3',
                sofNo: 'SOF-2024-003',
                requestDate: '2024-01-17',
                materialType: 'Mobilya',
                unit: 'Finance',
                quantity: 1,
                deliveryDate: '2024-02-15',
                status: 'purchasing',
                requester: 'Mehmet YÄ±lmaz',
                createdAt: new Date().toISOString(),
                progress: 60,
                currentStep: 'purchasing'
            },
            {
                id: '4',
                sofNo: 'SOF-2024-004',
                requestDate: '2024-01-18',
                materialType: 'KÄ±rtasiye',
                unit: 'IT',
                quantity: 25,
                deliveryDate: '2024-02-05',
                status: 'pending_payment',
                requester: 'OÄŸuzhan Kaya',
                createdAt: new Date().toISOString(),
                progress: 80,
                currentStep: 'payment'
            }
        ];

        // Global variables for modals
        let currentRejectId = null;

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                allRecords = data.length > 0 ? data : sampleRecords;
                updateDashboardStats();
                updateDashboardSections();
                updateRecordsTable();
            }
        };

        // Language detection and setup
        function detectBrowserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('en')) return 'en';
            if (browserLang.startsWith('ru')) return 'ru';
            return 'tr';
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === lang.toUpperCase()) {
                    btn.classList.add('active');
                }
            });
            
            // Update language select in settings
            document.getElementById('language-select').value = lang;
            
            updateTranslations();
            updatePlaceholders();
            showNotification(getTranslation('Dil deÄŸiÅŸtirildi', 'Language changed', 'Ð¯Ð·Ñ‹Ðº Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½'), 'success');
        }

        function updateTranslations() {
            document.querySelectorAll('[data-tr]').forEach(element => {
                const trText = element.getAttribute('data-tr');
                const enText = element.getAttribute('data-en');
                const ruText = element.getAttribute('data-ru');
                
                if (currentLanguage === 'en' && enText) {
                    element.textContent = enText;
                } else if (currentLanguage === 'ru' && ruText) {
                    element.textContent = ruText;
                } else if (trText) {
                    element.textContent = trText;
                }
            });
        }

        function updatePlaceholders() {
            document.querySelectorAll('[data-tr-placeholder]').forEach(element => {
                const trPlaceholder = element.getAttribute('data-tr-placeholder');
                const enPlaceholder = element.getAttribute('data-en-placeholder');
                const ruPlaceholder = element.getAttribute('data-ru-placeholder');
                
                if (currentLanguage === 'en' && enPlaceholder) {
                    element.placeholder = enPlaceholder;
                } else if (currentLanguage === 'ru' && ruPlaceholder) {
                    element.placeholder = ruPlaceholder;
                } else if (trPlaceholder) {
                    element.placeholder = trPlaceholder;
                }
            });
        }

        function getTranslation(tr, en, ru) {
            if (currentLanguage === 'en') return en;
            if (currentLanguage === 'ru') return ru;
            return tr;
        }

        // Theme functions
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            setTheme(isDarkTheme ? 'dark' : 'light');
        }

        function setTheme(theme) {
            isDarkTheme = theme === 'dark';
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (isDarkTheme) {
                body.classList.add('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
            } else {
                body.classList.remove('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
            }
            
            document.getElementById('theme-select').value = theme;
            updateChart();
        }

        // Sidebar functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            isSidebarCollapsed = !isSidebarCollapsed;
            
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('mobile-open');
            } else {
                sidebar.classList.toggle('collapsed');
            }
        }

        // Session management functions
        function showSessionElements() {
            // Update welcome message
            const welcomeText = document.getElementById('welcome-text');
            welcomeText.textContent = `HoÅŸ geldiniz, ${currentUser.name.split(' ')[0]}`;
            
            // Update user info
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = currentUser.role;
            document.getElementById('user-avatar').textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Show elements with staggered animation
            setTimeout(() => {
                document.getElementById('welcome-message').classList.add('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.add('show');
            }, 400);
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.add('show');
            }, 600);
            
            setTimeout(() => {
                document.getElementById('logout-btn').classList.add('show');
            }, 800);
        }
        
        function hideSessionElements() {
            // Hide elements with reverse animation
            document.getElementById('logout-btn').classList.remove('show');
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.remove('show');
            }, 100);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.remove('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('welcome-message').classList.remove('show');
            }, 300);
        }

        // Login functions
        function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            // Admin authentication
            if ((username === 'admin@somtech.com' || username === 'admin') && password === 'somtech2025') {
                isLoggedIn = true;
                
                // Update user info
                currentUser.name = "OÄŸuzhan KarslÄ±";
                currentUser.role = "SatÄ±n Alma";
                currentUser.email = "admin@somtech.com";
                
                // Save login state to localStorage
                localStorage.setItem('somtech_logged_in', 'true');
                localStorage.setItem('somtech_user', JSON.stringify(currentUser));
                
                // Hide login overlay
                document.getElementById('login-overlay').classList.add('hidden');
                
                // Remove blur from dashboard
                document.querySelector('.dashboard-container').classList.remove('blurred');
                
                // Show session elements with animation
                showSessionElements();
                
                showNotification(getTranslation('BaÅŸarÄ±yla giriÅŸ yapÄ±ldÄ±', 'Successfully logged in', 'Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ð²Ñ…Ð¾Ð´ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ'), 'success');
            } else if (username && password) {
                // Other users - pending approval
                showNotification(getTranslation('HesabÄ±nÄ±z onay bekliyor. LÃ¼tfen yÃ¶neticinizle iletiÅŸime geÃ§in.', 'Your account is pending approval. Please contact your administrator.', 'Ð’Ð°Ñˆ Ð°ÐºÐºÐ°ÑƒÐ½Ñ‚ Ð¾Ð¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ. ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑÐ²ÑÐ¶Ð¸Ñ‚ÐµÑÑŒ Ñ Ð°Ð´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ‚Ð¾Ñ€Ð¾Ð¼.'), 'error');
            } else {
                showNotification(getTranslation('GeÃ§ersiz kullanÄ±cÄ± adÄ± veya ÅŸifre', 'Invalid username or password', 'ÐÐµÐ²ÐµÑ€Ð½Ð¾Ðµ Ð¸Ð¼Ñ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ñ Ð¸Ð»Ð¸ Ð¿Ð°Ñ€Ð¾Ð»ÑŒ'), 'error');
            }
        }

        function showRegister() {
            showNotification(getTranslation('KayÄ±t Ã¶zelliÄŸi yakÄ±nda eklenecek', 'Registration feature coming soon', 'Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ€ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ð¸ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        // Navigation functions
        function showSection(sectionName) {
            if (!isLoggedIn) {
                showNotification(getTranslation('LÃ¼tfen Ã¶nce giriÅŸ yapÄ±n', 'Please login first', 'ÐŸÐ¾Ð¶Ð°Ð»ÑƒÐ¹ÑÑ‚Ð°, ÑÐ½Ð°Ñ‡Ð°Ð»Ð° Ð²Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð² ÑÐ¸ÑÑ‚ÐµÐ¼Ñƒ'), 'error');
                return;
            }
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked nav item
            const clickedItem = event.target.closest('.nav-item');
            if (clickedItem) {
                clickedItem.classList.add('active');
            }
            
            // Fade out current section
            const currentSection = document.querySelector('.section.active');
            if (currentSection) {
                currentSection.classList.add('fade-out');
                
                setTimeout(() => {
                    // Hide all sections
                    document.querySelectorAll('.section').forEach(section => {
                        section.classList.add('hidden');
                        section.classList.remove('active', 'fade-out');
                    });
                    
                    // Show and activate selected section
                    const targetSection = document.getElementById(sectionName + '-section');
                    targetSection.classList.remove('hidden');
                    
                    setTimeout(() => {
                        targetSection.classList.add('active');
                    }, 50);
                }, 200);
            }
            
            // Update page title
            const titles = {
                'dashboard': getTranslation('Ana Sayfa', 'Dashboard', 'ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ'),
                'new-request': getTranslation('Yeni Talep', 'New Request', 'ÐÐ¾Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ'),
                'records': getTranslation('KayÄ±tlar', 'Records', 'Ð—Ð°Ð¿Ð¸ÑÐ¸'),
                'material-records': getTranslation('Malzeme KayÄ±tlarÄ±', 'Material Records', 'Ð—Ð°Ð¿Ð¸ÑÐ¸ Ð¼Ð°Ñ‚ÐµÑ€Ð¸Ð°Ð»Ð¾Ð²'),
                'google-drive': getTranslation('Google Drive', 'Google Drive', 'Google Drive'),
                'settings': getTranslation('Ayarlar', 'Settings', 'ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸')
            };
            
            document.getElementById('page-title').textContent = titles[sectionName] || titles['dashboard'];
            
            // Load section-specific data
            if (sectionName === 'material-records') {
                setTimeout(() => {
                    updateMaterialRecordsTable();
                }, 300);
            }
        }

        // Filtering functions
        let filteredRecords = [];
        let materialCurrentPage = 1;

        function applyFilters() {
            const unitFilter = document.getElementById('material-unit-filter').value;
            const typeFilter = document.getElementById('material-type-filter').value;
            const statusFilter = document.getElementById('material-status-filter').value;
            const dateFromFilter = document.getElementById('material-date-from').value;
            const dateToFilter = document.getElementById('material-date-to').value;
            const searchFilter = document.getElementById('material-search-input').value.toLowerCase();
            
            filteredRecords = allRecords.filter(record => {
                // Unit filter
                if (unitFilter && record.unit !== unitFilter) return false;
                
                // Type filter
                if (typeFilter && record.materialType !== typeFilter) return false;
                
                // Status filter
                if (statusFilter && record.status !== statusFilter) return false;
                
                // Date range filter
                if (dateFromFilter && record.requestDate < dateFromFilter) return false;
                if (dateToFilter && record.requestDate > dateToFilter) return false;
                
                // Search filter
                if (searchFilter && 
                    !record.sofNo.toLowerCase().includes(searchFilter) &&
                    !record.materialType.toLowerCase().includes(searchFilter)) return false;
                
                return true;
            });
            
            materialCurrentPage = 1;
            updateMaterialRecordsTable();
        }

        function updateMaterialRecordsTable() {
            const tbody = document.getElementById('material-records-table-body');
            const recordsToShow = filteredRecords.length > 0 ? filteredRecords : allRecords;
            const startIndex = (materialCurrentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = recordsToShow.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="GÃ¶rÃ¼ntÃ¼le" data-en="View" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€">GÃ¶rÃ¼ntÃ¼le</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="DÃ¼zenle" data-en="Edit" data-ru="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ">DÃ¼zenle</button>
                    </td>
                </tr>
            `).join('');
            
            updateMaterialPagination(recordsToShow.length);
            updateTranslations();
        }

        function updateMaterialPagination(totalRecords) {
            const totalPages = Math.ceil(totalRecords / recordsPerPage);
            const pagination = document.getElementById('material-pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (materialCurrentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage - 1})">â€¹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === materialCurrentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (materialCurrentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage + 1})">â€º</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changeMaterialPage(page) {
            materialCurrentPage = page;
            updateMaterialRecordsTable();
        }

        // Dashboard statistics
        function updateDashboardStats() {
            const total = allRecords.length;
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending_approval').length;
            const processing = allRecords.filter(r => ['purchasing', 'pending_payment'].includes(r.status)).length;
            
            // Update modal stats
            const modalTotal = document.getElementById('modal-total-requests');
            const modalApproved = document.getElementById('modal-approved-requests');
            const modalPending = document.getElementById('modal-pending-requests');
            const modalProcessing = document.getElementById('modal-processing-requests');
            
            if (modalTotal) modalTotal.textContent = total;
            if (modalApproved) modalApproved.textContent = approved;
            if (modalPending) modalPending.textContent = pending;
            if (modalProcessing) modalProcessing.textContent = processing;
        }

        // Update dashboard sections
        function updateDashboardSections() {
            updateMyRequests();
            updatePendingApprovals();
            updatePendingPayments();
            updatePurchasing();
        }

        // Update my requests section
        function updateMyRequests() {
            const myRequests = allRecords.filter(r => r.requester === currentUser.name).slice(0, 5);
            const container = document.getElementById('my-requests-list');
            const countBadge = document.getElementById('my-requests-count');
            
            countBadge.textContent = allRecords.filter(r => r.requester === currentUser.name).length;
            
            if (myRequests.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="HenÃ¼z talep yok" data-en="No requests yet" data-ru="ÐŸÐ¾ÐºÐ° Ð½ÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð²">HenÃ¼z talep yok</div>
                        <div class="empty-state-description" data-tr="Ä°lk talebinizi oluÅŸturmak iÃ§in yukarÄ±daki butonu kullanÄ±n" data-en="Use the button above to create your first request" data-ru="Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ ÐºÐ½Ð¾Ð¿ÐºÑƒ Ð²Ñ‹ÑˆÐµ, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ¾Ð·Ð´Ð°Ñ‚ÑŒ ÑÐ²Ð¾Ð¹ Ð¿ÐµÑ€Ð²Ñ‹Ð¹ Ð·Ð°Ð¿Ñ€Ð¾Ñ">Ä°lk talebinizi oluÅŸturmak iÃ§in yukarÄ±daki butonu kullanÄ±n</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = myRequests.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet</div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${request.progress}%"></div>
                        </div>
                        <div class="progress-steps">
                            <span class="progress-step ${request.progress >= 20 ? 'active' : ''}" data-tr="Talep Edildi" data-en="Requested" data-ru="Ð—Ð°Ð¿Ñ€Ð¾ÑˆÐµÐ½Ð¾">Talep Edildi</span>
                            <span class="progress-step ${request.progress >= 40 ? 'active' : ''}" data-tr="Onay Bekliyor" data-en="Pending Approval" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ">Onay Bekliyor</span>
                            <span class="progress-step ${request.progress >= 60 ? 'active' : ''}" data-tr="SatÄ±n Alma" data-en="Purchasing" data-ru="Ð—Ð°ÐºÑƒÐ¿ÐºÐ°">SatÄ±n Alma</span>
                            <span class="progress-step ${request.progress >= 80 ? 'active' : ''}" data-tr="Ã–deme Bekliyor" data-en="Pending Payment" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹">Ã–deme Bekliyor</span>
                            <span class="progress-step ${request.progress >= 100 ? 'active' : ''}" data-tr="TamamlandÄ±" data-en="Completed" data-ru="Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾">TamamlandÄ±</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update pending approvals section
        function updatePendingApprovals() {
            const pendingApprovals = allRecords.filter(r => r.status === 'pending_approval').slice(0, 3);
            const container = document.getElementById('pending-approval-list');
            const countBadge = document.getElementById('pending-approval-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'pending_approval').length;
            
            if (pendingApprovals.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Onay bekleyen talep yok" data-en="No pending approvals" data-ru="ÐÐµÑ‚ Ð¾Ð¶Ð¸Ð´Ð°ÑŽÑ‰Ð¸Ñ… Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ">Onay bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="TÃ¼m talepler iÅŸlenmiÅŸ durumda" data-en="All requests have been processed" data-ru="Ð’ÑÐµ Ð·Ð°Ð¿Ñ€Ð¾ÑÑ‹ Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚Ð°Ð½Ñ‹">TÃ¼m talepler iÅŸlenmiÅŸ durumda</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = pendingApprovals.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-approve" onclick="approveRequest('${request.id}')" data-tr="Onayla" data-en="Approve" data-ru="ÐžÐ´Ð¾Ð±Ñ€Ð¸Ñ‚ÑŒ">Onayla</button>
                        <button class="btn-reject" onclick="showRejectModal('${request.id}')" data-tr="Reddet" data-en="Reject" data-ru="ÐžÑ‚ÐºÐ»Ð¾Ð½Ð¸Ñ‚ÑŒ">Reddet</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update pending payments section
        function updatePendingPayments() {
            const pendingPayments = allRecords.filter(r => r.status === 'pending_payment').slice(0, 3);
            const container = document.getElementById('pending-payment-list');
            const countBadge = document.getElementById('pending-payment-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'pending_payment').length;
            
            if (pendingPayments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Ã–deme bekleyen talep yok" data-en="No pending payments" data-ru="ÐÐµÑ‚ Ð¾Ð¶Ð¸Ð´Ð°ÑŽÑ‰Ð¸Ñ… Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹">Ã–deme bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="TÃ¼m Ã¶demeler tamamlanmÄ±ÅŸ" data-en="All payments completed" data-ru="Ð’ÑÐµ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ñ‹">TÃ¼m Ã¶demeler tamamlanmÄ±ÅŸ</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = pendingPayments.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-payment" onclick="markPaymentComplete('${request.id}')" data-tr="Ã–deme YapÄ±ldÄ±" data-en="Payment Made" data-ru="ÐŸÐ»Ð°Ñ‚ÐµÐ¶ Ð²Ñ‹Ð¿Ð¾Ð»Ð½ÐµÐ½">Ã–deme YapÄ±ldÄ±</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update purchasing section
        function updatePurchasing() {
            const purchasing = allRecords.filter(r => r.status === 'purchasing').slice(0, 3);
            const container = document.getElementById('purchasing-list');
            const countBadge = document.getElementById('purchasing-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'purchasing').length;
            
            if (purchasing.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="SatÄ±n alma bekleyen talep yok" data-en="No purchasing requests" data-ru="ÐÐµÑ‚ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð½Ð° Ð·Ð°ÐºÑƒÐ¿ÐºÑƒ">SatÄ±n alma bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="TÃ¼m satÄ±n alma iÅŸlemleri tamamlanmÄ±ÅŸ" data-en="All purchasing completed" data-ru="Ð’ÑÐµ Ð·Ð°ÐºÑƒÐ¿ÐºÐ¸ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ñ‹">TÃ¼m satÄ±n alma iÅŸlemleri tamamlanmÄ±ÅŸ</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = purchasing.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-invoice" onclick="showInvoiceModal('${request.id}')" data-tr="Ã–n Fatura GÃ¶rÃ¼ntÃ¼le" data-en="View Invoice" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ ÑÑ‡ÐµÑ‚Ð°">Ã–n Fatura GÃ¶rÃ¼ntÃ¼le</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Chart functions
        function updateChart() {
            const ctx = document.getElementById('statusChart').getContext('2d');
            
            if (statusChart) {
                statusChart.destroy();
            }
            
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending').length;
            const rejected = allRecords.filter(r => r.status === 'rejected').length;
            
            statusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [
                        getTranslation('Onaylanan', 'Approved', 'ÐžÐ´Ð¾Ð±Ñ€ÐµÐ½Ð¾'),
                        getTranslation('Bekleyen', 'Pending', 'Ð’ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ð¸'),
                        getTranslation('Reddedilen', 'Rejected', 'ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾')
                    ],
                    datasets: [{
                        data: [approved, pending, rejected],
                        backgroundColor: [
                            '#10b981',
                            '#f59e0b',
                            '#ef4444'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: isDarkTheme ? '#f1f5f9' : '#1e293b',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Table functions
        function updateRecordsTable() {
            const tbody = document.getElementById('records-table-body');
            const startIndex = (currentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = allRecords.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="GÃ¶rÃ¼ntÃ¼le" data-en="View" data-ru="ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€">GÃ¶rÃ¼ntÃ¼le</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="DÃ¼zenle" data-en="Edit" data-ru="Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ñ‚ÑŒ">DÃ¼zenle</button>
                    </td>
                </tr>
            `).join('');
            
            updatePagination();
            updateTranslations();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('tr-TR');
        }

        function getStatusText(status) {
            const statusTexts = {
                'approved': getTranslation('OnaylandÄ±', 'Approved', 'ÐžÐ´Ð¾Ð±Ñ€ÐµÐ½Ð¾'),
                'pending': getTranslation('Bekliyor', 'Pending', 'Ð’ Ð¾Ð¶Ð¸Ð´Ð°Ð½Ð¸Ð¸'),
                'rejected': getTranslation('Reddedildi', 'Rejected', 'ÐžÑ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¾')
            };
            return statusTexts[status] || status;
        }

        function updatePagination() {
            const totalPages = Math.ceil(allRecords.length / recordsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage - 1})">â€¹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changePage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage + 1})">â€º</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            currentPage = page;
            updateRecordsTable();
        }

        // Form functions
        async function createNewRequest(event) {
            event.preventDefault();
            
            const formData = {
                id: Date.now().toString(),
                sofNo: document.getElementById('sof-no').value,
                requestDate: new Date().toISOString().split('T')[0],
                materialType: document.getElementById('material-type').value,
                unit: document.getElementById('unit').value,
                quantity: parseInt(document.getElementById('quantity').value),
                deliveryDate: document.getElementById('delivery-date').value,
                status: 'pending_approval',
                requester: currentUser.name,
                createdAt: new Date().toISOString(),
                progress: 20,
                currentStep: 'approval'
            };
            
            try {
                const result = await window.dataSdk.create(formData);
                
                if (result.isOk) {
                    showNotification(getTranslation('Talep baÅŸarÄ±yla oluÅŸturuldu', 'Request created successfully', 'Ð—Ð°Ð¿Ñ€Ð¾Ñ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ ÑÐ¾Ð·Ð´Ð°Ð½'), 'success');
                    document.getElementById('new-request-form').reset();
                    showSection('dashboard');
                } else {
                    showNotification(getTranslation('Talep oluÅŸturulurken hata oluÅŸtu', 'Error creating request', 'ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°'), 'error');
                }
            } catch (error) {
                console.error('Create request error:', error);
                showNotification(getTranslation('Talep oluÅŸturulurken hata oluÅŸtu', 'Error creating request', 'ÐžÑˆÐ¸Ð±ÐºÐ° ÑÐ¾Ð·Ð´Ð°Ð½Ð¸Ñ Ð·Ð°Ð¿Ñ€Ð¾ÑÐ°'), 'error');
            }
        }

        // Export functions
        function exportToPDF() {
            showNotification(getTranslation('PDF dÄ±ÅŸa aktarma Ã¶zelliÄŸi yakÄ±nda eklenecek', 'PDF export feature coming soon', 'Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ ÑÐºÑÐ¿Ð¾Ñ€Ñ‚Ð° PDF ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function exportToCSV() {
            const headers = ['SOF No', 'Talep Tarihi', 'Malzeme Tipi', 'Birim', 'Adet', 'Teslim Tarihi', 'Durum'];
            const csvContent = [
                headers.join(','),
                ...allRecords.map(record => [
                    record.sofNo,
                    record.requestDate,
                    record.materialType,
                    record.unit,
                    record.quantity,
                    record.deliveryDate,
                    record.status
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'malzeme_kayitlari.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(getTranslation('CSV dosyasÄ± indirildi', 'CSV file downloaded', 'CSV Ñ„Ð°Ð¹Ð» Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½'), 'success');
        }

        // Google Drive functions
        function connectDrive() {
            showNotification(getTranslation('Google Drive baÄŸlantÄ±sÄ± yakÄ±nda eklenecek', 'Google Drive connection coming soon', 'ÐŸÐ¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ðµ Google Drive ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function backupToDrive() {
            showNotification(getTranslation('Yedekleme Ã¶zelliÄŸi yakÄ±nda eklenecek', 'Backup feature coming soon', 'Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ð³Ð¾ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ñ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function restoreFromDrive() {
            showNotification(getTranslation('Geri yÃ¼kleme Ã¶zelliÄŸi yakÄ±nda eklenecek', 'Restore feature coming soon', 'Ð¤ÑƒÐ½ÐºÑ†Ð¸Ñ Ð²Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð»ÐµÐ½Ð¸Ñ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        // Settings functions
        function updateUserInfo() {
            const fullname = document.getElementById('user-fullname').value;
            const email = document.getElementById('user-email').value;
            
            currentUser.name = fullname;
            currentUser.email = email;
            
            document.getElementById('user-name').textContent = fullname;
            document.getElementById('user-avatar').textContent = fullname.charAt(0).toUpperCase();
            
            showNotification(getTranslation('KullanÄ±cÄ± bilgileri gÃ¼ncellendi', 'User information updated', 'Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ð¿Ð¾Ð»ÑŒÐ·Ð¾Ð²Ð°Ñ‚ÐµÐ»Ðµ Ð¾Ð±Ð½Ð¾Ð²Ð»ÐµÐ½Ð°'), 'success');
        }

        function changePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification(getTranslation('TÃ¼m alanlarÄ± doldurun', 'Fill all fields', 'Ð—Ð°Ð¿Ð¾Ð»Ð½Ð¸Ñ‚Ðµ Ð²ÑÐµ Ð¿Ð¾Ð»Ñ'), 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification(getTranslation('Yeni ÅŸifreler eÅŸleÅŸmiyor', 'New passwords do not match', 'ÐÐ¾Ð²Ñ‹Ðµ Ð¿Ð°Ñ€Ð¾Ð»Ð¸ Ð½Ðµ ÑÐ¾Ð²Ð¿Ð°Ð´Ð°ÑŽÑ‚'), 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showNotification(getTranslation('Åžifre en az 6 karakter olmalÄ±', 'Password must be at least 6 characters', 'ÐŸÐ°Ñ€Ð¾Ð»ÑŒ Ð´Ð¾Ð»Ð¶ÐµÐ½ ÑÐ¾Ð´ÐµÑ€Ð¶Ð°Ñ‚ÑŒ Ð¼Ð¸Ð½Ð¸Ð¼ÑƒÐ¼ 6 ÑÐ¸Ð¼Ð²Ð¾Ð»Ð¾Ð²'), 'error');
                return;
            }
            
            // Clear form
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            
            showNotification(getTranslation('Åžifre baÅŸarÄ±yla deÄŸiÅŸtirildi', 'Password changed successfully', 'ÐŸÐ°Ñ€Ð¾Ð»ÑŒ ÑƒÑÐ¿ÐµÑˆÐ½Ð¾ Ð¸Ð·Ð¼ÐµÐ½ÐµÐ½'), 'success');
        }

        // Record actions
        function viewRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydÄ± gÃ¶rÃ¼ntÃ¼leniyor`, `Viewing record ${record.sofNo}`, `ÐŸÑ€Ð¾ÑÐ¼Ð¾Ñ‚Ñ€ Ð·Ð°Ð¿Ð¸ÑÐ¸ ${record.sofNo}`), 'success');
            }
        }

        function editRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydÄ± dÃ¼zenleniyor`, `Editing record ${record.sofNo}`, `Ð ÐµÐ´Ð°ÐºÑ‚Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ Ð·Ð°Ð¿Ð¸ÑÐ¸ ${record.sofNo}`), 'success');
            }
        }

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 4000);
        }

        function logout() {
            isLoggedIn = false;
            
            // Hide session elements first
            hideSessionElements();
            
            setTimeout(() => {
                // Clear localStorage
                localStorage.removeItem('somtech_logged_in');
                localStorage.removeItem('somtech_user');
                
                // Show login overlay
                document.getElementById('login-overlay').classList.remove('hidden');
                
                // Blur dashboard
                document.querySelector('.dashboard-container').classList.add('blurred');
                
                // Clear login form
                document.getElementById('login-form').reset();
                
                // Reset to dashboard section
                resetToDefaultSection();
                
                showNotification(getTranslation('BaÅŸarÄ±yla Ã§Ä±kÄ±ÅŸ yapÄ±ldÄ±', 'Successfully logged out', 'Ð£ÑÐ¿ÐµÑˆÐ½Ñ‹Ð¹ Ð²Ñ‹Ñ…Ð¾Ð´ Ð¸Ð· ÑÐ¸ÑÑ‚ÐµÐ¼Ñ‹'), 'success');
            }, 500);
        }
        
        function resetToDefaultSection() {
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Activate dashboard nav item
            document.querySelector('.nav-item[onclick*="dashboard"]').classList.add('active');
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active', 'fade-out');
            });
            
            // Show dashboard section
            const dashboardSection = document.getElementById('dashboard-section');
            dashboardSection.classList.remove('hidden');
            dashboardSection.classList.add('active');
            
            // Reset page title
            document.getElementById('page-title').textContent = getTranslation('Ana Sayfa', 'Dashboard', 'ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ');
        }

        // Check login state on page load
        function checkLoginState() {
            const savedLoginState = localStorage.getItem('somtech_logged_in');
            const savedUser = localStorage.getItem('somtech_user');
            
            if (savedLoginState === 'true' && savedUser) {
                isLoggedIn = true;
                currentUser = JSON.parse(savedUser);
                
                // Hide login overlay
                document.getElementById('login-overlay').classList.add('hidden');
                
                // Remove blur from dashboard
                document.querySelector('.dashboard-container').classList.remove('blurred');
                
                // Show session elements
                setTimeout(() => {
                    showSessionElements();
                }, 500);
            } else {
                // Show login overlay and blur dashboard
                document.getElementById('login-overlay').classList.remove('hidden');
                document.querySelector('.dashboard-container').classList.add('blurred');
            }
        }

        // Modal functions
        function showSummaryModal() {
            updateDashboardStats();
            document.getElementById('summary-modal').classList.add('show');
        }

        function closeSummaryModal() {
            document.getElementById('summary-modal').classList.remove('show');
        }

        function showTrackingModal() {
            const trackingContent = document.getElementById('tracking-log-content');
            trackingContent.innerHTML = `
                <div class="request-list">
                    ${allRecords.map(request => `
                        <div class="request-item">
                            <div class="request-header">
                                <div class="request-id">${request.sofNo}</div>
                                <div class="request-date">${formatDate(request.requestDate)}</div>
                            </div>
                            <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${request.progress}%"></div>
                                </div>
                                <div class="progress-steps">
                                    <span class="progress-step ${request.progress >= 20 ? 'active' : ''}" data-tr="Talep Edildi" data-en="Requested" data-ru="Ð—Ð°Ð¿Ñ€Ð¾ÑˆÐµÐ½Ð¾">Talep Edildi</span>
                                    <span class="progress-step ${request.progress >= 40 ? 'active' : ''}" data-tr="Onay Bekliyor" data-en="Pending Approval" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ">Onay Bekliyor</span>
                                    <span class="progress-step ${request.progress >= 60 ? 'active' : ''}" data-tr="SatÄ±n Alma" data-en="Purchasing" data-ru="Ð—Ð°ÐºÑƒÐ¿ÐºÐ°">SatÄ±n Alma</span>
                                    <span class="progress-step ${request.progress >= 80 ? 'active' : ''}" data-tr="Ã–deme Bekliyor" data-en="Pending Payment" data-ru="ÐžÐ¶Ð¸Ð´Ð°ÐµÑ‚ Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹">Ã–deme Bekliyor</span>
                                    <span class="progress-step ${request.progress >= 100 ? 'active' : ''}" data-tr="TamamlandÄ±" data-en="Completed" data-ru="Ð—Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð¾">TamamlandÄ±</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            updateTranslations();
            document.getElementById('tracking-modal').classList.add('show');
        }

        function closeTrackingModal() {
            document.getElementById('tracking-modal').classList.remove('show');
        }

        function showRejectModal(requestId) {
            currentRejectId = requestId;
            document.getElementById('reject-reason').value = '';
            document.getElementById('reject-modal').classList.add('show');
        }

        function closeRejectModal() {
            currentRejectId = null;
            document.getElementById('reject-modal').classList.remove('show');
        }

        function showInvoiceModal(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            const invoiceContent = document.getElementById('invoice-content');
            
            invoiceContent.innerHTML = `
                <div style="border: 1px solid var(--border-light); border-radius: 8px; padding: 24px; background: var(--bg-light);">
                    <h3 style="margin: 0 0 16px 0; color: var(--text-dark);">Ã–n Fatura DetaylarÄ±</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                        <div><strong>SOF No:</strong> ${request.sofNo}</div>
                        <div><strong>Tarih:</strong> ${formatDate(request.requestDate)}</div>
                        <div><strong>Malzeme:</strong> ${request.materialType}</div>
                        <div><strong>Adet:</strong> ${request.quantity}</div>
                        <div><strong>Talep Eden:</strong> ${request.requester}</div>
                        <div><strong>Birim:</strong> ${request.unit}</div>
                    </div>
                    <div style="border-top: 1px solid var(--border-light); padding-top: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span><strong>Tahmini Tutar:</strong></span>
                            <span style="font-size: 18px; font-weight: 700; color: var(--primary-color);">â‚º${(Math.random() * 1000 + 100).toFixed(2)}</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('invoice-modal').classList.add('show');
        }

        function closeInvoiceModal() {
            document.getElementById('invoice-modal').classList.remove('show');
        }

        // Action functions
        async function approveRequest(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                request.status = 'purchasing';
                request.progress = 60;
                request.currentStep = 'purchasing';
                
                try {
                    const result = await window.dataSdk.update(request);
                    if (result.isOk) {
                        showNotification(getTranslation(`${request.sofNo} talebi onaylandÄ±`, `Request ${request.sofNo} approved`, `Ð—Ð°Ð¿Ñ€Ð¾Ñ ${request.sofNo} Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½`), 'success');
                        updateDashboardSections();
                    } else {
                        showNotification(getTranslation('Onaylama iÅŸlemi baÅŸarÄ±sÄ±z', 'Approval failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ'), 'error');
                    }
                } catch (error) {
                    console.error('Approve request error:', error);
                    showNotification(getTranslation('Onaylama iÅŸlemi baÅŸarÄ±sÄ±z', 'Approval failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ'), 'error');
                }
            }
        }

        async function confirmReject() {
            if (currentRejectId) {
                const request = allRecords.find(r => r.id === currentRejectId);
                const reason = document.getElementById('reject-reason').value;
                
                if (request) {
                    // Remove the request from records instead of marking as rejected
                    const index = allRecords.findIndex(r => r.id === currentRejectId);
                    if (index > -1) {
                        allRecords.splice(index, 1);
                    }
                    
                    try {
                        const result = await window.dataSdk.delete(request);
                        if (result.isOk) {
                            showNotification(getTranslation(`${request.sofNo} talebi reddedildi${reason ? ': ' + reason : ''}`, `Request ${request.sofNo} rejected${reason ? ': ' + reason : ''}`, `Ð—Ð°Ð¿Ñ€Ð¾Ñ ${request.sofNo} Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½${reason ? ': ' + reason : ''}`), 'success');
                            updateDashboardSections();
                        } else {
                            showNotification(getTranslation('Reddetme iÅŸlemi baÅŸarÄ±sÄ±z', 'Rejection failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ'), 'error');
                        }
                    } catch (error) {
                        console.error('Reject request error:', error);
                        showNotification(getTranslation('Reddetme iÅŸlemi baÅŸarÄ±sÄ±z', 'Rejection failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ñ‚ÐºÐ»Ð¾Ð½ÐµÐ½Ð¸Ñ'), 'error');
                    }
                }
                
                closeRejectModal();
            }
        }

        async function markPaymentComplete(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                request.status = 'approved';
                request.progress = 100;
                request.currentStep = 'completed';
                
                try {
                    const result = await window.dataSdk.update(request);
                    if (result.isOk) {
                        showNotification(getTranslation(`${request.sofNo} Ã¶demesi tamamlandÄ±. Talep sahibine bildirim gÃ¶nderildi.`, `Payment for ${request.sofNo} completed. Notification sent to requester.`, `ÐŸÐ»Ð°Ñ‚ÐµÐ¶ Ð¿Ð¾ ${request.sofNo} Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½. Ð£Ð²ÐµÐ´Ð¾Ð¼Ð»ÐµÐ½Ð¸Ðµ Ð¾Ñ‚Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¾ Ð·Ð°ÑÐ²Ð¸Ñ‚ÐµÐ»ÑŽ.`), 'success');
                        updateDashboardSections();
                    } else {
                        showNotification(getTranslation('Ã–deme iÅŸlemi baÅŸarÄ±sÄ±z', 'Payment processing failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°'), 'error');
                    }
                } catch (error) {
                    console.error('Payment complete error:', error);
                    showNotification(getTranslation('Ã–deme iÅŸlemi baÅŸarÄ±sÄ±z', 'Payment processing failed', 'ÐžÑˆÐ¸Ð±ÐºÐ° Ð¾Ð±Ñ€Ð°Ð±Ð¾Ñ‚ÐºÐ¸ Ð¿Ð»Ð°Ñ‚ÐµÐ¶Ð°'), 'error');
                }
            }
        }

        // View all functions
        function showAllMyRequests() {
            showNotification(getTranslation('TÃ¼m taleplerim sayfasÄ± yakÄ±nda eklenecek', 'All my requests page coming soon', 'Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð²ÑÐµÑ… Ð¼Ð¾Ð¸Ñ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function showAllPendingApprovals() {
            showNotification(getTranslation('TÃ¼m onay bekleyen talepler sayfasÄ± yakÄ±nda eklenecek', 'All pending approvals page coming soon', 'Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð²ÑÐµÑ… Ð¾Ð¶Ð¸Ð´Ð°ÑŽÑ‰Ð¸Ñ… Ð¾Ð´Ð¾Ð±Ñ€ÐµÐ½Ð¸Ñ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function showAllPendingPayments() {
            showNotification(getTranslation('TÃ¼m Ã¶deme bekleyen talepler sayfasÄ± yakÄ±nda eklenecek', 'All pending payments page coming soon', 'Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð²ÑÐµÑ… Ð¾Ð¶Ð¸Ð´Ð°ÑŽÑ‰Ð¸Ñ… Ð¾Ð¿Ð»Ð°Ñ‚Ñ‹ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        function showAllPurchasing() {
            showNotification(getTranslation('TÃ¼m satÄ±n alma talepleri sayfasÄ± yakÄ±nda eklenecek', 'All purchasing requests page coming soon', 'Ð¡Ñ‚Ñ€Ð°Ð½Ð¸Ñ†Ð° Ð²ÑÐµÑ… Ð·Ð°Ð¿Ñ€Ð¾ÑÐ¾Ð² Ð½Ð° Ð·Ð°ÐºÑƒÐ¿ÐºÑƒ ÑÐºÐ¾Ñ€Ð¾ Ð¿Ð¾ÑÐ²Ð¸Ñ‚ÑÑ'), 'success');
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                if (event.target.id === 'summary-modal') closeSummaryModal();
                if (event.target.id === 'tracking-modal') closeTrackingModal();
                if (event.target.id === 'reject-modal') closeRejectModal();
                if (event.target.id === 'invoice-modal') closeInvoiceModal();
            }
        });

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', async function() {
            // Check login state first
            checkLoginState();
            
            // Set up login form handler
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            // Initialize Data SDK
            try {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error('Data SDK initialization failed');
                }
            } catch (error) {
                console.error('Data SDK error:', error);
                // Use sample data if SDK fails
                allRecords = sampleRecords;
                updateDashboardStats();
                updateRecordsTable();
                updateChart();
            }
            
            // Detect and set browser language
            const detectedLang = detectBrowserLanguage();
            setLanguage(detectedLang);
            
            // Set up form handlers
            document.getElementById('new-request-form').addEventListener('submit', createNewRequest);
            
            // Set up responsive sidebar
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    document.getElementById('sidebar').classList.remove('mobile-open');
                }
            });
            
            // User info will be updated by showSessionElements() if logged in
            
            console.log('SOMTECH_SOF v2.0.0 Dashboard initialized');
            showNotification(getTranslation('Dashboard yÃ¼klendi', 'Dashboard loaded', 'ÐŸÐ°Ð½ÐµÐ»ÑŒ ÑƒÐ¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ñ Ð·Ð°Ð³Ñ€ÑƒÐ¶ÐµÐ½Ð°'), 'success');
        });

        // Element SDK implementation
        const element = {
            defaultConfig: defaultConfig,
            
            onConfigChange: async (config) => {
                // Update company name
                const companyElement = document.getElementById('company-name');
                if (companyElement) {
                    companyElement.textContent = config.company_name || defaultConfig.company_name;
                }
                
                // Update system version
                const versionElement = document.getElementById('system-version');
                if (versionElement) {
                    versionElement.textContent = config.system_version || defaultConfig.system_version;
                }
            },
            
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            
            mapToEditPanelValues: (config) => new Map([
                ["company_name", config.company_name || defaultConfig.company_name],
                ["system_version", config.system_version || defaultConfig.system_version],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
            ])
        };

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init(element);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'994a2f0461e0e116',t:'MTc2MTQ4NDEyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
