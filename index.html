<!doctype html>
<html lang="tr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOMTECH_SOF v2.0.0 - Ana Panel</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #2459a0;
            --accent-color: #cf2e26;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --border-light: #e2e8f0;
            --shadow-light: rgba(36, 89, 160, 0.1);
            --sidebar-width: 280px;
        }
        
        .dark-theme {
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --text-dark: #f1f5f9;
            --text-gray: #94a3b8;
            --border-light: #334155;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            transition: all 0.3s ease;
            min-height: 100%;
        }
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-white);
            border-right: 1px solid var(--border-light);
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            overflow-y: auto;
            opacity: 1;
        }
        
        .sidebar.inactive {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .sidebar.activate {
            opacity: 1;
            pointer-events: auto;
            transform: translateX(0);
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-light);
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }
        
        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .sidebar.collapsed .logo-icon {
            margin-right: 0;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .nav-menu {
            padding: 24px 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 24px;
            color: var(--text-gray);
            text-decoration: none;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            cursor: pointer;
            border: none;
            background: #f0f0f0;
            width: 100%;
            text-align: left;
            margin: 4px 8px;
            border-radius: 12px;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transform: scaleY(0);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            border-radius: 0 2px 2px 0;
        }
        
        .nav-item:hover {
            background: rgba(36, 89, 160, 0.08);
            color: var(--primary-color);
            transform: translateX(4px);
            box-shadow: 0 4px 12px rgba(36, 89, 160, 0.15);
        }
        
        .nav-item:hover::before {
            transform: scaleY(1);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, var(--primary-color), rgba(36, 89, 160, 0.9));
            color: white;
            font-weight: 600;
            transform: translateX(0);
            box-shadow: 0 6px 20px rgba(36, 89, 160, 0.3);
        }
        
        .nav-item.active::before {
            transform: scaleY(1);
            background: rgba(255, 255, 255, 0.3);
            width: 100%;
        }
        
        .nav-item.active .nav-icon {
            color: white;
            transform: scale(1.1);
        }
        
        .nav-item.active .nav-text {
            color: white;
        }
        
        .nav-icon {
            width: 24px;
            height: 24px;
            margin-right: 16px;
            transition: margin 0.3s ease;
        }
        
        .sidebar.collapsed .nav-icon {
            margin-right: 0;
        }
        
        .nav-text {
            font-weight: 500;
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .language-selector {
            position: absolute;
            bottom: 24px;
            left: 24px;
            right: 24px;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .lang-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            transition: margin-left 0.3s ease;
        }
        
        .sidebar.collapsed + .main-content {
            margin-left: 80px;
        }
        
        /* Header */
        .header {
            background: var(--bg-white);
            border-bottom: 1px solid var(--border-light);
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
        }
        
        .header.inactive {
            opacity: 0.3;
            pointer-events: none;
        }
        
        .header.activate {
            opacity: 1;
            pointer-events: auto;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            margin-right: 16px;
            transition: all 0.3s ease;
        }
        
        .menu-toggle:hover {
            background: var(--bg-light);
            color: var(--primary-color);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            transition: opacity 0.3s ease;
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .welcome-message {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(36, 89, 160, 0.1), rgba(36, 89, 160, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(36, 89, 160, 0.2);
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .welcome-message.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .welcome-icon {
            width: 20px;
            height: 20px;
            color: var(--primary-color);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: var(--bg-light);
            border-radius: 12px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .user-info.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .user-role {
            font-size: 12px;
            color: var(--text-gray);
        }
        
        .theme-toggle, .logout-btn {
            padding: 10px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(20px);
        }
        
        .theme-toggle.show, .logout-btn.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .theme-toggle:hover, .logout-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(36, 89, 160, 0.3);
        }
        
        .logout-btn {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
            border-color: var(--accent-color);
        }
        
        .logout-btn:hover {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }
        
        /* Content Area */
        .content-area {
            padding: 32px;
        }
        
        /* Section Headers */
        .summary-header, .section-header {
            margin-bottom: 32px;
        }
        
        .section-title {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0 0 8px 0;
        }
        
        .section-subtitle {
            font-size: 16px;
            color: var(--text-gray);
            margin: 0;
            line-height: 1.5;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            flex-wrap: wrap;
            gap: 16px;
        }
        
        .section-actions {
            display: flex;
            gap: 12px;
            align-items: center;
        }
        
        /* Status Cards */
        .status-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 40px;
        }
        
        .status-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
            display: flex;
            align-items: center;
            gap: 20px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }
        
        .status-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--primary-color), #1e40af);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }
        
        .status-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px rgba(36, 89, 160, 0.15);
        }
        
        .status-card:hover::before {
            transform: scaleX(1);
        }
        
        .card-icon {
            width: 60px;
            height: 60px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            flex-shrink: 0;
        }
        
        .card-icon.total {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .card-icon.approved {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .card-icon.pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .card-icon.processing {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
        }
        
        .card-content {
            flex: 1;
        }
        
        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        /* Recent Activities */
        .recent-activities {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .activity-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-light);
        }
        
        .activity-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .activity-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }
        
        /* Requests Table */
        .requests-table-container {
            background: var(--bg-white);
            border-radius: 16px;
            border: 1px solid var(--border-light);
            overflow: hidden;
        }
        
        .requests-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .requests-table th {
            background: var(--bg-light);
            padding: 16px 20px;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
        }
        
        .requests-table td {
            padding: 16px 20px;
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
            color: var(--text-dark);
        }
        
        .requests-table tr:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .requests-table tr:last-child td {
            border-bottom: none;
        }
        
        /* Progress Bar in Table */
        .progress-bar-small {
            width: 100px;
            height: 6px;
            background: var(--border-light);
            border-radius: 3px;
            overflow: hidden;
        }
        
        .progress-fill-small {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #1e40af);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        /* Purchasing Grid */
        .purchasing-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 24px;
        }
        
        .purchasing-card {
            background: var(--bg-white);
            border-radius: 16px;
            border: 1px solid var(--border-light);
            overflow: hidden;
        }
        
        .card-header {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .card-title {
            font-size: 16px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .card-badge {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }
        
        .purchasing-list {
            max-height: 400px;
            overflow-y: auto;
        }
        
        /* Payments Container */
        .payments-container {
            background: var(--bg-white);
            border-radius: 16px;
            border: 1px solid var(--border-light);
            overflow: hidden;
        }
        
        .payments-filters {
            padding: 20px 24px;
            border-bottom: 1px solid var(--border-light);
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
        }
        
        .payments-list {
            max-height: 600px;
            overflow-y: auto;
        }
        
        /* Log Stats */
        .log-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .log-filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .log-container {
            background: var(--bg-white);
            border-radius: 12px;
            border: 1px solid var(--border-light);
            max-height: 600px;
            overflow-y: auto;
            margin-bottom: 16px;
        }
        
        .log-pagination {
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        /* Dashboard Grid */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 24px;
        }
        
        .dashboard-section-card {
            background: var(--bg-white);
            border-radius: 12px;
            border: 1px solid var(--border-light);
            overflow: hidden;
            transition: all 0.3s ease;
        }
        
        .dashboard-section-card:hover {
            box-shadow: 0 8px 32px rgba(36, 89, 160, 0.1);
        }
        
        .section-header {
            padding: 24px 24px 16px;
            border-bottom: 1px solid var(--border-light);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .section-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .section-badge {
            background: var(--primary-color);
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            min-width: 24px;
            text-align: center;
        }
        
        .notification-badge {
            background: var(--accent-color);
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
        
        .section-footer {
            padding: 16px 24px;
            border-top: 1px solid var(--border-light);
            text-align: center;
        }
        
        .view-all-btn {
            background: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .view-all-btn:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        /* Request Lists */
        .request-list, .approval-list, .payment-list, .purchasing-list {
            max-height: 300px;
            overflow-y: auto;
        }
        
        .request-item {
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.3s ease;
        }
        
        .request-item:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .request-item:last-child {
            border-bottom: none;
        }
        
        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }
        
        .request-id {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .request-date {
            font-size: 12px;
            color: var(--text-gray);
        }
        
        .request-description {
            font-size: 14px;
            color: var(--text-gray);
            margin-bottom: 12px;
            line-height: 1.4;
        }
        
        /* Progress Bar */
        .progress-container {
            margin-bottom: 12px;
        }
        
        .progress-bar {
            width: 100%;
            height: 6px;
            background: var(--border-light);
            border-radius: 3px;
            overflow: hidden;
            margin-bottom: 8px;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary-color), #1e40af);
            border-radius: 3px;
            transition: width 0.3s ease;
        }
        
        .progress-steps {
            display: flex;
            justify-content: space-between;
            font-size: 10px;
            color: var(--text-gray);
        }
        
        .progress-step {
            font-weight: 500;
        }
        
        .progress-step.active {
            color: var(--primary-color);
            font-weight: 600;
        }
        
        /* Action Buttons */
        .action-buttons {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }
        
        .btn-approve {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-approve:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
        }
        
        .btn-reject {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-reject:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }
        
        .btn-payment {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-payment:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(245, 158, 11, 0.3);
        }
        
        .btn-invoice {
            background: transparent;
            color: var(--primary-color);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 8px 16px;
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-invoice:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 16px;
        }
        
        .card-icon.total {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .card-icon.approved {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .card-icon.pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .card-icon.rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        /* System Overview */
        .system-overview {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 32px;
            margin-bottom: 32px;
        }
        
        .overview-cards {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .overview-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 24px;
        }
        
        .mini-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .mini-card {
            padding: 16px;
            background: var(--bg-light);
            border-radius: 12px;
            text-align: center;
        }
        
        .mini-card-title {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .mini-card-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .chart-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        /* Table Section */
        .table-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .table-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .export-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn-export {
            padding: 10px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-export:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .filter-input, .filter-select {
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 24px;
        }
        
        .data-table th {
            background: var(--bg-light);
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
        }
        
        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
            color: var(--text-dark);
        }
        
        .data-table tr:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }
        
        .status-approved {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .status-rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .page-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn:hover, .page-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Google Drive Section */
        .drive-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
            text-align: center;
        }
        
        .drive-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #4285f4, #34a853);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
        
        .drive-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .drive-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .btn-drive {
            padding: 12px 20px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-drive:hover {
            background: #4285f4;
            color: white;
            border-color: #4285f4;
        }
        
        .drive-note {
            font-size: 12px;
            color: var(--text-gray);
            font-style: italic;
        }
        
        /* Settings Section */
        .settings-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .settings-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        /* Modal Styles */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            backdrop-filter: blur(8px);
            z-index: 10000;
            display: flex;
            align-items: center;
            justify-content: center;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }
        
        .modal-overlay.show {
            opacity: 1;
            visibility: visible;
        }
        
        .modal-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 32px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.9) translateY(20px);
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        }
        
        .modal-overlay.show .modal-container {
            transform: scale(1) translateY(0);
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-light);
        }
        
        .modal-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .modal-close:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }
        
        .modal-content {
            color: var(--text-dark);
            line-height: 1.6;
        }
        
        .reject-form {
            margin-top: 16px;
        }
        
        .reject-textarea {
            width: 100%;
            min-height: 100px;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            font-family: inherit;
            font-size: 14px;
            color: var(--text-dark);
            background: var(--bg-white);
            resize: vertical;
            transition: all 0.3s ease;
        }
        
        .reject-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .modal-buttons {
            display: flex;
            gap: 12px;
            margin-top: 24px;
            justify-content: flex-end;
        }
        
        .btn-modal-primary {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        .btn-modal-secondary {
            background: transparent;
            color: var(--text-gray);
            border: 1px solid var(--border-light);
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-modal-secondary:hover {
            background: var(--bg-light);
            color: var(--text-dark);
        }
        
        /* New Request Form Styles */
        .new-request-container {
            background: #0f1117;
            border-radius: 12px;
            padding: 32px;
            color: #e2e8f0;
            min-height: 80vh;
        }
        
        .new-request-header {
            margin-bottom: 32px;
            text-align: center;
        }
        
        .new-request-title {
            font-size: 28px;
            font-weight: 700;
            color: #00bcd4;
            margin: 0;
        }
        
        .new-request-form {
            display: flex;
            flex-direction: column;
            gap: 32px;
        }
        
        .form-columns {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 32px;
        }
        
        .form-column {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .new-request-form .form-group {
            margin-bottom: 0;
        }
        
        .new-request-form .form-label {
            color: #cbd5e1;
            font-weight: 600;
            margin-bottom: 8px;
            display: block;
        }
        
        .new-request-form .form-input {
            background: #1e293b;
            border: 1px solid #334155;
            color: #e2e8f0;
            border-radius: 8px;
            padding: 12px 16px;
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .new-request-form .form-input:focus {
            outline: none;
            border-color: #00bcd4;
            box-shadow: 0 0 0 3px rgba(0, 188, 212, 0.1);
            background: #2d3748;
        }
        
        .new-request-form .form-input::placeholder {
            color: #64748b;
        }
        
        .request-table-section {
            margin-top: 24px;
        }
        
        .table-title {
            font-size: 20px;
            font-weight: 700;
            color: #00bcd4;
            margin-bottom: 16px;
        }
        
        .request-table-container {
            background: #1e293b;
            border-radius: 8px;
            overflow: hidden;
            border: 1px solid #334155;
        }
        
        .request-preview-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .request-preview-table th {
            background: #334155;
            color: #cbd5e1;
            padding: 12px 16px;
            text-align: left;
            font-weight: 600;
            font-size: 14px;
            border-bottom: 1px solid #475569;
        }
        
        .request-preview-table td {
            padding: 12px 16px;
            border-bottom: 1px solid #334155;
            color: #e2e8f0;
            font-size: 14px;
        }
        
        .request-preview-table tr:last-child td {
            border-bottom: none;
        }
        
        .empty-preview {
            text-align: center;
            color: #64748b;
            font-style: italic;
            padding: 24px !important;
        }
        
        .form-actions {
            display: flex;
            gap: 16px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 24px;
        }
        
        .btn-add-row {
            background: #6c63ff;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-add-row:hover {
            background: #5a52d5;
            transform: translateY(-2px);
        }
        
        .btn-remove-row {
            background: #64748b;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-remove-row:hover {
            background: #475569;
            transform: translateY(-2px);
        }
        
        .btn-save-request {
            background: #2459a0;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 32px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-save-request:hover {
            background: #1e40af;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(36, 89, 160, 0.3);
        }
        
        .btn-close-form {
            background: #cf2e26;
            color: white;
            border: none;
            border-radius: 8px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-close-form:hover {
            background: #b91c1c;
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-gray);
        }
        
        .empty-state-icon {
            width: 64px;
            height: 64px;
            background: var(--bg-light);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
            color: var(--text-gray);
        }
        
        .empty-state-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .empty-state-description {
            font-size: 14px;
            color: var(--text-gray);
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            
            .summary-cards {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                z-index: 2000;
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .sidebar.mobile-collapsed {
                width: 70px;
                transform: translateX(0);
            }
            
            .sidebar.mobile-collapsed .nav-text {
                display: none;
            }
            
            .sidebar.mobile-collapsed .nav-icon {
                margin-right: 0;
                justify-self: center;
            }
            
            .sidebar.mobile-collapsed .logo-text {
                display: none;
            }
            
            .sidebar.mobile-collapsed .language-selector {
                display: none;
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .main-content.mobile-collapsed {
                margin-left: 70px;
            }
            
            .content-area {
                padding: 16px;
            }
            
            .status-cards {
                grid-template-columns: 1fr;
            }
            
            .filters {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 16px;
            }
            
            .user-details {
                display: none;
            }
            
            .nav-item {
                margin: 2px 4px;
                padding: 12px 16px;
            }
            
            .nav-item.mobile-collapsed {
                padding: 12px;
                justify-content: center;
            }
        }
        
        @media (max-width: 480px) {
            .sidebar {
                width: 100%;
            }
            
            .sidebar.mobile-open {
                position: fixed;
                height: 100vh;
                background: rgba(0, 0, 0, 0.95);
                backdrop-filter: blur(10px);
            }
            
            .sidebar-header {
                background: var(--bg-white);
                margin: 20px;
                border-radius: 16px;
            }
            
            .nav-menu {
                background: var(--bg-white);
                margin: 0 20px 20px 20px;
                border-radius: 16px;
                padding: 16px 0;
            }
            
            .language-selector {
                background: var(--bg-white);
                margin: 0 20px 20px 20px;
                border-radius: 16px;
                padding: 16px;
                position: relative;
                bottom: auto;
                left: auto;
                right: auto;
            }
        }
        
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Log Entry Styles */
        .log-entries {
            padding: 0;
        }
        
        .log-entry {
            display: flex;
            align-items: flex-start;
            padding: 16px 24px;
            border-bottom: 1px solid var(--border-light);
            transition: all 0.3s ease;
            position: relative;
        }
        
        .log-entry:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .log-entry:last-child {
            border-bottom: none;
        }
        
        .log-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 16px;
            flex-shrink: 0;
            font-size: 18px;
        }
        
        .log-icon.login {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .log-icon.request {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
        }
        
        .log-icon.approval {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .log-icon.payment {
            background: linear-gradient(135deg, #8b5cf6, #7c3aed);
            color: white;
        }
        
        .log-icon.system {
            background: linear-gradient(135deg, #6b7280, #4b5563);
            color: white;
        }
        
        .log-icon.error {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
        }
        
        .log-content {
            flex: 1;
            min-width: 0;
        }
        
        .log-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        
        .log-title {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
            margin: 0;
        }
        
        .log-time {
            font-size: 12px;
            color: var(--text-gray);
            white-space: nowrap;
            margin-left: 16px;
        }
        
        .log-description {
            font-size: 13px;
            color: var(--text-gray);
            line-height: 1.4;
            margin-bottom: 8px;
        }
        
        .log-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            font-size: 12px;
        }
        
        .log-user {
            color: var(--primary-color);
            font-weight: 500;
        }
        
        .log-status {
            padding: 2px 8px;
            border-radius: 12px;
            font-weight: 500;
            font-size: 11px;
        }
        
        .log-status.success {
            background: rgba(16, 185, 129, 0.1);
            color: #059669;
        }
        
        .log-status.warning {
            background: rgba(245, 158, 11, 0.1);
            color: #d97706;
        }
        
        .log-status.error {
            background: rgba(239, 68, 68, 0.1);
            color: #dc2626;
        }
        
        .log-status.info {
            background: rgba(36, 89, 160, 0.1);
            color: var(--primary-color);
        }
        
        /* Log Animation Styles */
        .log-fade-transition {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .log-fade-out {
            opacity: 0;
            transform: translateY(-20px);
        }
        
        .log-fade-in {
            opacity: 1;
            transform: translateY(0);
            display: block !important;
        }
        
        /* Section Transitions */
        .section {
            opacity: 1;
            transform: translateY(0);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section.hidden {
            display: none;
        }
        
        .section.active {
            opacity: 1;
            transform: translateY(0);
            display: block;
        }
        
        .section.fade-out {
            opacity: 0;
            transform: translateY(-10px);
        }
        
        .section.fade-in {
            opacity: 1;
            transform: translateY(0);
        }
        
        /* Menu Active States */
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .nav-item.active::before {
            transform: translateX(0);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(36, 89, 160, 0.1), transparent);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .nav-item:not(.active):hover {
            background: rgba(36, 89, 160, 0.05);
            color: var(--primary-color);
        }
        
        /* Login Overlay Styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 1;
            visibility: visible;
        }
        
        .login-overlay.slide-up {
            transform: translateY(-100%);
            opacity: 0;
        }
        
        .login-overlay.hidden {
            opacity: 0;
            visibility: hidden;
            transform: translateY(-100%);
        }
        
        .login-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 48px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 450px;
            transform: scale(0.9);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .login-overlay:not(.hidden) .login-container {
            transform: scale(1);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .login-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }
        
        .login-logo .logo-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        
        .login-title h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0 0 8px 0;
        }
        
        .login-title p {
            font-size: 14px;
            color: var(--text-gray);
            margin: 0;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .login-buttons {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }
        
        .btn-login {
            flex: 1;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.4);
        }
        
        .btn-register {
            flex: 1;
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-register:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .login-footer {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border-light);
        }
        
        .login-footer p {
            font-size: 12px;
            color: var(--text-gray);
            margin: 0;
            font-style: italic;
        }
        
        /* Dashboard blur effect when not logged in */
        .dashboard-container {
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .dashboard-container.blurred {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
            opacity: 0.7;
        }
        
        .dashboard-container.unblur {
            filter: blur(0px);
            pointer-events: auto;
            user-select: auto;
            opacity: 1;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body><!-- Sidebar -->
  <div id="sidebar" class="sidebar">
   <div class="sidebar-header">
    <div class="logo-container">
     <div class="logo-icon">
      <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
      </svg>
     </div>
     <div class="logo-text">
      <div id="company-name">
       SOMTECH
      </div>
      <div style="font-size: 12px; color: var(--text-gray);" id="system-version">
       v2.0.0
      </div>
     </div>
    </div>
   </div>
   <nav class="nav-menu"><button class="nav-item active" onclick="showSection('summary')" data-tr="Özet" data-en="Summary" data-ru="Сводка">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
     </svg><span class="nav-text">Özet</span> </button> <button class="nav-item" onclick="showSection('my-requests')" data-tr="Taleplerim" data-en="My Requests" data-ru="Мои запросы">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
     </svg><span class="nav-text">Taleplerim</span> </button> <button class="nav-item" onclick="showSection('purchasing')" data-tr="Satın Alma" data-en="Purchasing" data-ru="Закупки">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
     </svg><span class="nav-text">Satın Alma</span> </button> <button class="nav-item" onclick="showSection('pending-payments')" data-tr="Ödeme Bekleyen" data-en="Pending Payments" data-ru="Ожидающие оплаты">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
     </svg><span class="nav-text">Ödeme Bekleyen</span> </button> <button class="nav-item" onclick="showSection('pending-approvals')" data-tr="Onay Bekleyen" data-en="Pending Approvals" data-ru="Ожидающие одобрения">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
     </svg><span class="nav-text">Onay Bekleyen</span> </button> <button class="nav-item" onclick="showSection('activity-log')" data-tr="Log" data-en="Log" data-ru="Журнал">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
     </svg><span class="nav-text">Log</span> </button> <button class="nav-item" onclick="showSection('settings')" data-tr="Ayarlar" data-en="Settings" data-ru="Настройки">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
     </svg><span class="nav-text">Ayarlar</span> </button>
   </nav>
   <div class="language-selector"><button class="lang-btn active" onclick="setLanguage('tr')">TR</button> <button class="lang-btn" onclick="setLanguage('en')">EN</button> <button class="lang-btn" onclick="setLanguage('ru')">RU</button>
   </div>
  </div><!-- Main Content -->
  <div class="main-content"><!-- Header -->
   <header class="header">
    <div class="header-left"><button class="menu-toggle" onclick="toggleSidebar()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg></button>
     <h1 id="page-title" class="page-title" data-tr="Ana Panel" data-en="Dashboard" data-ru="Панель управления">Ana Panel</h1>
    </div>
    <div class="header-right">
     <div id="welcome-message" class="welcome-message">
      <svg class="welcome-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg><span id="welcome-text">Hoş geldiniz</span>
     </div>
     <div id="user-info" class="user-info">
      <div class="user-avatar" id="user-avatar">
       O
      </div>
      <div class="user-details">
       <div class="user-name" id="user-name">
        Oğuzhan Kaya
       </div>
       <div class="user-role" id="user-role">
        Satın Alma
       </div>
      </div>
     </div><button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="Tema Değiştir">
      <svg id="theme-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg></button> <button id="logout-btn" class="logout-btn" onclick="logout()" title="Çıkış Yap"> 🔒 </button>
    </div>
   </header><!-- Content Area -->
   <div class="content-area"><!-- Summary Section -->
    <div id="summary-section" class="section active">
     <div class="summary-header">
      <h2 class="section-title" data-tr="Sistem Özeti" data-en="System Summary" data-ru="Сводка системы">Sistem Özeti</h2>
      <p class="section-subtitle" data-tr="Genel durum kartları ve son aktiviteler" data-en="General status cards and recent activities" data-ru="Общие карты статуса и последние активности">Genel durum kartları ve son aktiviteler</p>
     </div><!-- Status Cards -->
     <div class="status-cards">
      <div class="status-card total">
       <div class="card-icon total">
        📊
       </div>
       <div class="card-content">
        <div class="card-title" data-tr="Toplam Talepler" data-en="Total Requests" data-ru="Всего запросов">
         Toplam Talepler
        </div>
        <div class="card-value" id="total-requests">
         0
        </div>
       </div>
      </div>
      <div class="status-card approved">
       <div class="card-icon approved">
        ✅
       </div>
       <div class="card-content">
        <div class="card-title" data-tr="Onaylanan" data-en="Approved" data-ru="Одобрено">
         Onaylanan
        </div>
        <div class="card-value" id="approved-requests">
         0
        </div>
       </div>
      </div>
      <div class="status-card pending">
       <div class="card-icon pending">
        ⏳
       </div>
       <div class="card-content">
        <div class="card-title" data-tr="Bekleyen" data-en="Pending" data-ru="В ожидании">
         Bekleyen
        </div>
        <div class="card-value" id="pending-requests">
         0
        </div>
       </div>
      </div>
      <div class="status-card processing">
       <div class="card-icon processing">
        🔄
       </div>
       <div class="card-content">
        <div class="card-title" data-tr="İşlemde" data-en="Processing" data-ru="В процессе">
         İşlemde
        </div>
        <div class="card-value" id="processing-requests">
         0
        </div>
       </div>
      </div>
     </div><!-- Recent Activities -->
     <div class="recent-activities">
      <div class="activity-header">
       <h3 class="activity-title" data-tr="Son 3 Aktivite" data-en="Last 3 Activities" data-ru="Последние 3 активности">Son 3 Aktivite</h3><button class="view-all-btn" onclick="showSection('activity-log')" data-tr="Tümünü Görüntüle" data-en="View All" data-ru="Просмотреть все">Tümünü Görüntüle</button>
      </div>
      <div id="recent-activities-list" class="activity-list"><!-- Recent activities will be loaded here -->
      </div>
     </div>
    </div><!-- My Requests Section -->
    <div id="my-requests-section" class="section hidden">
     <div class="section-header">
      <h2 class="section-title" data-tr="Taleplerim" data-en="My Requests" data-ru="Мои запросы">Taleplerim</h2>
      <div class="section-actions"><button class="btn-primary" onclick="showNewRequestForm()" data-tr="Yeni Talep Oluştur" data-en="Create New Request" data-ru="Создать новый запрос">+ Yeni Talep Oluştur</button>
      </div>
     </div>
     <div class="requests-table-container">
      <table class="requests-table">
       <thead>
        <tr>
         <th data-tr="Talep No" data-en="Request No" data-ru="Номер запроса">Talep No</th>
         <th data-tr="Malzeme Adı" data-en="Material Name" data-ru="Название материала">Malzeme Adı</th>
         <th data-tr="Tür" data-en="Type" data-ru="Тип">Tür</th>
         <th data-tr="Birim" data-en="Unit" data-ru="Единица">Birim</th>
         <th data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</th>
         <th data-tr="Termin" data-en="Deadline" data-ru="Срок">Termin</th>
         <th data-tr="Durum" data-en="Status" data-ru="Статус">Durum</th>
        </tr>
       </thead>
       <tbody id="my-requests-table-body"><!-- My requests will be loaded here -->
       </tbody>
      </table>
     </div>
    </div><!-- Purchasing Section -->
    <div id="purchasing-section" class="section hidden">
     <div class="section-header">
      <h2 class="section-title" data-tr="Satın Alma Yönetimi" data-en="Purchasing Management" data-ru="Управление закупками">Satın Alma Yönetimi</h2>
      <p class="section-subtitle" data-tr="Teklif giriş ve ön fatura işlemleri" data-en="Quote entry and invoice operations" data-ru="Ввод предложений и операции с счетами">Teklif giriş ve ön fatura işlemleri</p>
     </div>
     <div class="purchasing-grid">
      <div class="purchasing-card">
       <div class="card-header">
        <h3 class="card-title" data-tr="Teklif Bekleyen Talepler" data-en="Requests Awaiting Quote" data-ru="Запросы, ожидающие предложения">Teklif Bekleyen Talepler</h3><span class="card-badge" id="quote-pending-count">0</span>
       </div>
       <div id="quote-pending-list" class="purchasing-list"><!-- Quote pending items will be loaded here -->
       </div>
      </div>
      <div class="purchasing-card">
       <div class="card-header">
        <h3 class="card-title" data-tr="Ön Fatura Hazır" data-en="Invoice Ready" data-ru="Счет готов">Ön Fatura Hazır</h3><span class="card-badge" id="invoice-ready-count">0</span>
       </div>
       <div id="invoice-ready-list" class="purchasing-list"><!-- Invoice ready items will be loaded here -->
       </div>
      </div>
     </div>
    </div><!-- Pending Approvals Section -->
    <div id="pending-approvals-section" class="section hidden">
     <div class="section-header">
      <h2 class="section-title" data-tr="Onay Bekleyen Talepler" data-en="Pending Approval Requests" data-ru="Запросы, ожидающие одобрения">Onay Bekleyen Talepler</h2>
      <p class="section-subtitle" data-tr="Onayınızı bekleyen talepler" data-en="Requests awaiting your approval" data-ru="Запросы, ожидающие вашего одобрения">Onayınızı bekleyen talepler</p>
     </div>
     <div class="requests-table-container">
      <table class="requests-table">
       <thead>
        <tr>
         <th data-tr="Talep No" data-en="Request No" data-ru="Номер запроса">Talep No</th>
         <th data-tr="Talep Eden" data-en="Requester" data-ru="Заявитель">Talep Eden</th>
         <th data-tr="Malzeme Adı" data-en="Material Name" data-ru="Название материала">Malzeme Adı</th>
         <th data-tr="Tür" data-en="Type" data-ru="Тип">Tür</th>
         <th data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</th>
         <th data-tr="Termin" data-en="Deadline" data-ru="Срок">Termin</th>
         <th data-tr="İşlemler" data-en="Actions" data-ru="Действия">İşlemler</th>
        </tr>
       </thead>
       <tbody id="pending-approvals-table-body"><!-- Pending approvals will be loaded here -->
       </tbody>
      </table>
     </div>
    </div><!-- Pending Payments Section -->
    <div id="pending-payments-section" class="section hidden">
     <div class="section-header">
      <h2 class="section-title" data-tr="Ödeme Bekleyen Talepler" data-en="Pending Payment Requests" data-ru="Запросы, ожидающие оплаты">Ödeme Bekleyen Talepler</h2>
      <p class="section-subtitle" data-tr="Muhasebe onay ekranı ve ödeme işlemleri" data-en="Accounting approval screen and payment operations" data-ru="Экран одобрения бухгалтерии и операции оплаты">Muhasebe onay ekranı ve ödeme işlemleri</p>
     </div>
     <div class="payments-container">
      <div class="payments-filters">
       <div class="filter-group"><label class="filter-label" data-tr="Tutar Aralığı" data-en="Amount Range" data-ru="Диапазон суммы">Tutar Aralığı</label> <select class="filter-select" id="amount-filter"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="0-1000" data-tr="0 - 1.000 ₺" data-en="0 - 1,000 ₺" data-ru="0 - 1,000 ₺">0 - 1.000 ₺</option> <option value="1000-5000" data-tr="1.000 - 5.000 ₺" data-en="1,000 - 5,000 ₺" data-ru="1,000 - 5,000 ₺">1.000 - 5.000 ₺</option> <option value="5000+" data-tr="5.000 ₺ +" data-en="5,000 ₺ +" data-ru="5,000 ₺ +">5.000 ₺ +</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Öncelik" data-en="Priority" data-ru="Приоритет">Öncelik</label> <select class="filter-select" id="priority-filter"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="high" data-tr="Yüksek" data-en="High" data-ru="Высокий">Yüksek</option> <option value="medium" data-tr="Orta" data-en="Medium" data-ru="Средний">Orta</option> <option value="low" data-tr="Düşük" data-en="Low" data-ru="Низкий">Düşük</option> </select>
       </div>
      </div>
      <div id="pending-payments-list" class="payments-list"><!-- Pending payments will be loaded here -->
      </div>
     </div>
    </div><!-- Activity Log Section -->
    <div id="activity-log-section" class="section hidden">
     <div class="section-header">
      <h2 class="section-title" data-tr="Ana Log – Sistem Aktiviteleri" data-en="Main Log – System Activities" data-ru="Основной журнал – Системные активности">Ana Log – Sistem Aktiviteleri</h2>
      <div class="section-actions"><button class="btn-export" onclick="refreshLog()" data-tr="Yenile" data-en="Refresh" data-ru="Обновить">🔄 Yenile</button> <button class="btn-export" onclick="exportLogToPDF()" data-tr="PDF İndir" data-en="Download PDF" data-ru="Скачать PDF">📄 PDF İndir</button>
      </div>
     </div>
     <div class="log-stats">
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Toplam Aktivite" data-en="Total Activities" data-ru="Всего активностей">
        Toplam Aktivite
       </div>
       <div class="mini-card-value" id="total-activities">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Bugün" data-en="Today" data-ru="Сегодня">
        Bugün
       </div>
       <div class="mini-card-value" id="today-activities">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Başarılı" data-en="Successful" data-ru="Успешно">
        Başarılı
       </div>
       <div class="mini-card-value" id="successful-activities">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Hata" data-en="Errors" data-ru="Ошибки">
        Hata
       </div>
       <div class="mini-card-value" id="error-activities">
        0
       </div>
      </div>
     </div>
     <div class="log-filters">
      <div class="filter-group"><label class="filter-label" data-tr="Aktivite Tipi" data-en="Activity Type" data-ru="Тип активности">Aktivite Tipi</label> <select class="filter-select" id="log-type-filter" onchange="applyLogFilters()"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="login" data-tr="Giriş" data-en="Login" data-ru="Вход">Giriş</option> <option value="request" data-tr="Talep" data-en="Request" data-ru="Запрос">Talep</option> <option value="approval" data-tr="Onay" data-en="Approval" data-ru="Одобрение">Onay</option> <option value="payment" data-tr="Ödeme" data-en="Payment" data-ru="Платеж">Ödeme</option> <option value="system" data-tr="Sistem" data-en="System" data-ru="Система">Sistem</option> </select>
      </div>
      <div class="filter-group"><label class="filter-label" data-tr="Kullanıcı" data-en="User" data-ru="Пользователь">Kullanıcı</label> <select class="filter-select" id="log-user-filter" onchange="applyLogFilters()"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="Oğuzhan Karslı" data-tr="Oğuzhan Karslı" data-en="Oğuzhan Karslı" data-ru="Oğuzhan Karslı">Oğuzhan Karslı</option> <option value="Ayşe Demir" data-tr="Ayşe Demir" data-en="Ayşe Demir" data-ru="Ayşe Demir">Ayşe Demir</option> <option value="Mehmet Yılmaz" data-tr="Mehmet Yılmaz" data-en="Mehmet Yılmaz" data-ru="Mehmet Yılmaz">Mehmet Yılmaz</option> </select>
      </div>
      <div class="filter-group"><label class="filter-label" data-tr="Tarih Aralığı" data-en="Date Range" data-ru="Диапазон дат">Tarih Aralığı</label> <input type="date" class="filter-input" id="log-date-from" onchange="applyLogFilters()">
      </div>
      <div class="filter-group"><label class="filter-label" data-tr="Bitiş Tarihi" data-en="End Date" data-ru="Дата окончания">Bitiş Tarihi</label> <input type="date" class="filter-input" id="log-date-to" onchange="applyLogFilters()">
      </div>
     </div>
     <div class="log-container">
      <div id="log-entries" class="log-entries"><!-- Log entries will be loaded here -->
      </div>
     </div>
     <div class="log-pagination" id="log-pagination"><!-- Pagination will be generated here -->
     </div>
    </div><!-- New Request Form Section -->
    <div id="new-request-section" class="section hidden">
     <div class="new-request-container">
      <div class="new-request-header">
       <h2 class="new-request-title" data-tr="Yeni Talep Oluştur (AI Entegre)" data-en="Create New Request (AI Integrated)" data-ru="Создать новый запрос (AI интегрированный)">Yeni Talep Oluştur (AI Entegre)</h2>
      </div>
      <form id="new-request-form" class="new-request-form">
       <div class="form-columns">
        <div class="form-column">
         <div class="form-group"><label class="form-label" data-tr="Birim" data-en="Unit" data-ru="Единица">Birim</label> <select class="form-input" id="request-unit" required> <option value="">Seçiniz</option> <option value="IT">IT</option> <option value="HR">HR</option> <option value="Finance">Finance</option> <option value="Operations">Operations</option> </select>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Malzeme Adı" data-en="Material Name" data-ru="Название материала">Malzeme Adı</label> <input type="text" class="form-input" id="request-material-name" required>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Тип материала">Malzeme Tipi</label> <select class="form-input" id="request-material-type" required> <option value="">Seçiniz</option> <option value="Kırtasiye">Kırtasiye</option> <option value="Elektronik">Elektronik</option> <option value="Mobilya">Mobilya</option> <option value="Yazılım">Yazılım</option> <option value="Diğer">Diğer</option> </select>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Birim" data-en="Unit" data-ru="Единица">Birim</label> <select class="form-input" id="request-unit-type" required> <option value="">Seçiniz</option> <option value="Adet">Adet</option> <option value="Kg">Kg</option> <option value="Litre">Litre</option> <option value="Metre">Metre</option> <option value="Paket">Paket</option> </select>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Detay" data-en="Details" data-ru="Детали">Detay</label> <textarea class="form-input" id="request-details" rows="3"></textarea>
         </div>
        </div>
        <div class="form-column">
         <div class="form-group"><label class="form-label" data-tr="Adı Soyadı" data-en="Full Name" data-ru="Полное имя">Adı Soyadı</label> <input type="text" class="form-input" id="request-requester" required>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Malzeme Türü" data-en="Material Category" data-ru="Категория материала">Malzeme Türü</label> <select class="form-input" id="request-category" required> <option value="">Seçiniz</option> <option value="Tüketim">Tüketim</option> <option value="Yatırım">Yatırım</option> <option value="Bakım">Bakım</option> <option value="Acil">Acil</option> </select>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Termin" data-en="Deadline" data-ru="Срок">Termin</label> <input type="date" class="form-input" id="request-deadline" required>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</label> <input type="number" class="form-input" id="request-quantity" min="1" required>
         </div>
         <div class="form-group"><label class="form-label" data-tr="Link" data-en="Link" data-ru="Ссылка">Link</label> <input type="url" class="form-input" id="request-link">
         </div>
        </div>
       </div>
       <div class="request-table-section">
        <h3 class="table-title" data-tr="Talep Özeti" data-en="Request Summary" data-ru="Сводка запроса">Talep Özeti</h3>
        <div class="request-table-container">
         <table class="request-preview-table">
          <thead>
           <tr>
            <th data-tr="Malzeme" data-en="Material" data-ru="Материал">Malzeme</th>
            <th data-tr="Birim" data-en="Unit" data-ru="Единица">Birim</th>
            <th data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</th>
            <th data-tr="Detay" data-en="Details" data-ru="Детали">Detay</th>
            <th data-tr="Link" data-en="Link" data-ru="Ссылка">Link</th>
            <th data-tr="Termin" data-en="Deadline" data-ru="Срок">Termin</th>
           </tr>
          </thead>
          <tbody id="request-preview-body">
           <tr>
            <td colspan="6" class="empty-preview" data-tr="Form dolduruldukça önizleme burada görünecek" data-en="Preview will appear here as you fill the form" data-ru="Предварительный просмотр появится здесь при заполнении формы">Form dolduruldukça önizleme burada görünecek</td>
           </tr>
          </tbody>
         </table>
        </div>
       </div>
       <div class="form-actions"><button type="button" class="btn-add-row" onclick="addRequestRow()" data-tr="+ Satır Ekle" data-en="+ Add Row" data-ru="+ Добавить строку">+ Satır Ekle</button> <button type="button" class="btn-remove-row" onclick="removeRequestRow()" data-tr="– Satır Sil" data-en="– Remove Row" data-ru="– Удалить строку">– Satır Sil</button> <button type="submit" class="btn-save-request" data-tr="Talebi Kaydet" data-en="Save Request" data-ru="Сохранить запрос">Talebi Kaydet</button> <button type="button" class="btn-close-form" onclick="closeNewRequestForm()" data-tr="Kapat" data-en="Close" data-ru="Закрыть">Kapat</button>
       </div>
      </form>
     </div>
    </div><!-- Settings Section -->
    <div id="settings-section" class="section hidden">
     <div class="settings-section">
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Kullanıcı Bilgileri" data-en="User Information" data-ru="Информация о пользователе">Kullanıcı Bilgileri</h3>
       <div class="form-group"><label class="form-label" data-tr="Ad Soyad" data-en="Full Name" data-ru="Полное имя">Ad Soyad</label> <input type="text" class="form-input" id="user-fullname" value="Oğuzhan Kaya">
       </div>
       <div class="form-group"><label class="form-label" data-tr="E-posta" data-en="Email" data-ru="Электронная почта">E-posta</label> <input type="email" class="form-input" id="user-email" value="oguzhan@somtech.com">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Rol" data-en="Role" data-ru="Роль">Rol</label> <input type="text" class="form-input" id="user-role-input" value="Satın Alma" readonly>
       </div><button class="btn-primary" onclick="updateUserInfo()" data-tr="Bilgileri Güncelle" data-en="Update Information" data-ru="Обновить информацию">Bilgileri Güncelle</button>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Sistem Ayarları" data-en="System Settings" data-ru="Системные настройки">Sistem Ayarları</h3>
       <div class="form-group"><label class="form-label" data-tr="Dil" data-en="Language" data-ru="Язык">Dil</label> <select class="form-input" id="language-select" onchange="setLanguage(this.value)"> <option value="tr" data-tr="Türkçe" data-en="Turkish" data-ru="Турецкий">Türkçe</option> <option value="en" data-tr="İngilizce" data-en="English" data-ru="Английский">İngilizce</option> <option value="ru" data-tr="Rusça" data-en="Russian" data-ru="Русский">Rusça</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Tema" data-en="Theme" data-ru="Тема">Tema</label> <select class="form-input" id="theme-select" onchange="setTheme(this.value)"> <option value="light" data-tr="Açık" data-en="Light" data-ru="Светлый">Açık</option> <option value="dark" data-tr="Koyu" data-en="Dark" data-ru="Темный">Koyu</option> </select>
       </div>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Şifre Değiştir" data-en="Change Password" data-ru="Изменить пароль">Şifre Değiştir</h3>
       <div class="form-group"><label class="form-label" data-tr="Mevcut Şifre" data-en="Current Password" data-ru="Текущий пароль">Mevcut Şifre</label> <input type="password" class="form-input" id="current-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Şifre" data-en="New Password" data-ru="Новый пароль">Yeni Şifre</label> <input type="password" class="form-input" id="new-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Şifre Tekrar" data-en="Confirm New Password" data-ru="Подтвердите новый пароль">Yeni Şifre Tekrar</label> <input type="password" class="form-input" id="confirm-password">
       </div><button class="btn-primary" onclick="changePassword()" data-tr="Şifreyi Değiştir" data-en="Change Password" data-ru="Изменить пароль">Şifreyi Değiştir</button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Login Overlay -->
  <div id="login-overlay" class="login-overlay">
   <div class="login-container">
    <div class="login-header">
     <div class="login-logo">
      <div class="logo-icon">
       <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
       </svg>
      </div>
      <div class="login-title">
       <h1 data-tr="SOMTECH_SOF v2.0.0 Giriş" data-en="SOMTECH_SOF v2.0.0 Login" data-ru="SOMTECH_SOF v2.0.0 Вход">SOMTECH_SOF v2.0.0 Giriş</h1>
       <p data-tr="Malzeme Yönetim Sistemi" data-en="Material Management System" data-ru="Система управления материалами">Malzeme Yönetim Sistemi</p>
      </div>
     </div>
    </div>
    <form id="login-form" class="login-form">
     <div class="form-group"><label class="form-label" data-tr="E-posta / Kullanıcı Adı" data-en="Email / Username" data-ru="Email / Имя пользователя">E-posta / Kullanıcı Adı</label> <input type="text" class="form-input" id="login-username" required data-tr-placeholder="E-posta adresinizi girin" data-en-placeholder="Enter your email address" data-ru-placeholder="Введите ваш email">
     </div>
     <div class="form-group"><label class="form-label" data-tr="Şifre" data-en="Password" data-ru="Пароль">Şifre</label> <input type="password" class="form-input" id="login-password" required data-tr-placeholder="Şifrenizi girin" data-en-placeholder="Enter your password" data-ru-placeholder="Введите ваш пароль">
     </div>
     <div class="login-buttons"><button type="submit" class="btn-login" data-tr="Giriş Yap" data-en="Login" data-ru="Войти">Giriş Yap</button> <button type="button" class="btn-register" onclick="showRegister()" data-tr="Kayıt Ol" data-en="Register" data-ru="Регистрация">Kayıt Ol</button>
     </div>
     <div class="login-footer">
      <p data-tr="Admin hesap: admin@somtech.com / somtech2025" data-en="Admin account: admin@somtech.com / somtech2025" data-ru="Админ аккаунт: admin@somtech.com / somtech2025">Admin hesap: admin@somtech.com / somtech2025</p>
     </div>
    </form>
   </div>
  </div><!-- Summary Modal -->
  <div id="summary-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Sistem Özeti" data-en="System Summary" data-ru="Сводка системы">Sistem Özeti</h2><button class="modal-close" onclick="closeSummaryModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div class="mini-cards">
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Toplam Talepler" data-en="Total Requests" data-ru="Всего запросов">
        Toplam Talepler
       </div>
       <div class="mini-card-value" id="modal-total-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Onaylanan" data-en="Approved" data-ru="Одобрено">
        Onaylanan
       </div>
       <div class="mini-card-value" id="modal-approved-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="Bekleyen" data-en="Pending" data-ru="В ожидании">
        Bekleyen
       </div>
       <div class="mini-card-value" id="modal-pending-requests">
        0
       </div>
      </div>
      <div class="mini-card">
       <div class="mini-card-title" data-tr="İşlemde" data-en="In Process" data-ru="В процессе">
        İşlemde
       </div>
       <div class="mini-card-value" id="modal-processing-requests">
        0
       </div>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Tracking Modal -->
  <div id="tracking-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Takip Logu" data-en="Tracking Log" data-ru="Журнал отслеживания">Takip Logu</h2><button class="modal-close" onclick="closeTrackingModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div id="tracking-log-content"><!-- Tracking log will be loaded here -->
     </div>
    </div>
   </div>
  </div><!-- Reject Modal -->
  <div id="reject-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Talep Reddi" data-en="Request Rejection" data-ru="Отклонение запроса">Talep Reddi</h2><button class="modal-close" onclick="closeRejectModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <p data-tr="Bu talebi reddetmek istediğinizden emin misiniz?" data-en="Are you sure you want to reject this request?" data-ru="Вы уверены, что хотите отклонить этот запрос?">Bu talebi reddetmek istediğinizden emin misiniz?</p>
     <div class="reject-form"><label class="form-label" data-tr="Red sebebi (isteğe bağlı)" data-en="Rejection reason (optional)" data-ru="Причина отклонения (необязательно)">Red sebebi (isteğe bağlı)</label> <textarea id="reject-reason" class="reject-textarea" data-tr-placeholder="Red sebebinizi yazın..." data-en-placeholder="Write your rejection reason..." data-ru-placeholder="Напишите причину отклонения..."></textarea>
     </div>
     <div class="modal-buttons"><button class="btn-modal-secondary" onclick="closeRejectModal()" data-tr="İptal" data-en="Cancel" data-ru="Отмена">İptal</button> <button class="btn-modal-primary" onclick="confirmReject()" data-tr="Reddet" data-en="Reject" data-ru="Отклонить">Reddet</button>
     </div>
    </div>
   </div>
  </div><!-- Invoice Modal -->
  <div id="invoice-modal" class="modal-overlay">
   <div class="modal-container">
    <div class="modal-header">
     <h2 class="modal-title" data-tr="Ön Fatura Görünümü" data-en="Invoice Preview" data-ru="Предварительный просмотр счета">Ön Fatura Görünümü</h2><button class="modal-close" onclick="closeInvoiceModal()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
      </svg></button>
    </div>
    <div class="modal-content">
     <div id="invoice-content"><!-- Invoice content will be loaded here -->
     </div>
    </div>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            company_name: "SOMTECH",
            system_version: "v2.0.0",
            welcome_message: "Hoş geldin"
        };

        // Global variables
        let currentLanguage = 'tr';
        let isDarkTheme = false;
        let isSidebarCollapsed = false;
        let isLoggedIn = false;
        let currentUser = {
            name: "Oğuzhan Karslı",
            role: "Satın Alma",
            email: "admin@somtech.com"
        };
        let allRecords = [];
        let currentPage = 1;
        let recordsPerPage = 10;
        let statusChart = null;

        // Sample data for demonstration
        const sampleRecords = [
            {
                id: '1',
                sofNo: 'SOF-2024-001',
                requestDate: '2024-01-15',
                materialName: 'A4 Kağıt',
                materialType: 'Kırtasiye',
                unit: 'Paket',
                quantity: 50,
                deliveryDate: '2024-01-25',
                status: 'approved',
                requester: 'Oğuzhan Karslı',
                details: 'Ofis kullanımı için beyaz A4 kağıt',
                link: '',
                createdAt: new Date().toISOString()
            },
            {
                id: '2',
                sofNo: 'SOF-2024-002',
                requestDate: '2024-01-16',
                materialName: 'Laptop',
                materialType: 'Elektronik',
                unit: 'Adet',
                quantity: 2,
                deliveryDate: '2024-02-01',
                status: 'pending_approval',
                requester: 'Ayşe Demir',
                details: 'Yeni çalışanlar için laptop',
                link: 'https://example.com/laptop',
                createdAt: new Date().toISOString()
            },
            {
                id: '3',
                sofNo: 'SOF-2024-003',
                requestDate: '2024-01-17',
                materialName: 'Ofis Masası',
                materialType: 'Mobilya',
                unit: 'Adet',
                quantity: 1,
                deliveryDate: '2024-02-15',
                status: 'purchasing',
                requester: 'Mehmet Yılmaz',
                details: 'Yönetici odası için ahşap masa',
                link: '',
                createdAt: new Date().toISOString()
            },
            {
                id: '4',
                sofNo: 'SOF-2024-004',
                requestDate: '2024-01-18',
                materialName: 'Kalem Seti',
                materialType: 'Kırtasiye',
                unit: 'Adet',
                quantity: 25,
                deliveryDate: '2024-02-05',
                status: 'pending_payment',
                requester: 'Oğuzhan Karslı',
                details: 'Tükenmez kalem ve kurşun kalem seti',
                link: '',
                createdAt: new Date().toISOString()
            }
        ];

        // Global variables for modals
        let currentRejectId = null;
        
        // Log system variables
        let allLogEntries = [];
        let filteredLogEntries = [];
        let logCurrentPage = 1;
        let logEntriesPerPage = 20;
        
        // Sample log data
        const sampleLogEntries = [
            {
                id: '1',
                type: 'login',
                title: 'Kullanıcı Girişi',
                description: 'Sistem girişi başarıyla gerçekleştirildi',
                user: 'Oğuzhan Karslı',
                timestamp: new Date().toISOString(),
                status: 'success',
                ip: '192.168.1.100',
                details: 'Web arayüzü üzerinden giriş'
            },
            {
                id: '2',
                type: 'request',
                title: 'Yeni Talep Oluşturuldu',
                description: 'SOF-2024-001 numaralı talep oluşturuldu',
                user: 'Oğuzhan Karslı',
                timestamp: new Date(Date.now() - 300000).toISOString(),
                status: 'info',
                details: 'Kırtasiye malzemesi talebi - 50 adet'
            },
            {
                id: '3',
                type: 'approval',
                title: 'Talep Onaylandı',
                description: 'SOF-2024-002 numaralı talep onaylandı',
                user: 'Ayşe Demir',
                timestamp: new Date(Date.now() - 600000).toISOString(),
                status: 'success',
                details: 'Elektronik malzeme talebi onaylandı'
            },
            {
                id: '4',
                type: 'payment',
                title: 'Ödeme İşlemi',
                description: 'SOF-2024-003 için ödeme tamamlandı',
                user: 'Mehmet Yılmaz',
                timestamp: new Date(Date.now() - 900000).toISOString(),
                status: 'success',
                details: 'Mobilya satın alma ödemesi - ₺2,450.00'
            },
            {
                id: '5',
                type: 'system',
                title: 'Sistem Yedeklemesi',
                description: 'Otomatik sistem yedeklemesi tamamlandı',
                user: 'Sistem',
                timestamp: new Date(Date.now() - 1200000).toISOString(),
                status: 'success',
                details: 'Günlük yedekleme işlemi başarılı'
            },
            {
                id: '6',
                type: 'request',
                title: 'Talep Reddedildi',
                description: 'SOF-2024-005 numaralı talep reddedildi',
                user: 'Oğuzhan Karslı',
                timestamp: new Date(Date.now() - 1500000).toISOString(),
                status: 'warning',
                details: 'Bütçe yetersizliği nedeniyle reddedildi'
            },
            {
                id: '7',
                type: 'system',
                title: 'Bağlantı Hatası',
                description: 'Veritabanı bağlantı hatası tespit edildi',
                user: 'Sistem',
                timestamp: new Date(Date.now() - 1800000).toISOString(),
                status: 'error',
                details: 'Geçici bağlantı sorunu - 30 saniye içinde çözüldü'
            },
            {
                id: '8',
                type: 'login',
                title: 'Kullanıcı Çıkışı',
                description: 'Oturum sonlandırıldı',
                user: 'Ayşe Demir',
                timestamp: new Date(Date.now() - 2100000).toISOString(),
                status: 'info',
                details: 'Normal oturum sonlandırma'
            }
        ];

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                allRecords = data.length > 0 ? data : sampleRecords;
                updateDashboardStats();
                updateDashboardSections();
                updateRecordsTable();
            }
        };

        // Language detection and setup
        function detectBrowserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('en')) return 'en';
            if (browserLang.startsWith('ru')) return 'ru';
            return 'tr';
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === lang.toUpperCase()) {
                    btn.classList.add('active');
                }
            });
            
            // Update language select in settings
            document.getElementById('language-select').value = lang;
            
            updateTranslations();
            updatePlaceholders();
            showNotification(getTranslation('Dil değiştirildi', 'Language changed', 'Язык изменен'), 'success');
        }

        function updateTranslations() {
            document.querySelectorAll('[data-tr]').forEach(element => {
                const trText = element.getAttribute('data-tr');
                const enText = element.getAttribute('data-en');
                const ruText = element.getAttribute('data-ru');
                
                if (currentLanguage === 'en' && enText) {
                    element.textContent = enText;
                } else if (currentLanguage === 'ru' && ruText) {
                    element.textContent = ruText;
                } else if (trText) {
                    element.textContent = trText;
                }
            });
        }

        function updatePlaceholders() {
            document.querySelectorAll('[data-tr-placeholder]').forEach(element => {
                const trPlaceholder = element.getAttribute('data-tr-placeholder');
                const enPlaceholder = element.getAttribute('data-en-placeholder');
                const ruPlaceholder = element.getAttribute('data-ru-placeholder');
                
                if (currentLanguage === 'en' && enPlaceholder) {
                    element.placeholder = enPlaceholder;
                } else if (currentLanguage === 'ru' && ruPlaceholder) {
                    element.placeholder = ruPlaceholder;
                } else if (trPlaceholder) {
                    element.placeholder = trPlaceholder;
                }
            });
        }

        function getTranslation(tr, en, ru) {
            if (currentLanguage === 'en') return en;
            if (currentLanguage === 'ru') return ru;
            return tr;
        }

        // Theme functions
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            setTheme(isDarkTheme ? 'dark' : 'light');
        }

        function setTheme(theme) {
            isDarkTheme = theme === 'dark';
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (isDarkTheme) {
                body.classList.add('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
            } else {
                body.classList.remove('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
            }
            
            document.getElementById('theme-select').value = theme;
            updateChart();
        }

        // Sidebar functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            const mainContent = document.querySelector('.main-content');
            
            if (window.innerWidth <= 480) {
                // Full mobile - overlay sidebar
                sidebar.classList.toggle('mobile-open');
            } else if (window.innerWidth <= 768) {
                // Tablet - collapsed sidebar
                const isCollapsed = sidebar.classList.contains('mobile-collapsed');
                if (isCollapsed) {
                    sidebar.classList.remove('mobile-collapsed');
                    mainContent.classList.remove('mobile-collapsed');
                    sidebar.classList.add('mobile-open');
                } else {
                    sidebar.classList.remove('mobile-open');
                    sidebar.classList.add('mobile-collapsed');
                    mainContent.classList.add('mobile-collapsed');
                }
            } else {
                // Desktop - normal collapse
                isSidebarCollapsed = !isSidebarCollapsed;
                sidebar.classList.toggle('collapsed');
            }
        }
        
        // Close mobile sidebar when clicking outside
        document.addEventListener('click', function(event) {
            const sidebar = document.getElementById('sidebar');
            const menuToggle = document.querySelector('.menu-toggle');
            
            if (window.innerWidth <= 768 && 
                sidebar.classList.contains('mobile-open') && 
                !sidebar.contains(event.target) && 
                !menuToggle.contains(event.target)) {
                sidebar.classList.remove('mobile-open');
            }
        });

        // Session management functions
        function showSessionElements() {
            // Update welcome message
            const welcomeText = document.getElementById('welcome-text');
            welcomeText.textContent = `Hoş geldiniz, ${currentUser.name.split(' ')[0]}`;
            
            // Update user info
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = currentUser.role;
            document.getElementById('user-avatar').textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Show elements with staggered animation
            setTimeout(() => {
                document.getElementById('welcome-message').classList.add('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.add('show');
            }, 400);
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.add('show');
            }, 600);
            
            setTimeout(() => {
                document.getElementById('logout-btn').classList.add('show');
            }, 800);
        }
        
        function hideSessionElements() {
            // Hide elements with reverse animation
            document.getElementById('logout-btn').classList.remove('show');
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.remove('show');
            }, 100);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.remove('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('welcome-message').classList.remove('show');
            }, 300);
        }

        // Login functions
        function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            // Admin authentication
            if ((username === 'admin@somtech.com' || username === 'admin') && password === 'somtech2025') {
                isLoggedIn = true;
                
                // Update user info
                currentUser.name = "Oğuzhan Karslı";
                currentUser.role = "Satın Alma";
                currentUser.email = "admin@somtech.com";
                
                // Save login state to localStorage
                localStorage.setItem('somtech_logged_in', 'true');
                localStorage.setItem('somtech_user', JSON.stringify(currentUser));
                
                // Start login transition animation
                performLoginTransition();
                
                showNotification(getTranslation('Başarıyla giriş yapıldı', 'Successfully logged in', 'Успешный вход в систему'), 'success');
            } else if (username && password) {
                // Other users - pending approval
                showNotification(getTranslation('Hesabınız onay bekliyor. Lütfen yöneticinizle iletişime geçin.', 'Your account is pending approval. Please contact your administrator.', 'Ваш аккаунт ожидает одобрения. Пожалуйста, свяжитесь с администратором.'), 'error');
            } else {
                showNotification(getTranslation('Geçersiz kullanıcı adı veya şifre', 'Invalid username or password', 'Неверное имя пользователя или пароль'), 'error');
            }
        }
        
        // Smooth login transition animation
        function performLoginTransition() {
            const loginOverlay = document.getElementById('login-overlay');
            const loginContainer = document.querySelector('.login-container');
            const summarySection = document.getElementById('summary-section');
            
            // Add transition class to login container
            loginContainer.classList.add('log-fade-transition');
            
            // Phase 1: Fade out login form (immediate)
            loginContainer.classList.add('log-fade-out');
            
            // Phase 2: Show summary section with fade in (600ms delay)
            setTimeout(() => {
                // Hide login overlay completely
                loginOverlay.style.display = 'none';
                
                // Show summary section
                summarySection.style.display = 'block';
                summarySection.classList.remove('hidden');
                summarySection.classList.add('active');
                
                // Trigger fade in animation
                setTimeout(() => {
                    summarySection.classList.add('log-fade-in');
                    summarySection.style.opacity = '1';
                    
                    // Load summary data
                    updateSummarySection();
                    
                    // Update page title
                    document.getElementById('page-title').textContent = getTranslation('Sistem Özeti', 'System Summary', 'Сводка системы');
                    
                    // Show session elements
                    showSessionElements();
                }, 50);
            }, 600);
        }

        function showRegister() {
            showNotification(getTranslation('Kayıt özelliği yakında eklenecek', 'Registration feature coming soon', 'Функция регистрации скоро появится'), 'success');
        }

        // Navigation functions
        function showSection(sectionName, clickedElement = null) {
            if (!isLoggedIn && sectionName !== 'summary') {
                showNotification(getTranslation('Lütfen önce giriş yapın', 'Please login first', 'Пожалуйста, сначала войдите в систему'), 'error');
                return;
            }
            
            // Update active nav item with smooth transition
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                item.style.background = '#f0f0f0';
                item.style.color = 'var(--text-gray)';
            });
            
            // Find and activate the clicked nav item
            let activeNavItem = clickedElement;
            if (!activeNavItem && event && event.target) {
                activeNavItem = event.target.closest('.nav-item');
            }
            
            // If no specific element provided, find by section name
            if (!activeNavItem) {
                const sectionToNavMap = {
                    'summary': 'summary',
                    'my-requests': 'my-requests',
                    'purchasing': 'purchasing',
                    'pending-payments': 'pending-payments',
                    'activity-log': 'activity-log',
                    'google-drive': 'google-drive',
                    'settings': 'settings'
                };
                
                const navSelector = sectionToNavMap[sectionName];
                if (navSelector) {
                    activeNavItem = document.querySelector(`[onclick*="${navSelector}"]`);
                }
            }
            
            if (activeNavItem) {
                activeNavItem.classList.add('active');
                // Apply active styling with corporate blue
                activeNavItem.style.background = 'linear-gradient(135deg, #2459a0, rgba(36, 89, 160, 0.9))';
                activeNavItem.style.color = 'white';
                activeNavItem.style.fontWeight = '600';
                activeNavItem.style.transform = 'translateX(0)';
                activeNavItem.style.boxShadow = '0 6px 20px rgba(36, 89, 160, 0.3)';
            }
            
            // Smooth section transition with fade-in effect
            const currentSection = document.querySelector('.section.active, .section:not(.hidden)');
            const targetSection = document.getElementById(sectionName + '-section');
            
            if (!targetSection) {
                console.error(`Section not found: ${sectionName}-section`);
                return;
            }
            
            // If same section, do nothing
            if (currentSection === targetSection && targetSection.classList.contains('active')) {
                return;
            }
            
            // Fade out current section
            if (currentSection && currentSection !== targetSection) {
                currentSection.style.opacity = '0';
                currentSection.style.transform = 'translateY(-10px)';
                
                setTimeout(() => {
                    currentSection.classList.add('hidden');
                    currentSection.classList.remove('active');
                    currentSection.style.opacity = '';
                    currentSection.style.transform = '';
                }, 400);
            }
            
            // Fade in target section
            setTimeout(() => {
                // Hide all sections first
                document.querySelectorAll('.section').forEach(section => {
                    if (section !== targetSection) {
                        section.classList.add('hidden');
                        section.classList.remove('active');
                    }
                });
                
                // Show target section
                targetSection.classList.remove('hidden');
                targetSection.style.opacity = '0';
                targetSection.style.transform = 'translateY(10px)';
                
                // Trigger reflow
                targetSection.offsetHeight;
                
                // Animate in with fade effect
                targetSection.style.transition = 'all 0.4s cubic-bezier(0.4, 0, 0.2, 1)';
                targetSection.style.opacity = '1';
                targetSection.style.transform = 'translateY(0)';
                targetSection.classList.add('active');
                
                // Clean up transition
                setTimeout(() => {
                    targetSection.style.transition = '';
                }, 400);
            }, currentSection && currentSection !== targetSection ? 200 : 0);
            
            // Update page title with animation
            const titles = {
                'summary': getTranslation('Sistem Özeti', 'System Summary', 'Сводка системы'),
                'my-requests': getTranslation('Taleplerim', 'My Requests', 'Мои запросы'),
                'purchasing': getTranslation('Satın Alma Yönetimi', 'Purchasing Management', 'Управление закупками'),
                'pending-payments': getTranslation('Ödeme Bekleyen Talepler', 'Pending Payment Requests', 'Запросы, ожидающие оплаты'),
                'pending-approvals': getTranslation('Onay Bekleyen Talepler', 'Pending Approval Requests', 'Запросы, ожидающие одобрения'),
                'activity-log': getTranslation('Ana Log – Sistem Aktiviteleri', 'Main Log – System Activities', 'Основной журнал – Системные активности'),
                'new-request': getTranslation('Yeni Talep Oluştur', 'Create New Request', 'Создать новый запрос'),
                'settings': getTranslation('Ayarlar', 'Settings', 'Настройки')
            };
            
            const pageTitle = document.getElementById('page-title');
            const newTitle = titles[sectionName] || titles['summary'];
            
            // Animate title change
            pageTitle.style.opacity = '0';
            setTimeout(() => {
                pageTitle.textContent = newTitle;
                pageTitle.style.opacity = '1';
            }, 200);
            
            // Load section-specific data
            if (sectionName === 'summary') {
                setTimeout(() => {
                    updateSummarySection();
                }, 400);
            } else if (sectionName === 'my-requests') {
                setTimeout(() => {
                    updateMyRequestsTable();
                }, 400);
            } else if (sectionName === 'purchasing') {
                setTimeout(() => {
                    updatePurchasingSection();
                }, 400);
            } else if (sectionName === 'pending-payments') {
                setTimeout(() => {
                    updatePendingPaymentsSection();
                }, 400);
            } else if (sectionName === 'pending-approvals') {
                setTimeout(() => {
                    updatePendingApprovalsTable();
                }, 400);
            } else if (sectionName === 'activity-log') {
                setTimeout(() => {
                    loadActivityLogData();
                }, 400);
            }
        }

        // Filtering functions
        let filteredRecords = [];
        let materialCurrentPage = 1;

        function applyFilters() {
            const unitFilter = document.getElementById('material-unit-filter').value;
            const typeFilter = document.getElementById('material-type-filter').value;
            const statusFilter = document.getElementById('material-status-filter').value;
            const dateFromFilter = document.getElementById('material-date-from').value;
            const dateToFilter = document.getElementById('material-date-to').value;
            const searchFilter = document.getElementById('material-search-input').value.toLowerCase();
            
            filteredRecords = allRecords.filter(record => {
                // Unit filter
                if (unitFilter && record.unit !== unitFilter) return false;
                
                // Type filter
                if (typeFilter && record.materialType !== typeFilter) return false;
                
                // Status filter
                if (statusFilter && record.status !== statusFilter) return false;
                
                // Date range filter
                if (dateFromFilter && record.requestDate < dateFromFilter) return false;
                if (dateToFilter && record.requestDate > dateToFilter) return false;
                
                // Search filter
                if (searchFilter && 
                    !record.sofNo.toLowerCase().includes(searchFilter) &&
                    !record.materialType.toLowerCase().includes(searchFilter)) return false;
                
                return true;
            });
            
            materialCurrentPage = 1;
            updateMaterialRecordsTable();
        }

        function updateMaterialRecordsTable() {
            const tbody = document.getElementById('material-records-table-body');
            const recordsToShow = filteredRecords.length > 0 ? filteredRecords : allRecords;
            const startIndex = (materialCurrentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = recordsToShow.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="Görüntüle" data-en="View" data-ru="Просмотр">Görüntüle</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="Düzenle" data-en="Edit" data-ru="Редактировать">Düzenle</button>
                    </td>
                </tr>
            `).join('');
            
            updateMaterialPagination(recordsToShow.length);
            updateTranslations();
        }

        function updateMaterialPagination(totalRecords) {
            const totalPages = Math.ceil(totalRecords / recordsPerPage);
            const pagination = document.getElementById('material-pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (materialCurrentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage - 1})">‹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === materialCurrentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (materialCurrentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage + 1})">›</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changeMaterialPage(page) {
            materialCurrentPage = page;
            updateMaterialRecordsTable();
        }

        // Dashboard statistics
        function updateDashboardStats() {
            const total = allRecords.length;
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending_approval').length;
            const processing = allRecords.filter(r => ['purchasing', 'pending_payment'].includes(r.status)).length;
            
            // Update modal stats
            const modalTotal = document.getElementById('modal-total-requests');
            const modalApproved = document.getElementById('modal-approved-requests');
            const modalPending = document.getElementById('modal-pending-requests');
            const modalProcessing = document.getElementById('modal-processing-requests');
            
            if (modalTotal) modalTotal.textContent = total;
            if (modalApproved) modalApproved.textContent = approved;
            if (modalPending) modalPending.textContent = pending;
            if (modalProcessing) modalProcessing.textContent = processing;
        }

        // Update dashboard sections
        function updateDashboardSections() {
            updateMyRequests();
            updatePendingApprovals();
            updatePendingPayments();
            updatePurchasing();
        }

        // Update my requests section
        function updateMyRequests() {
            const myRequests = allRecords.filter(r => r.requester === currentUser.name).slice(0, 5);
            const container = document.getElementById('my-requests-list');
            const countBadge = document.getElementById('my-requests-count');
            
            countBadge.textContent = allRecords.filter(r => r.requester === currentUser.name).length;
            
            if (myRequests.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Henüz talep yok" data-en="No requests yet" data-ru="Пока нет запросов">Henüz talep yok</div>
                        <div class="empty-state-description" data-tr="İlk talebinizi oluşturmak için yukarıdaki butonu kullanın" data-en="Use the button above to create your first request" data-ru="Используйте кнопку выше, чтобы создать свой первый запрос">İlk talebinizi oluşturmak için yukarıdaki butonu kullanın</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = myRequests.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet</div>
                    <div class="progress-container">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: ${request.progress}%"></div>
                        </div>
                        <div class="progress-steps">
                            <span class="progress-step ${request.progress >= 20 ? 'active' : ''}" data-tr="Talep Edildi" data-en="Requested" data-ru="Запрошено">Talep Edildi</span>
                            <span class="progress-step ${request.progress >= 40 ? 'active' : ''}" data-tr="Onay Bekliyor" data-en="Pending Approval" data-ru="Ожидает одобрения">Onay Bekliyor</span>
                            <span class="progress-step ${request.progress >= 60 ? 'active' : ''}" data-tr="Satın Alma" data-en="Purchasing" data-ru="Закупка">Satın Alma</span>
                            <span class="progress-step ${request.progress >= 80 ? 'active' : ''}" data-tr="Ödeme Bekliyor" data-en="Pending Payment" data-ru="Ожидает оплаты">Ödeme Bekliyor</span>
                            <span class="progress-step ${request.progress >= 100 ? 'active' : ''}" data-tr="Tamamlandı" data-en="Completed" data-ru="Завершено">Tamamlandı</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update pending approvals section
        function updatePendingApprovals() {
            const pendingApprovals = allRecords.filter(r => r.status === 'pending_approval').slice(0, 3);
            const container = document.getElementById('pending-approval-list');
            const countBadge = document.getElementById('pending-approval-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'pending_approval').length;
            
            if (pendingApprovals.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Onay bekleyen talep yok" data-en="No pending approvals" data-ru="Нет ожидающих одобрения">Onay bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="Tüm talepler işlenmiş durumda" data-en="All requests have been processed" data-ru="Все запросы обработаны">Tüm talepler işlenmiş durumda</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = pendingApprovals.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-approve" onclick="approveRequest('${request.id}')" data-tr="Onayla" data-en="Approve" data-ru="Одобрить">Onayla</button>
                        <button class="btn-reject" onclick="showRejectModal('${request.id}')" data-tr="Reddet" data-en="Reject" data-ru="Отклонить">Reddet</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update pending payments section
        function updatePendingPayments() {
            const pendingPayments = allRecords.filter(r => r.status === 'pending_payment').slice(0, 3);
            const container = document.getElementById('pending-payment-list');
            const countBadge = document.getElementById('pending-payment-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'pending_payment').length;
            
            if (pendingPayments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Ödeme bekleyen talep yok" data-en="No pending payments" data-ru="Нет ожидающих оплаты">Ödeme bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="Tüm ödemeler tamamlanmış" data-en="All payments completed" data-ru="Все платежи завершены">Tüm ödemeler tamamlanmış</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = pendingPayments.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-payment" onclick="markPaymentComplete('${request.id}')" data-tr="Ödeme Yapıldı" data-en="Payment Made" data-ru="Платеж выполнен">Ödeme Yapıldı</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Update purchasing section
        function updatePurchasing() {
            const purchasing = allRecords.filter(r => r.status === 'purchasing').slice(0, 3);
            const container = document.getElementById('purchasing-list');
            const countBadge = document.getElementById('purchasing-count');
            
            countBadge.textContent = allRecords.filter(r => r.status === 'purchasing').length;
            
            if (purchasing.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">
                            <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"></path>
                            </svg>
                        </div>
                        <div class="empty-state-title" data-tr="Satın alma bekleyen talep yok" data-en="No purchasing requests" data-ru="Нет запросов на закупку">Satın alma bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="Tüm satın alma işlemleri tamamlanmış" data-en="All purchasing completed" data-ru="Все закупки завершены">Tüm satın alma işlemleri tamamlanmış</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = purchasing.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                    <div class="action-buttons">
                        <button class="btn-invoice" onclick="showInvoiceModal('${request.id}')" data-tr="Ön Fatura Görüntüle" data-en="View Invoice" data-ru="Просмотр счета">Ön Fatura Görüntüle</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }

        // Chart functions
        function updateChart() {
            const ctx = document.getElementById('statusChart').getContext('2d');
            
            if (statusChart) {
                statusChart.destroy();
            }
            
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending').length;
            const rejected = allRecords.filter(r => r.status === 'rejected').length;
            
            statusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [
                        getTranslation('Onaylanan', 'Approved', 'Одобрено'),
                        getTranslation('Bekleyen', 'Pending', 'В ожидании'),
                        getTranslation('Reddedilen', 'Rejected', 'Отклонено')
                    ],
                    datasets: [{
                        data: [approved, pending, rejected],
                        backgroundColor: [
                            '#10b981',
                            '#f59e0b',
                            '#ef4444'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: isDarkTheme ? '#f1f5f9' : '#1e293b',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Table functions
        function updateRecordsTable() {
            const tbody = document.getElementById('records-table-body');
            const startIndex = (currentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = allRecords.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="Görüntüle" data-en="View" data-ru="Просмотр">Görüntüle</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="Düzenle" data-en="Edit" data-ru="Редактировать">Düzenle</button>
                    </td>
                </tr>
            `).join('');
            
            updatePagination();
            updateTranslations();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('tr-TR');
        }

        function getStatusText(status) {
            const statusTexts = {
                'approved': getTranslation('Onaylandı', 'Approved', 'Одобрено'),
                'pending': getTranslation('Bekliyor', 'Pending', 'В ожидании'),
                'rejected': getTranslation('Reddedildi', 'Rejected', 'Отклонено')
            };
            return statusTexts[status] || status;
        }

        function updatePagination() {
            const totalPages = Math.ceil(allRecords.length / recordsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage - 1})">‹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changePage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage + 1})">›</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            currentPage = page;
            updateRecordsTable();
        }

        // Form functions
        async function createNewRequest(event) {
            event.preventDefault();
            
            const formData = {
                id: Date.now().toString(),
                sofNo: document.getElementById('sof-no').value,
                requestDate: new Date().toISOString().split('T')[0],
                materialType: document.getElementById('material-type').value,
                unit: document.getElementById('unit').value,
                quantity: parseInt(document.getElementById('quantity').value),
                deliveryDate: document.getElementById('delivery-date').value,
                status: 'pending_approval',
                requester: currentUser.name,
                createdAt: new Date().toISOString(),
                progress: 20,
                currentStep: 'approval'
            };
            
            try {
                const result = await window.dataSdk.create(formData);
                
                if (result.isOk) {
                    showNotification(getTranslation('Talep başarıyla oluşturuldu', 'Request created successfully', 'Запрос успешно создан'), 'success');
                    document.getElementById('new-request-form').reset();
                    showSection('dashboard');
                } else {
                    showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
                }
            } catch (error) {
                console.error('Create request error:', error);
                showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
            }
        }

        // Export functions
        function exportToPDF() {
            showNotification(getTranslation('PDF dışa aktarma özelliği yakında eklenecek', 'PDF export feature coming soon', 'Функция экспорта PDF скоро появится'), 'success');
        }

        function exportToCSV() {
            const headers = ['SOF No', 'Talep Tarihi', 'Malzeme Tipi', 'Birim', 'Adet', 'Teslim Tarihi', 'Durum'];
            const csvContent = [
                headers.join(','),
                ...allRecords.map(record => [
                    record.sofNo,
                    record.requestDate,
                    record.materialType,
                    record.unit,
                    record.quantity,
                    record.deliveryDate,
                    record.status
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'malzeme_kayitlari.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(getTranslation('CSV dosyası indirildi', 'CSV file downloaded', 'CSV файл загружен'), 'success');
        }

        // Google Drive functions
        function connectDrive() {
            showNotification(getTranslation('Google Drive bağlantısı yakında eklenecek', 'Google Drive connection coming soon', 'Подключение Google Drive скоро появится'), 'success');
        }

        function backupToDrive() {
            showNotification(getTranslation('Yedekleme özelliği yakında eklenecek', 'Backup feature coming soon', 'Функция резервного копирования скоро появится'), 'success');
        }

        function restoreFromDrive() {
            showNotification(getTranslation('Geri yükleme özelliği yakında eklenecek', 'Restore feature coming soon', 'Функция восстановления скоро появится'), 'success');
        }

        // Settings functions
        function updateUserInfo() {
            const fullname = document.getElementById('user-fullname').value;
            const email = document.getElementById('user-email').value;
            
            currentUser.name = fullname;
            currentUser.email = email;
            
            document.getElementById('user-name').textContent = fullname;
            document.getElementById('user-avatar').textContent = fullname.charAt(0).toUpperCase();
            
            showNotification(getTranslation('Kullanıcı bilgileri güncellendi', 'User information updated', 'Информация о пользователе обновлена'), 'success');
        }

        function changePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification(getTranslation('Tüm alanları doldurun', 'Fill all fields', 'Заполните все поля'), 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification(getTranslation('Yeni şifreler eşleşmiyor', 'New passwords do not match', 'Новые пароли не совпадают'), 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showNotification(getTranslation('Şifre en az 6 karakter olmalı', 'Password must be at least 6 characters', 'Пароль должен содержать минимум 6 символов'), 'error');
                return;
            }
            
            // Clear form
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            
            showNotification(getTranslation('Şifre başarıyla değiştirildi', 'Password changed successfully', 'Пароль успешно изменен'), 'success');
        }

        // Record actions
        function viewRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydı görüntüleniyor`, `Viewing record ${record.sofNo}`, `Просмотр записи ${record.sofNo}`), 'success');
            }
        }

        function editRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydı düzenleniyor`, `Editing record ${record.sofNo}`, `Редактирование записи ${record.sofNo}`), 'success');
            }
        }

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 4000);
        }

        function logout() {
            isLoggedIn = false;
            
            // Start logout transition animation
            performLogoutTransition();
            
            setTimeout(() => {
                // Clear localStorage
                localStorage.removeItem('somtech_logged_in');
                localStorage.removeItem('somtech_user');
                
                // Clear login form
                document.getElementById('login-form').reset();
                
                // Reset to login screen
                resetToLoginScreen();
                
                showNotification(getTranslation('Başarıyla çıkış yapıldı', 'Successfully logged out', 'Успешный выход из системы'), 'success');
            }, 1000);
        }
        
        // Smooth logout transition animation (reverse of login)
        function performLogoutTransition() {
            const loginOverlay = document.getElementById('login-overlay');
            const loginContainer = document.querySelector('.login-container');
            const summarySection = document.getElementById('summary-section');
            
            // Hide session elements first
            hideSessionElements();
            
            // Phase 1: Fade out summary section
            summarySection.classList.add('log-fade-transition');
            summarySection.classList.add('log-fade-out');
            summarySection.style.opacity = '0';
            
            // Phase 2: Show login overlay and fade in login form (600ms delay)
            setTimeout(() => {
                // Hide summary section
                summarySection.style.display = 'none';
                summarySection.classList.add('hidden');
                summarySection.classList.remove('active');
                
                // Show login overlay
                loginOverlay.style.display = 'flex';
                loginOverlay.classList.remove('hidden', 'slide-up');
                
                // Reset login container classes
                loginContainer.classList.remove('log-fade-out');
                loginContainer.classList.add('log-fade-transition');
                
                // Trigger fade in animation for login form
                setTimeout(() => {
                    loginContainer.style.opacity = '1';
                    loginContainer.style.transform = 'scale(1)';
                }, 50);
            }, 600);
        }
        
        function resetToLoginScreen() {
            const summarySection = document.getElementById('summary-section');
            const loginOverlay = document.getElementById('login-overlay');
            const loginContainer = document.querySelector('.login-container');
            
            // Reset summary section
            summarySection.classList.remove('log-fade-in', 'log-fade-out', 'log-fade-transition');
            summarySection.style.opacity = '0';
            summarySection.style.display = 'none';
            summarySection.classList.add('hidden');
            summarySection.classList.remove('active');
            
            // Reset login overlay and container
            loginOverlay.style.display = 'flex';
            loginOverlay.classList.remove('hidden', 'slide-up');
            loginContainer.classList.remove('log-fade-out', 'log-fade-transition');
            loginContainer.style.opacity = '1';
            loginContainer.style.transform = 'scale(1)';
            
            // Reset page title
            document.getElementById('page-title').textContent = getTranslation('Giriş', 'Login', 'Вход');
        }
        
        function resetToDefaultSection() {
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
                item.style.background = '#f0f0f0';
                item.style.color = 'var(--text-gray)';
            });
            
            // Activate summary nav item
            const summaryNavItem = document.querySelector('.nav-item[onclick*="summary"]');
            if (summaryNavItem) {
                summaryNavItem.classList.add('active');
                summaryNavItem.style.background = 'linear-gradient(135deg, #2459a0, rgba(36, 89, 160, 0.9))';
                summaryNavItem.style.color = 'white';
                summaryNavItem.style.fontWeight = '600';
            }
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active', 'fade-out');
            });
            
            // Show summary section
            const summarySection = document.getElementById('summary-section');
            summarySection.classList.remove('hidden');
            summarySection.classList.add('active');
            
            // Reset page title
            document.getElementById('page-title').textContent = getTranslation('Sistem Özeti', 'System Summary', 'Сводка системы');
        }

        // Check login state on page load
        function checkLoginState() {
            const savedLoginState = localStorage.getItem('somtech_logged_in');
            const savedUser = localStorage.getItem('somtech_user');
            
            const summarySection = document.getElementById('summary-section');
            const loginOverlay = document.getElementById('login-overlay');
            
            if (savedLoginState === 'true' && savedUser) {
                isLoggedIn = true;
                currentUser = JSON.parse(savedUser);
                
                // Set logged in state - show summary immediately
                loginOverlay.style.display = 'none';
                loginOverlay.classList.add('hidden');
                
                summarySection.style.display = 'block';
                summarySection.classList.remove('hidden');
                summarySection.classList.add('active', 'log-fade-in');
                summarySection.style.opacity = '1';
                
                // Load summary data
                setTimeout(() => {
                    updateSummarySection();
                    showSessionElements();
                }, 100);
                
                // Update page title
                document.getElementById('page-title').textContent = getTranslation('Sistem Özeti', 'System Summary', 'Сводка системы');
            } else {
                // Set logged out state - show login screen
                loginOverlay.style.display = 'flex';
                loginOverlay.classList.remove('hidden');
                
                summarySection.style.display = 'none';
                summarySection.classList.add('hidden');
                summarySection.classList.remove('active');
                summarySection.style.opacity = '0';
                
                // Update page title
                document.getElementById('page-title').textContent = getTranslation('Giriş', 'Login', 'Вход');
            }
        }

        // Modal functions
        function showSummaryModal() {
            updateDashboardStats();
            document.getElementById('summary-modal').classList.add('show');
        }

        function closeSummaryModal() {
            document.getElementById('summary-modal').classList.remove('show');
        }

        function showTrackingModal() {
            const trackingContent = document.getElementById('tracking-log-content');
            trackingContent.innerHTML = `
                <div class="request-list">
                    ${allRecords.map(request => `
                        <div class="request-item">
                            <div class="request-header">
                                <div class="request-id">${request.sofNo}</div>
                                <div class="request-date">${formatDate(request.requestDate)}</div>
                            </div>
                            <div class="request-description">${request.materialType} - ${request.quantity} adet (${request.requester})</div>
                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: ${request.progress}%"></div>
                                </div>
                                <div class="progress-steps">
                                    <span class="progress-step ${request.progress >= 20 ? 'active' : ''}" data-tr="Talep Edildi" data-en="Requested" data-ru="Запрошено">Talep Edildi</span>
                                    <span class="progress-step ${request.progress >= 40 ? 'active' : ''}" data-tr="Onay Bekliyor" data-en="Pending Approval" data-ru="Ожидает одобрения">Onay Bekliyor</span>
                                    <span class="progress-step ${request.progress >= 60 ? 'active' : ''}" data-tr="Satın Alma" data-en="Purchasing" data-ru="Закупка">Satın Alma</span>
                                    <span class="progress-step ${request.progress >= 80 ? 'active' : ''}" data-tr="Ödeme Bekliyor" data-en="Pending Payment" data-ru="Ожидает оплаты">Ödeme Bekliyor</span>
                                    <span class="progress-step ${request.progress >= 100 ? 'active' : ''}" data-tr="Tamamlandı" data-en="Completed" data-ru="Завершено">Tamamlandı</span>
                                </div>
                            </div>
                        </div>
                    `).join('')}
                </div>
            `;
            updateTranslations();
            document.getElementById('tracking-modal').classList.add('show');
        }

        function closeTrackingModal() {
            document.getElementById('tracking-modal').classList.remove('show');
        }

        function showRejectModal(requestId) {
            currentRejectId = requestId;
            document.getElementById('reject-reason').value = '';
            document.getElementById('reject-modal').classList.add('show');
        }

        function closeRejectModal() {
            currentRejectId = null;
            document.getElementById('reject-modal').classList.remove('show');
        }

        function showInvoiceModal(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            const invoiceContent = document.getElementById('invoice-content');
            
            invoiceContent.innerHTML = `
                <div style="border: 1px solid var(--border-light); border-radius: 8px; padding: 24px; background: var(--bg-light);">
                    <h3 style="margin: 0 0 16px 0; color: var(--text-dark);">Ön Fatura Detayları</h3>
                    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-bottom: 16px;">
                        <div><strong>SOF No:</strong> ${request.sofNo}</div>
                        <div><strong>Tarih:</strong> ${formatDate(request.requestDate)}</div>
                        <div><strong>Malzeme:</strong> ${request.materialType}</div>
                        <div><strong>Adet:</strong> ${request.quantity}</div>
                        <div><strong>Talep Eden:</strong> ${request.requester}</div>
                        <div><strong>Birim:</strong> ${request.unit}</div>
                    </div>
                    <div style="border-top: 1px solid var(--border-light); padding-top: 16px;">
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span><strong>Tahmini Tutar:</strong></span>
                            <span style="font-size: 18px; font-weight: 700; color: var(--primary-color);">₺${(Math.random() * 1000 + 100).toFixed(2)}</span>
                        </div>
                    </div>
                </div>
            `;
            
            document.getElementById('invoice-modal').classList.add('show');
        }

        function closeInvoiceModal() {
            document.getElementById('invoice-modal').classList.remove('show');
        }

        // Action functions
        async function approveRequest(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                request.status = 'purchasing';
                request.progress = 60;
                request.currentStep = 'purchasing';
                
                try {
                    const result = await window.dataSdk.update(request);
                    if (result.isOk) {
                        showNotification(getTranslation(`${request.sofNo} talebi onaylandı`, `Request ${request.sofNo} approved`, `Запрос ${request.sofNo} одобрен`), 'success');
                        updateDashboardSections();
                    } else {
                        showNotification(getTranslation('Onaylama işlemi başarısız', 'Approval failed', 'Ошибка одобрения'), 'error');
                    }
                } catch (error) {
                    console.error('Approve request error:', error);
                    showNotification(getTranslation('Onaylama işlemi başarısız', 'Approval failed', 'Ошибка одобрения'), 'error');
                }
            }
        }

        async function confirmReject() {
            if (currentRejectId) {
                const request = allRecords.find(r => r.id === currentRejectId);
                const reason = document.getElementById('reject-reason').value;
                
                if (request) {
                    // Remove the request from records instead of marking as rejected
                    const index = allRecords.findIndex(r => r.id === currentRejectId);
                    if (index > -1) {
                        allRecords.splice(index, 1);
                    }
                    
                    try {
                        const result = await window.dataSdk.delete(request);
                        if (result.isOk) {
                            showNotification(getTranslation(`${request.sofNo} talebi reddedildi${reason ? ': ' + reason : ''}`, `Request ${request.sofNo} rejected${reason ? ': ' + reason : ''}`, `Запрос ${request.sofNo} отклонен${reason ? ': ' + reason : ''}`), 'success');
                            updateDashboardSections();
                        } else {
                            showNotification(getTranslation('Reddetme işlemi başarısız', 'Rejection failed', 'Ошибка отклонения'), 'error');
                        }
                    } catch (error) {
                        console.error('Reject request error:', error);
                        showNotification(getTranslation('Reddetme işlemi başarısız', 'Rejection failed', 'Ошибка отклонения'), 'error');
                    }
                }
                
                closeRejectModal();
            }
        }

        async function markPaymentComplete(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                request.status = 'approved';
                request.progress = 100;
                request.currentStep = 'completed';
                
                try {
                    const result = await window.dataSdk.update(request);
                    if (result.isOk) {
                        showNotification(getTranslation(`${request.sofNo} ödemesi tamamlandı. Talep sahibine bildirim gönderildi.`, `Payment for ${request.sofNo} completed. Notification sent to requester.`, `Платеж по ${request.sofNo} завершен. Уведомление отправлено заявителю.`), 'success');
                        updateDashboardSections();
                    } else {
                        showNotification(getTranslation('Ödeme işlemi başarısız', 'Payment processing failed', 'Ошибка обработки платежа'), 'error');
                    }
                } catch (error) {
                    console.error('Payment complete error:', error);
                    showNotification(getTranslation('Ödeme işlemi başarısız', 'Payment processing failed', 'Ошибка обработки платежа'), 'error');
                }
            }
        }

        // Section update functions
        function updateSummarySection() {
            // Update status cards
            const total = allRecords.length;
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending_approval').length;
            const processing = allRecords.filter(r => ['purchasing', 'pending_payment'].includes(r.status)).length;
            
            document.getElementById('total-requests').textContent = total;
            document.getElementById('approved-requests').textContent = approved;
            document.getElementById('pending-requests').textContent = pending;
            document.getElementById('processing-requests').textContent = processing;
            
            // Update recent activities
            updateRecentActivities();
        }
        
        function updateRecentActivities() {
            const recentActivities = sampleLogEntries.slice(0, 3);
            const container = document.getElementById('recent-activities-list');
            
            container.innerHTML = recentActivities.map(activity => `
                <div class="log-entry">
                    <div class="log-icon ${activity.type} ${activity.status}">
                        ${getLogIcon(activity.type)}
                    </div>
                    <div class="log-content">
                        <div class="log-header">
                            <h4 class="log-title">${activity.title}</h4>
                            <span class="log-time">${formatLogTime(activity.timestamp)}</span>
                        </div>
                        <div class="log-description">${activity.description}</div>
                        <div class="log-meta">
                            <span class="log-user">${activity.user}</span>
                            <span class="log-status ${activity.status}">${getStatusText(activity.status)}</span>
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }
        
        function updateMyRequestsTable() {
            const myRequests = allRecords.filter(r => r.requester === currentUser.name);
            const tbody = document.getElementById('my-requests-table-body');
            
            if (myRequests.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px;">
                            <div class="empty-state">
                                <div class="empty-state-icon">📝</div>
                                <div class="empty-state-title" data-tr="Henüz talep yok" data-en="No requests yet" data-ru="Пока нет запросов">Henüz talep yok</div>
                                <div class="empty-state-description" data-tr="İlk talebinizi oluşturmak için yukarıdaki butonu kullanın" data-en="Use the button above to create your first request" data-ru="Используйте кнопку выше, чтобы создать свой первый запрос">İlk talebinizi oluşturmak için yukarıdaki butonu kullanın</div>
                            </div>
                        </td>
                    </tr>
                `;
                updateTranslations();
                return;
            }
            
            tbody.innerHTML = myRequests.map(request => `
                <tr>
                    <td><strong>${request.sofNo}</strong></td>
                    <td>${request.materialName || request.materialType}</td>
                    <td>${request.materialType}</td>
                    <td>${request.unit}</td>
                    <td>${request.quantity}</td>
                    <td>${formatDate(request.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${request.status}">
                            ${getStatusText(request.status)}
                        </span>
                    </td>
                </tr>
            `).join('');
            
            updateTranslations();
        }
        
        function updatePendingApprovalsTable() {
            const pendingApprovals = allRecords.filter(r => r.status === 'pending_approval');
            const tbody = document.getElementById('pending-approvals-table-body');
            
            if (pendingApprovals.length === 0) {
                tbody.innerHTML = `
                    <tr>
                        <td colspan="7" style="text-align: center; padding: 40px;">
                            <div class="empty-state">
                                <div class="empty-state-icon">✅</div>
                                <div class="empty-state-title" data-tr="Onay bekleyen talep yok" data-en="No pending approvals" data-ru="Нет ожидающих одобрения">Onay bekleyen talep yok</div>
                                <div class="empty-state-description" data-tr="Tüm talepler işlenmiş durumda" data-en="All requests have been processed" data-ru="Все запросы обработаны">Tüm talepler işlenmiş durumda</div>
                            </div>
                        </td>
                    </tr>
                `;
                updateTranslations();
                return;
            }
            
            tbody.innerHTML = pendingApprovals.map(request => `
                <tr>
                    <td><strong>${request.sofNo}</strong></td>
                    <td>${request.requester}</td>
                    <td>${request.materialName || request.materialType}</td>
                    <td>${request.materialType}</td>
                    <td>${request.quantity}</td>
                    <td>${formatDate(request.deliveryDate)}</td>
                    <td>
                        <button class="btn-approve" onclick="approveRequest('${request.id}')" data-tr="Onayla" data-en="Approve" data-ru="Одобрить">Onayla</button>
                        <button class="btn-reject" onclick="showRejectModal('${request.id}')" data-tr="Reddet" data-en="Reject" data-ru="Отклонить">Reddet</button>
                    </td>
                </tr>
            `).join('');
            
            updateTranslations();
        }
        
        function updatePurchasingSection() {
            const quotePending = allRecords.filter(r => r.status === 'purchasing').slice(0, 5);
            const invoiceReady = allRecords.filter(r => r.status === 'pending_payment').slice(0, 5);
            
            document.getElementById('quote-pending-count').textContent = allRecords.filter(r => r.status === 'purchasing').length;
            document.getElementById('invoice-ready-count').textContent = allRecords.filter(r => r.status === 'pending_payment').length;
            
            // Update quote pending list
            const quotePendingContainer = document.getElementById('quote-pending-list');
            quotePendingContainer.innerHTML = quotePending.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet</div>
                    <div class="action-buttons">
                        <button class="btn-primary" onclick="enterQuote('${request.id}')" data-tr="Teklif Gir" data-en="Enter Quote" data-ru="Ввести предложение">Teklif Gir</button>
                    </div>
                </div>
            `).join('');
            
            // Update invoice ready list
            const invoiceReadyContainer = document.getElementById('invoice-ready-list');
            invoiceReadyContainer.innerHTML = invoiceReady.map(request => `
                <div class="request-item">
                    <div class="request-header">
                        <div class="request-id">${request.sofNo}</div>
                        <div class="request-date">${formatDate(request.requestDate)}</div>
                    </div>
                    <div class="request-description">${request.materialType} - ${request.quantity} adet</div>
                    <div class="action-buttons">
                        <button class="btn-invoice" onclick="showInvoiceModal('${request.id}')" data-tr="Ön Fatura Görüntüle" data-en="View Invoice" data-ru="Просмотр счета">Ön Fatura Görüntüle</button>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }
        
        function updatePendingPaymentsSection() {
            const pendingPayments = allRecords.filter(r => r.status === 'pending_payment');
            const container = document.getElementById('pending-payments-list');
            
            if (pendingPayments.length === 0) {
                container.innerHTML = `
                    <div class="empty-state" style="padding: 60px 20px;">
                        <div class="empty-state-icon">💳</div>
                        <div class="empty-state-title" data-tr="Ödeme bekleyen talep yok" data-en="No pending payments" data-ru="Нет ожидающих оплаты">Ödeme bekleyen talep yok</div>
                        <div class="empty-state-description" data-tr="Tüm ödemeler tamamlanmış" data-en="All payments completed" data-ru="Все платежи завершены">Tüm ödemeler tamamlanmış</div>
                    </div>
                `;
                updateTranslations();
                return;
            }
            
            container.innerHTML = pendingPayments.map(request => {
                const amount = (Math.random() * 5000 + 500).toFixed(2);
                const priority = Math.random() > 0.7 ? 'high' : Math.random() > 0.4 ? 'medium' : 'low';
                const priorityText = priority === 'high' ? 'Yüksek' : priority === 'medium' ? 'Orta' : 'Düşük';
                const priorityColor = priority === 'high' ? '#ef4444' : priority === 'medium' ? '#f59e0b' : '#10b981';
                
                return `
                    <div class="request-item">
                        <div class="request-header">
                            <div class="request-id">${request.sofNo}</div>
                            <div class="request-date">${formatDate(request.requestDate)}</div>
                        </div>
                        <div class="request-description">${request.materialType} - ${request.quantity} adet</div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin: 12px 0;">
                            <div style="font-weight: 600; color: var(--primary-color);">₺${amount}</div>
                            <span style="background: ${priorityColor}; color: white; padding: 2px 8px; border-radius: 12px; font-size: 11px; font-weight: 600;">${priorityText}</span>
                        </div>
                        <div class="action-buttons">
                            <button class="btn-approve" onclick="approvePayment('${request.id}')" data-tr="Ödemeyi Onayla" data-en="Approve Payment" data-ru="Одобрить платеж">Ödemeyi Onayla</button>
                            <button class="btn-reject" onclick="rejectPayment('${request.id}')" data-tr="Reddet" data-en="Reject" data-ru="Отклонить">Reddet</button>
                        </div>
                    </div>
                `;
            }).join('');
            
            updateTranslations();
        }
        
        function loadActivityLogData() {
            allLogEntries = sampleLogEntries;
            filteredLogEntries = [...allLogEntries];
            updateLogStats();
            updateLogEntries();
            updateLogPagination();
        }
        
        function updateLogStats() {
            const total = allLogEntries.length;
            const today = allLogEntries.filter(entry => {
                const entryDate = new Date(entry.timestamp);
                const todayDate = new Date();
                return entryDate.toDateString() === todayDate.toDateString();
            }).length;
            const successful = allLogEntries.filter(entry => entry.status === 'success').length;
            const errors = allLogEntries.filter(entry => entry.status === 'error').length;
            
            document.getElementById('total-activities').textContent = total;
            document.getElementById('today-activities').textContent = today;
            document.getElementById('successful-activities').textContent = successful;
            document.getElementById('error-activities').textContent = errors;
        }
        
        function updateLogEntries() {
            const container = document.getElementById('log-entries');
            const startIndex = (logCurrentPage - 1) * logEntriesPerPage;
            const endIndex = startIndex + logEntriesPerPage;
            const pageEntries = filteredLogEntries.slice(startIndex, endIndex);
            
            container.innerHTML = pageEntries.map(entry => `
                <div class="log-entry">
                    <div class="log-icon ${entry.type} ${entry.status}">
                        ${getLogIcon(entry.type)}
                    </div>
                    <div class="log-content">
                        <div class="log-header">
                            <h4 class="log-title">${entry.title}</h4>
                            <span class="log-time">${formatLogTime(entry.timestamp)}</span>
                        </div>
                        <div class="log-description">${entry.description}</div>
                        <div class="log-meta">
                            <span class="log-user">${entry.user}</span>
                            <span class="log-status ${entry.status}">${getStatusText(entry.status)}</span>
                            ${entry.details ? `<span style="color: var(--text-gray);">${entry.details}</span>` : ''}
                        </div>
                    </div>
                </div>
            `).join('');
            
            updateTranslations();
        }
        
        function getLogIcon(type) {
            const icons = {
                'login': '🔐',
                'request': '📝',
                'approval': '✅',
                'payment': '💳',
                'system': '⚙️',
                'error': '❌'
            };
            return icons[type] || '📋';
        }
        
        function formatLogTime(timestamp) {
            const date = new Date(timestamp);
            const now = new Date();
            const diffMs = now - date;
            const diffMins = Math.floor(diffMs / 60000);
            const diffHours = Math.floor(diffMs / 3600000);
            const diffDays = Math.floor(diffMs / 86400000);
            
            if (diffMins < 1) return getTranslation('Az önce', 'Just now', 'Только что');
            if (diffMins < 60) return getTranslation(`${diffMins} dakika önce`, `${diffMins} minutes ago`, `${diffMins} минут назад`);
            if (diffHours < 24) return getTranslation(`${diffHours} saat önce`, `${diffHours} hours ago`, `${diffHours} часов назад`);
            if (diffDays < 7) return getTranslation(`${diffDays} gün önce`, `${diffDays} days ago`, `${diffDays} дней назад`);
            
            return date.toLocaleDateString('tr-TR', {
                day: '2-digit',
                month: '2-digit',
                year: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            });
        }
        
        function applyLogFilters() {
            const typeFilter = document.getElementById('log-type-filter').value;
            const userFilter = document.getElementById('log-user-filter').value;
            const dateFromFilter = document.getElementById('log-date-from').value;
            const dateToFilter = document.getElementById('log-date-to').value;
            
            filteredLogEntries = allLogEntries.filter(entry => {
                // Type filter
                if (typeFilter && entry.type !== typeFilter) return false;
                
                // User filter
                if (userFilter && entry.user !== userFilter) return false;
                
                // Date range filter
                const entryDate = new Date(entry.timestamp).toISOString().split('T')[0];
                if (dateFromFilter && entryDate < dateFromFilter) return false;
                if (dateToFilter && entryDate > dateToFilter) return false;
                
                return true;
            });
            
            logCurrentPage = 1;
            updateLogEntries();
            updateLogPagination();
        }
        
        function updateLogPagination() {
            const totalPages = Math.ceil(filteredLogEntries.length / logEntriesPerPage);
            const pagination = document.getElementById('log-pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (logCurrentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changeLogPage(${logCurrentPage - 1})">‹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === logCurrentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changeLogPage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (logCurrentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changeLogPage(${logCurrentPage + 1})">›</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }
        
        function changeLogPage(page) {
            logCurrentPage = page;
            updateLogEntries();
            updateLogPagination();
        }
        
        function refreshLog() {
            // Add a new login entry to simulate real-time updates
            const newEntry = {
                id: Date.now().toString(),
                type: 'system',
                title: 'Log Yenilendi',
                description: 'Sistem logları manuel olarak yenilendi',
                user: currentUser.name,
                timestamp: new Date().toISOString(),
                status: 'info',
                details: 'Manuel yenileme işlemi'
            };
            
            allLogEntries.unshift(newEntry);
            filteredLogEntries = [...allLogEntries];
            updateLogStats();
            updateLogEntries();
            updateLogPagination();
            
            showNotification(getTranslation('Log başarıyla yenilendi', 'Log refreshed successfully', 'Журнал успешно обновлен'), 'success');
        }
        
        function exportLogToPDF() {
            showNotification(getTranslation('Log PDF dışa aktarma özelliği yakında eklenecek', 'Log PDF export feature coming soon', 'Функция экспорта журнала в PDF скоро появится'), 'success');
        }

        // New Request Form Functions
        function showNewRequestForm() {
            showSection('new-request');
            
            // Pre-fill requester name
            document.getElementById('request-requester').value = currentUser.name;
            
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('request-deadline').min = today;
            
            // Clear form
            document.getElementById('new-request-form').reset();
            document.getElementById('request-requester').value = currentUser.name;
            
            // Clear preview
            updateRequestPreview();
        }
        
        function closeNewRequestForm() {
            showSection('my-requests');
        }
        
        function updateRequestPreview() {
            const materialName = document.getElementById('request-material-name').value;
            const unitType = document.getElementById('request-unit-type').value;
            const quantity = document.getElementById('request-quantity').value;
            const details = document.getElementById('request-details').value;
            const link = document.getElementById('request-link').value;
            const deadline = document.getElementById('request-deadline').value;
            
            const previewBody = document.getElementById('request-preview-body');
            
            if (!materialName && !unitType && !quantity && !details && !link && !deadline) {
                previewBody.innerHTML = `
                    <tr>
                        <td colspan="6" class="empty-preview" data-tr="Form dolduruldukça önizleme burada görünecek" data-en="Preview will appear here as you fill the form" data-ru="Предварительный просмотр появится здесь при заполнении формы">Form dolduruldukça önizleme burada görünecek</td>
                    </tr>
                `;
                updateTranslations();
                return;
            }
            
            previewBody.innerHTML = `
                <tr>
                    <td>${materialName || '-'}</td>
                    <td>${unitType || '-'}</td>
                    <td>${quantity || '-'}</td>
                    <td>${details || '-'}</td>
                    <td>${link ? `<a href="${link}" target="_blank" style="color: #00bcd4;">Link</a>` : '-'}</td>
                    <td>${deadline ? formatDate(deadline) : '-'}</td>
                </tr>
            `;
        }
        
        function addRequestRow() {
            showNotification(getTranslation('Çoklu satır özelliği yakında eklenecek', 'Multi-row feature coming soon', 'Функция множественных строк скоро появится'), 'success');
        }
        
        function removeRequestRow() {
            showNotification(getTranslation('Satır silme özelliği yakında eklenecek', 'Row removal feature coming soon', 'Функция удаления строк скоро появится'), 'success');
        }
        
        async function handleNewRequestSubmit(event) {
            event.preventDefault();
            
            const formData = {
                id: Date.now().toString(),
                sofNo: `SOF-${new Date().getFullYear()}-${String(allRecords.length + 1).padStart(3, '0')}`,
                requestDate: new Date().toISOString().split('T')[0],
                materialName: document.getElementById('request-material-name').value,
                materialType: document.getElementById('request-material-type').value,
                unit: document.getElementById('request-unit-type').value,
                quantity: parseInt(document.getElementById('request-quantity').value),
                deliveryDate: document.getElementById('request-deadline').value,
                status: 'pending_approval',
                requester: document.getElementById('request-requester').value,
                details: document.getElementById('request-details').value,
                link: document.getElementById('request-link').value,
                createdAt: new Date().toISOString()
            };
            
            // Show loading state
            const saveButton = document.querySelector('.btn-save-request');
            const originalText = saveButton.textContent;
            saveButton.textContent = getTranslation('Kaydediliyor...', 'Saving...', 'Сохранение...');
            saveButton.disabled = true;
            
            try {
                if (allRecords.length >= 999) {
                    showNotification(getTranslation('Maksimum 999 talep sınırına ulaşıldı. Lütfen önce bazı talepleri silin.', 'Maximum limit of 999 requests reached. Please delete some requests first.', 'Достигнут максимальный лимит в 999 запросов. Пожалуйста, сначала удалите некоторые запросы.'), 'error');
                    return;
                }
                
                const result = await window.dataSdk.create(formData);
                
                if (result.isOk) {
                    showNotification(getTranslation('Talep başarıyla oluşturuldu', 'Request created successfully', 'Запрос успешно создан'), 'success');
                    
                    // Clear form
                    document.getElementById('new-request-form').reset();
                    document.getElementById('request-requester').value = currentUser.name;
                    updateRequestPreview();
                    
                    // Go back to my requests
                    setTimeout(() => {
                        showSection('my-requests');
                    }, 1000);
                } else {
                    showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
                }
            } catch (error) {
                console.error('Create request error:', error);
                showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
            } finally {
                // Reset button state
                saveButton.textContent = originalText;
                saveButton.disabled = false;
            }
        }
        
        function viewRequestDetails(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                showNotification(getTranslation(`${request.sofNo} detayları görüntüleniyor`, `Viewing details for ${request.sofNo}`, `Просмотр деталей ${request.sofNo}`), 'success');
            }
        }
        
        function enterQuote(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                showNotification(getTranslation(`${request.sofNo} için teklif giriliyor`, `Entering quote for ${request.sofNo}`, `Ввод предложения для ${request.sofNo}`), 'success');
            }
        }
        
        function approvePayment(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                showNotification(getTranslation(`${request.sofNo} ödemesi onaylandı`, `Payment approved for ${request.sofNo}`, `Платеж одобрен для ${request.sofNo}`), 'success');
                // Update status to completed
                request.status = 'approved';
                request.progress = 100;
                updatePendingPaymentsSection();
                updateSummarySection();
            }
        }
        
        function rejectPayment(requestId) {
            const request = allRecords.find(r => r.id === requestId);
            if (request) {
                showNotification(getTranslation(`${request.sofNo} ödemesi reddedildi`, `Payment rejected for ${request.sofNo}`, `Платеж отклонен для ${request.sofNo}`), 'error');
            }
        }

        // View all functions
        function showAllMyRequests() {
            showSection('my-requests');
        }

        function showAllPendingApprovals() {
            showNotification(getTranslation('Tüm onay bekleyen talepler sayfası yakında eklenecek', 'All pending approvals page coming soon', 'Страница всех ожидающих одобрения скоро появится'), 'success');
        }

        function showAllPendingPayments() {
            showSection('pending-payments');
        }

        function showAllPurchasing() {
            showSection('purchasing');
        }

        // Close modals when clicking outside
        document.addEventListener('click', function(event) {
            if (event.target.classList.contains('modal-overlay')) {
                if (event.target.id === 'summary-modal') closeSummaryModal();
                if (event.target.id === 'tracking-modal') closeTrackingModal();
                if (event.target.id === 'reject-modal') closeRejectModal();
                if (event.target.id === 'invoice-modal') closeInvoiceModal();
            }
        });

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', async function() {
            // Check login state first
            checkLoginState();
            
            // Set up login form handler
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            // Initialize Data SDK
            try {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error('Data SDK initialization failed');
                }
            } catch (error) {
                console.error('Data SDK error:', error);
                // Use sample data if SDK fails
                allRecords = sampleRecords;
                updateDashboardStats();
                updateRecordsTable();
                updateChart();
            }
            
            // Detect and set browser language
            const detectedLang = detectBrowserLanguage();
            setLanguage(detectedLang);
            
            // Set up form handlers
            document.getElementById('new-request-form').addEventListener('submit', handleNewRequestSubmit);
            
            // Add event listeners for form preview updates
            const formInputs = [
                'request-material-name',
                'request-unit-type', 
                'request-quantity',
                'request-details',
                'request-link',
                'request-deadline'
            ];
            
            formInputs.forEach(inputId => {
                const element = document.getElementById(inputId);
                if (element) {
                    element.addEventListener('input', updateRequestPreview);
                    element.addEventListener('change', updateRequestPreview);
                }
            });
            
            // Set up responsive sidebar
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    document.getElementById('sidebar').classList.remove('mobile-open');
                }
            });
            
            // User info will be updated by showSessionElements() if logged in
            
            console.log('SOMTECH_SOF v2.0.0 Dashboard initialized');
            showNotification(getTranslation('Dashboard yüklendi', 'Dashboard loaded', 'Панель управления загружена'), 'success');
        });

        // Element SDK implementation
        const element = {
            defaultConfig: defaultConfig,
            
            onConfigChange: async (config) => {
                // Update company name
                const companyElement = document.getElementById('company-name');
                if (companyElement) {
                    companyElement.textContent = config.company_name || defaultConfig.company_name;
                }
                
                // Update system version
                const versionElement = document.getElementById('system-version');
                if (versionElement) {
                    versionElement.textContent = config.system_version || defaultConfig.system_version;
                }
            },
            
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            
            mapToEditPanelValues: (config) => new Map([
                ["company_name", config.company_name || defaultConfig.company_name],
                ["system_version", config.system_version || defaultConfig.system_version],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
            ])
        };

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init(element);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'994a8a8902d3e116',t:'MTc2MTQ4Nzg2OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
