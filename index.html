<!doctype html>
<html lang="tr">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>SOMTECH_SOF v2.0.0 - Ana Panel</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
        body {
            box-sizing: border-box;
        }
        
        :root {
            --primary-color: #2459a0;
            --accent-color: #cf2e26;
            --bg-light: #f8fafc;
            --bg-white: #ffffff;
            --text-dark: #1e293b;
            --text-gray: #64748b;
            --border-light: #e2e8f0;
            --shadow-light: rgba(36, 89, 160, 0.1);
            --sidebar-width: 280px;
        }
        
        .dark-theme {
            --bg-light: #0f172a;
            --bg-white: #1e293b;
            --text-dark: #f1f5f9;
            --text-gray: #94a3b8;
            --border-light: #334155;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            transition: all 0.3s ease;
            min-height: 100%;
        }
        
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        /* Sidebar Styles */
        .sidebar {
            width: var(--sidebar-width);
            background: var(--bg-white);
            border-right: 1px solid var(--border-light);
            position: fixed;
            height: 100vh;
            left: 0;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
            overflow-y: auto;
        }
        
        .sidebar.collapsed {
            width: 80px;
        }
        
        .sidebar-header {
            padding: 24px;
            border-bottom: 1px solid var(--border-light);
            text-align: center;
        }
        
        .logo-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 16px;
        }
        
        .logo-icon {
            width: 48px;
            height: 48px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
        }
        
        .sidebar.collapsed .logo-icon {
            margin-right: 0;
        }
        
        .logo-text {
            font-size: 18px;
            font-weight: 700;
            color: var(--primary-color);
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .logo-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .nav-menu {
            padding: 24px 0;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 16px 24px;
            color: var(--text-gray);
            text-decoration: none;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
            background: none;
            width: 100%;
            text-align: left;
        }
        
        .nav-item:hover {
            background: rgba(36, 89, 160, 0.05);
            color: var(--primary-color);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(36, 89, 160, 0.1), transparent);
            color: var(--primary-color);
            border-right: 3px solid var(--primary-color);
        }
        
        .nav-icon {
            width: 24px;
            height: 24px;
            margin-right: 16px;
            transition: margin 0.3s ease;
        }
        
        .sidebar.collapsed .nav-icon {
            margin-right: 0;
        }
        
        .nav-text {
            font-weight: 500;
            transition: opacity 0.3s ease;
        }
        
        .sidebar.collapsed .nav-text {
            opacity: 0;
            width: 0;
            overflow: hidden;
        }
        
        .language-selector {
            position: absolute;
            bottom: 24px;
            left: 24px;
            right: 24px;
            display: flex;
            justify-content: center;
            gap: 8px;
        }
        
        .lang-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .lang-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Main Content */
        .main-content {
            margin-left: var(--sidebar-width);
            flex: 1;
            transition: margin-left 0.3s ease;
        }
        
        .sidebar.collapsed + .main-content {
            margin-left: 80px;
        }
        
        /* Header */
        .header {
            background: var(--bg-white);
            border-bottom: 1px solid var(--border-light);
            padding: 16px 32px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-left {
            display: flex;
            align-items: center;
        }
        
        .menu-toggle {
            background: none;
            border: none;
            color: var(--text-gray);
            cursor: pointer;
            padding: 8px;
            border-radius: 8px;
            margin-right: 16px;
            transition: all 0.3s ease;
        }
        
        .menu-toggle:hover {
            background: var(--bg-light);
            color: var(--primary-color);
        }
        
        .page-title {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .header-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .welcome-message {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 20px;
            background: linear-gradient(135deg, rgba(36, 89, 160, 0.1), rgba(36, 89, 160, 0.05));
            border-radius: 12px;
            border: 1px solid rgba(36, 89, 160, 0.2);
            font-weight: 600;
            color: var(--primary-color);
            font-size: 14px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .welcome-message.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .welcome-icon {
            width: 20px;
            height: 20px;
            color: var(--primary-color);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 16px;
            background: var(--bg-light);
            border-radius: 12px;
            opacity: 0;
            transform: translateX(20px);
            transition: all 0.4s ease;
        }
        
        .user-info.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }
        
        .user-details {
            display: flex;
            flex-direction: column;
        }
        
        .user-name {
            font-weight: 600;
            color: var(--text-dark);
            font-size: 14px;
        }
        
        .user-role {
            font-size: 12px;
            color: var(--text-gray);
        }
        
        .theme-toggle, .logout-btn {
            padding: 10px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
            opacity: 0;
            transform: translateX(20px);
        }
        
        .theme-toggle.show, .logout-btn.show {
            opacity: 1;
            transform: translateX(0);
        }
        
        .theme-toggle:hover, .logout-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(36, 89, 160, 0.3);
        }
        
        .logout-btn {
            background: linear-gradient(135deg, var(--accent-color), #b91c1c);
            color: white;
            border-color: var(--accent-color);
        }
        
        .logout-btn:hover {
            background: linear-gradient(135deg, #dc2626, #991b1b);
            transform: translateX(0) translateY(-2px);
            box-shadow: 0 4px 12px rgba(207, 46, 38, 0.3);
        }
        
        /* Content Area */
        .content-area {
            padding: 32px;
        }
        
        /* Status Cards */
        .status-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .status-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .status-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 12px 40px var(--shadow-light);
        }
        
        .card-header {
            display: flex;
            justify-content: between;
            align-items: center;
            margin-bottom: 16px;
        }
        
        .card-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-bottom: 16px;
        }
        
        .card-icon.total {
            background: linear-gradient(135deg, #3b82f6, #1d4ed8);
        }
        
        .card-icon.approved {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .card-icon.pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
        }
        
        .card-icon.rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .card-title {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .card-value {
            font-size: 32px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        /* System Overview */
        .system-overview {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 32px;
            margin-bottom: 32px;
        }
        
        .overview-cards {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .overview-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 24px;
        }
        
        .mini-cards {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }
        
        .mini-card {
            padding: 16px;
            background: var(--bg-light);
            border-radius: 12px;
            text-align: center;
        }
        
        .mini-card-title {
            font-size: 12px;
            color: var(--text-gray);
            margin-bottom: 8px;
        }
        
        .mini-card-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .chart-container {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        /* Table Section */
        .table-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .table-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .table-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
        }
        
        .export-buttons {
            display: flex;
            gap: 12px;
        }
        
        .btn-export {
            padding: 10px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-export:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .filters {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 16px;
            margin-bottom: 24px;
        }
        
        .filter-group {
            display: flex;
            flex-direction: column;
        }
        
        .filter-label {
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .filter-input, .filter-select {
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .filter-input:focus, .filter-select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 24px;
        }
        
        .data-table th {
            background: var(--bg-light);
            padding: 16px 12px;
            text-align: left;
            font-weight: 600;
            color: var(--text-dark);
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
        }
        
        .data-table td {
            padding: 16px 12px;
            border-bottom: 1px solid var(--border-light);
            font-size: 14px;
            color: var(--text-dark);
        }
        
        .data-table tr:hover {
            background: rgba(36, 89, 160, 0.02);
        }
        
        .status-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: 600;
            text-align: center;
        }
        
        .status-approved {
            background: linear-gradient(135deg, #10b981, #059669);
            color: white;
        }
        
        .status-pending {
            background: linear-gradient(135deg, #f59e0b, #d97706);
            color: white;
        }
        
        .status-rejected {
            background: linear-gradient(135deg, #ef4444, #dc2626);
            color: white;
        }
        
        .action-btn {
            padding: 6px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-right: 8px;
        }
        
        .action-btn:hover {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        .pagination {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 8px;
        }
        
        .page-btn {
            padding: 8px 12px;
            border: 1px solid var(--border-light);
            border-radius: 8px;
            background: var(--bg-white);
            color: var(--text-gray);
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .page-btn:hover, .page-btn.active {
            background: var(--primary-color);
            color: white;
            border-color: var(--primary-color);
        }
        
        /* Google Drive Section */
        .drive-section {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
            text-align: center;
        }
        
        .drive-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, #4285f4, #34a853);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 16px;
        }
        
        .drive-title {
            font-size: 20px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .drive-buttons {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .btn-drive {
            padding: 12px 20px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-gray);
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-drive:hover {
            background: #4285f4;
            color: white;
            border-color: #4285f4;
        }
        
        .drive-note {
            font-size: 12px;
            color: var(--text-gray);
            font-style: italic;
        }
        
        /* Settings Section */
        .settings-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 24px;
        }
        
        .settings-card {
            background: var(--bg-white);
            border-radius: 16px;
            padding: 24px;
            border: 1px solid var(--border-light);
        }
        
        .settings-title {
            font-size: 18px;
            font-weight: 700;
            color: var(--text-dark);
            margin-bottom: 16px;
        }
        
        .form-group {
            margin-bottom: 16px;
        }
        
        .form-label {
            display: block;
            font-size: 14px;
            font-weight: 600;
            color: var(--text-dark);
            margin-bottom: 8px;
        }
        
        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 1px solid var(--border-light);
            border-radius: 10px;
            background: var(--bg-white);
            color: var(--text-dark);
            font-size: 14px;
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(36, 89, 160, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 10px;
            padding: 12px 24px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.3);
        }
        
        /* Responsive Design */
        @media (max-width: 1024px) {
            .system-overview {
                grid-template-columns: 1fr;
            }
            
            .status-cards {
                grid-template-columns: repeat(2, 1fr);
            }
        }
        
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }
            
            .sidebar.mobile-open {
                transform: translateX(0);
            }
            
            .main-content {
                margin-left: 0;
            }
            
            .content-area {
                padding: 16px;
            }
            
            .status-cards {
                grid-template-columns: 1fr;
            }
            
            .filters {
                grid-template-columns: 1fr;
            }
            
            .header {
                padding: 16px;
            }
            
            .user-details {
                display: none;
            }
        }
        
        .notification {
            position: fixed;
            top: 24px;
            right: 24px;
            z-index: 1000;
            padding: 16px 24px;
            border-radius: 12px;
            color: white;
            font-weight: 600;
            transform: translateX(400px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            max-width: 400px;
        }
        
        .notification.show {
            transform: translateX(0);
        }
        
        .notification.success {
            background: linear-gradient(135deg, #10b981, #059669);
        }
        
        .notification.error {
            background: linear-gradient(135deg, #ef4444, #dc2626);
        }
        
        .hidden {
            display: none !important;
        }
        
        /* Section Transitions */
        .section {
            opacity: 0;
            transform: translateY(20px);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .section.active {
            opacity: 1;
            transform: translateY(0);
        }
        
        .section.fade-out {
            opacity: 0;
            transform: translateY(-20px);
        }
        
        /* Menu Active States */
        .nav-item {
            position: relative;
            overflow: hidden;
        }
        
        .nav-item::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 4px;
            height: 100%;
            background: var(--primary-color);
            transform: translateX(-100%);
            transition: transform 0.3s ease;
        }
        
        .nav-item.active::before {
            transform: translateX(0);
        }
        
        .nav-item.active {
            background: linear-gradient(90deg, rgba(36, 89, 160, 0.1), transparent);
            color: var(--primary-color);
            font-weight: 600;
        }
        
        .nav-item:not(.active):hover {
            background: rgba(36, 89, 160, 0.05);
            color: var(--primary-color);
        }
        
        /* Login Overlay Styles */
        .login-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(10px);
            z-index: 9999;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.4s ease;
        }
        
        .login-overlay.hidden {
            opacity: 0;
            visibility: hidden;
        }
        
        .login-container {
            background: var(--bg-white);
            border-radius: 20px;
            padding: 48px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            width: 100%;
            max-width: 450px;
            transform: scale(0.9);
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .login-overlay:not(.hidden) .login-container {
            transform: scale(1);
        }
        
        .login-header {
            text-align: center;
            margin-bottom: 32px;
        }
        
        .login-logo {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }
        
        .login-logo .logo-icon {
            width: 64px;
            height: 64px;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0;
        }
        
        .login-title h1 {
            font-size: 24px;
            font-weight: 700;
            color: var(--text-dark);
            margin: 0 0 8px 0;
        }
        
        .login-title p {
            font-size: 14px;
            color: var(--text-gray);
            margin: 0;
        }
        
        .login-form {
            display: flex;
            flex-direction: column;
            gap: 24px;
        }
        
        .login-buttons {
            display: flex;
            gap: 12px;
            margin-top: 8px;
        }
        
        .btn-login {
            flex: 1;
            background: linear-gradient(135deg, var(--primary-color), #1e40af);
            color: white;
            border: none;
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-login:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(36, 89, 160, 0.4);
        }
        
        .btn-register {
            flex: 1;
            background: transparent;
            color: var(--primary-color);
            border: 2px solid var(--primary-color);
            border-radius: 12px;
            padding: 16px 24px;
            font-weight: 600;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .btn-register:hover {
            background: var(--primary-color);
            color: white;
            transform: translateY(-2px);
        }
        
        .login-footer {
            text-align: center;
            margin-top: 24px;
            padding-top: 24px;
            border-top: 1px solid var(--border-light);
        }
        
        .login-footer p {
            font-size: 12px;
            color: var(--text-gray);
            margin: 0;
            font-style: italic;
        }
        
        /* Dashboard blur effect when not logged in */
        .dashboard-container.blurred {
            filter: blur(5px);
            pointer-events: none;
            user-select: none;
        }
    </style>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body><!-- Sidebar -->
  <div id="sidebar" class="sidebar">
   <div class="sidebar-header">
    <div class="logo-container">
     <div class="logo-icon">
      <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
      </svg>
     </div>
     <div class="logo-text">
      <div id="company-name">
       SOMTECH
      </div>
      <div style="font-size: 12px; color: var(--text-gray);" id="system-version">
       v2.0.0
      </div>
     </div>
    </div>
   </div>
   <nav class="nav-menu"><button class="nav-item active" onclick="showSection('dashboard')" data-tr="Ana Sayfa" data-en="Dashboard" data-ru="Главная">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z"></path>
     </svg><span class="nav-text">Ana Sayfa</span> </button> <button class="nav-item" onclick="showSection('new-request')" data-tr="Yeni Talep" data-en="New Request" data-ru="Новый запрос">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
     </svg><span class="nav-text">Yeni Talep</span> </button> <button class="nav-item" onclick="showSection('records')" data-tr="Kayıtlar" data-en="Records" data-ru="Записи">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
     </svg><span class="nav-text">Kayıtlar</span> </button> <button class="nav-item" onclick="showSection('material-records')" data-tr="Malzeme Kayıtları" data-en="Material Records" data-ru="Записи материалов">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
     </svg><span class="nav-text">Malzeme Kayıtları</span> </button> <button class="nav-item" onclick="showSection('google-drive')" data-tr="Google Drive" data-en="Google Drive" data-ru="Google Drive">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
     </svg><span class="nav-text">Google Drive</span> </button> <button class="nav-item" onclick="showSection('settings')" data-tr="Ayarlar" data-en="Settings" data-ru="Настройки">
     <svg class="nav-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"></path> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path>
     </svg><span class="nav-text">Ayarlar</span> </button>
   </nav>
   <div class="language-selector"><button class="lang-btn active" onclick="setLanguage('tr')">TR</button> <button class="lang-btn" onclick="setLanguage('en')">EN</button> <button class="lang-btn" onclick="setLanguage('ru')">RU</button>
   </div>
  </div><!-- Main Content -->
  <div class="main-content"><!-- Header -->
   <header class="header">
    <div class="header-left"><button class="menu-toggle" onclick="toggleSidebar()">
      <svg class="w-6 h-6" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
      </svg></button>
     <h1 id="page-title" class="page-title" data-tr="Ana Panel" data-en="Dashboard" data-ru="Панель управления">Ana Panel</h1>
    </div>
    <div class="header-right">
     <div id="welcome-message" class="welcome-message">
      <svg class="welcome-icon" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
      </svg><span id="welcome-text">Hoş geldiniz</span>
     </div>
     <div id="user-info" class="user-info">
      <div class="user-avatar" id="user-avatar">
       O
      </div>
      <div class="user-details">
       <div class="user-name" id="user-name">
        Oğuzhan Kaya
       </div>
       <div class="user-role" id="user-role">
        Satın Alma
       </div>
      </div>
     </div><button id="theme-toggle" class="theme-toggle" onclick="toggleTheme()" title="Tema Değiştir">
      <svg id="theme-icon" class="w-5 h-5" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg></button> <button id="logout-btn" class="logout-btn" onclick="logout()" title="Çıkış Yap"> 🔒 </button>
    </div>
   </header><!-- Content Area -->
   <div class="content-area"><!-- Dashboard Section -->
    <div id="dashboard-section" class="section active"><!-- Status Cards -->
     <div class="status-cards">
      <div class="status-card">
       <div class="card-icon total">
        📦
       </div>
       <div class="card-title" data-tr="Toplam Talepler" data-en="Total Requests" data-ru="Всего запросов">
        Toplam Talepler
       </div>
       <div class="card-value" id="total-requests">
        0
       </div>
      </div>
      <div class="status-card">
       <div class="card-icon approved">
        ✅
       </div>
       <div class="card-title" data-tr="Onaylanan" data-en="Approved" data-ru="Одобрено">
        Onaylanan
       </div>
       <div class="card-value" id="approved-requests">
        0
       </div>
      </div>
      <div class="status-card">
       <div class="card-icon pending">
        ⏳
       </div>
       <div class="card-title" data-tr="Bekleyen" data-en="Pending" data-ru="В ожидании">
        Bekleyen
       </div>
       <div class="card-value" id="pending-requests">
        0
       </div>
      </div>
      <div class="status-card">
       <div class="card-icon rejected">
        ❌
       </div>
       <div class="card-title" data-tr="Reddedilen" data-en="Rejected" data-ru="Отклонено">
        Reddedilen
       </div>
       <div class="card-value" id="rejected-requests">
        0
       </div>
      </div>
     </div><!-- System Overview -->
     <div class="system-overview">
      <div class="overview-cards">
       <h2 class="overview-title" data-tr="SİSTEM ÖZETİ" data-en="SYSTEM OVERVIEW" data-ru="ОБЗОР СИСТЕМЫ">SİSTEM ÖZETİ</h2>
       <div class="mini-cards">
        <div class="mini-card">
         <div class="mini-card-title" data-tr="Kayıt Sayısı" data-en="Record Count" data-ru="Количество записей">
          Kayıt Sayısı
         </div>
         <div class="mini-card-value" id="record-count">
          0
         </div>
        </div>
        <div class="mini-card">
         <div class="mini-card-title" data-tr="Onaylanan" data-en="Approved" data-ru="Одобрено">
          Onaylanan
         </div>
         <div class="mini-card-value" id="mini-approved">
          0
         </div>
        </div>
        <div class="mini-card">
         <div class="mini-card-title" data-tr="Bekleyen" data-en="Pending" data-ru="В ожидании">
          Bekleyen
         </div>
         <div class="mini-card-value" id="mini-pending">
          0
         </div>
        </div>
        <div class="mini-card">
         <div class="mini-card-title" data-tr="Reddedilen" data-en="Rejected" data-ru="Отклонено">
          Reddedilen
         </div>
         <div class="mini-card-value" id="mini-rejected">
          0
         </div>
        </div>
       </div>
      </div>
      <div class="chart-container">
       <h3 class="overview-title" data-tr="Durum Dağılımı" data-en="Status Distribution" data-ru="Распределение статусов">Durum Dağılımı</h3>
       <canvas id="statusChart" width="300" height="300"></canvas>
      </div>
     </div><!-- Material Records Table -->
     <div class="table-section">
      <div class="table-header">
       <h2 class="table-title" data-tr="Malzeme Kayıtları" data-en="Material Records" data-ru="Записи материалов">Malzeme Kayıtları</h2>
       <div class="export-buttons"><button class="btn-export" onclick="exportToPDF()" data-tr="PDF olarak indir" data-en="Download as PDF" data-ru="Скачать как PDF">PDF olarak indir</button> <button class="btn-export" onclick="exportToCSV()" data-tr="Excel (CSV) olarak indir" data-en="Download as Excel (CSV)" data-ru="Скачать как Excel (CSV)">Excel (CSV) olarak indir</button>
       </div>
      </div>
      <div class="filters">
       <div class="filter-group"><label class="filter-label" data-tr="Birim" data-en="Unit" data-ru="Подразделение">Birim</label> <select class="filter-select" id="unit-filter"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="IT" data-tr="Bilgi İşlem" data-en="IT" data-ru="ИТ">Bilgi İşlem</option> <option value="HR" data-tr="İnsan Kaynakları" data-en="Human Resources" data-ru="Кадры">İnsan Kaynakları</option> <option value="Finance" data-tr="Finans" data-en="Finance" data-ru="Финансы">Finans</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Ana Tip" data-en="Main Type" data-ru="Основной тип">Ana Tip</label> <select class="filter-select" id="type-filter"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="Kırtasiye" data-tr="Kırtasiye" data-en="Stationery" data-ru="Канцелярия">Kırtasiye</option> <option value="Elektronik" data-tr="Elektronik" data-en="Electronics" data-ru="Электроника">Elektronik</option> <option value="Mobilya" data-tr="Mobilya" data-en="Furniture" data-ru="Мебель">Mobilya</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Durum" data-en="Status" data-ru="Статус">Durum</label> <select class="filter-select" id="status-filter"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="approved" data-tr="Onaylandı" data-en="Approved" data-ru="Одобрено">Onaylandı</option> <option value="pending" data-tr="Bekliyor" data-en="Pending" data-ru="В ожидании">Bekliyor</option> <option value="rejected" data-tr="Reddedildi" data-en="Rejected" data-ru="Отклонено">Reddedildi</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Arama" data-en="Search" data-ru="Поиск">Arama</label> <input type="text" class="filter-input" id="search-input" data-tr-placeholder="SOF No veya malzeme ara..." data-en-placeholder="Search SOF No or material..." data-ru-placeholder="Поиск SOF No или материала...">
       </div>
      </div>
      <div style="overflow-x: auto;">
       <table class="data-table">
        <thead>
         <tr>
          <th data-tr="SOF No" data-en="SOF No" data-ru="SOF No">SOF No</th>
          <th data-tr="Talep Tarihi" data-en="Request Date" data-ru="Дата запроса">Talep Tarihi</th>
          <th data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Тип материала">Malzeme Tipi</th>
          <th data-tr="Birim" data-en="Unit" data-ru="Подразделение">Birim</th>
          <th data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</th>
          <th data-tr="Teslim Tarihi" data-en="Delivery Date" data-ru="Дата доставки">Teslim Tarihi</th>
          <th data-tr="Durum" data-en="Status" data-ru="Статус">Durum</th>
          <th data-tr="İşlemler" data-en="Actions" data-ru="Действия">İşlemler</th>
         </tr>
        </thead>
        <tbody id="records-table-body"><!-- Records will be loaded here -->
        </tbody>
       </table>
      </div>
      <div class="pagination" id="pagination"><!-- Pagination will be generated here -->
      </div>
     </div>
    </div><!-- New Request Section -->
    <div id="new-request-section" class="section hidden">
     <div class="table-section">
      <h2 class="table-title" data-tr="Yeni Talep Oluştur" data-en="Create New Request" data-ru="Создать новый запрос">Yeni Talep Oluştur</h2>
      <form id="new-request-form" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 24px; margin-top: 24px;">
       <div class="form-group"><label class="form-label" data-tr="SOF No" data-en="SOF No" data-ru="SOF No">SOF No</label> <input type="text" class="form-input" id="sof-no" required data-tr-placeholder="Örn: SOF-2024-001" data-en-placeholder="e.g: SOF-2024-001" data-ru-placeholder="напр: SOF-2024-001">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Тип материала">Malzeme Tipi</label> <select class="form-input" id="material-type" required> <option value="" data-tr="Seçiniz" data-en="Select" data-ru="Выберите">Seçiniz</option> <option value="Kırtasiye" data-tr="Kırtasiye" data-en="Stationery" data-ru="Канцелярия">Kırtasiye</option> <option value="Elektronik" data-tr="Elektronik" data-en="Electronics" data-ru="Электроника">Elektronik</option> <option value="Mobilya" data-tr="Mobilya" data-en="Furniture" data-ru="Мебель">Mobilya</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Birim" data-en="Unit" data-ru="Подразделение">Birim</label> <select class="form-input" id="unit" required> <option value="" data-tr="Seçiniz" data-en="Select" data-ru="Выберите">Seçiniz</option> <option value="IT" data-tr="Bilgi İşlem" data-en="IT" data-ru="ИТ">Bilgi İşlem</option> <option value="HR" data-tr="İnsan Kaynakları" data-en="Human Resources" data-ru="Кадры">İnsan Kaynakları</option> <option value="Finance" data-tr="Finans" data-en="Finance" data-ru="Финансы">Finans</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</label> <input type="number" class="form-input" id="quantity" required min="1" data-tr-placeholder="Adet girin" data-en-placeholder="Enter quantity" data-ru-placeholder="Введите количество">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Teslim Tarihi" data-en="Delivery Date" data-ru="Дата доставки">Teslim Tarihi</label> <input type="date" class="form-input" id="delivery-date" required>
       </div>
       <div class="form-group" style="grid-column: 1 / -1;"><button type="submit" class="btn-primary" style="width: auto; padding: 16px 32px;"> <span data-tr="Talep Oluştur" data-en="Create Request" data-ru="Создать запрос">Talep Oluştur</span> </button>
       </div>
      </form>
     </div>
    </div><!-- Records Section -->
    <div id="records-section" class="section hidden">
     <div class="table-section">
      <h2 class="table-title" data-tr="Tüm Kayıtlar" data-en="All Records" data-ru="Все записи">Tüm Kayıtlar</h2>
      <p style="color: var(--text-gray); margin-top: 16px;" data-tr="Bu bölümde tüm malzeme kayıtlarını görüntüleyebilir ve yönetebilirsiniz." data-en="You can view and manage all material records in this section." data-ru="В этом разделе вы можете просматривать и управлять всеми записями материалов.">Bu bölümde tüm malzeme kayıtlarını görüntüleyebilir ve yönetebilirsiniz.</p>
     </div>
    </div><!-- Google Drive Section -->
    <div id="google-drive-section" class="section hidden">
     <div class="drive-section">
      <div class="drive-icon">
       <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M9 19l3 3m0 0l3-3m-3 3V10"></path>
       </svg>
      </div>
      <h2 class="drive-title" data-tr="Google Drive Senkronizasyonu" data-en="Google Drive Synchronization" data-ru="Синхронизация Google Drive">Google Drive Senkronizasyonu</h2>
      <div class="drive-buttons"><button class="btn-drive" onclick="connectDrive()" data-tr="Bağlan" data-en="Connect" data-ru="Подключить">Bağlan</button> <button class="btn-drive" onclick="backupToDrive()" data-tr="Yedekle" data-en="Backup" data-ru="Резервное копирование">Yedekle</button> <button class="btn-drive" onclick="restoreFromDrive()" data-tr="Geri Yükle" data-en="Restore" data-ru="Восстановить">Geri Yükle</button>
      </div>
      <p class="drive-note" data-tr="Drive bağlantısı kurulmadan işlem yapılamaz." data-en="Operations cannot be performed without establishing a Drive connection." data-ru="Операции не могут быть выполнены без установления соединения с Drive.">Drive bağlantısı kurulmadan işlem yapılamaz.</p>
     </div>
    </div><!-- Material Records Section -->
    <div id="material-records-section" class="section hidden">
     <div class="table-section">
      <div class="table-header">
       <h2 class="table-title" data-tr="Malzeme Kayıtları Yönetimi" data-en="Material Records Management" data-ru="Управление записями материалов">Malzeme Kayıtları Yönetimi</h2>
       <div class="export-buttons"><button class="btn-export" onclick="exportToPDF()" data-tr="PDF olarak indir" data-en="Download as PDF" data-ru="Скачать как PDF">PDF olarak indir</button> <button class="btn-export" onclick="exportToCSV()" data-tr="Excel (CSV) olarak indir" data-en="Download as Excel (CSV)" data-ru="Скачать как Excel (CSV)">Excel (CSV) olarak indir</button>
       </div>
      </div>
      <div class="filters">
       <div class="filter-group"><label class="filter-label" data-tr="Birim" data-en="Unit" data-ru="Подразделение">Birim</label> <select class="filter-select" id="material-unit-filter" onchange="applyFilters()"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="IT" data-tr="Bilgi İşlem" data-en="IT" data-ru="ИТ">Bilgi İşlem</option> <option value="HR" data-tr="İnsan Kaynakları" data-en="Human Resources" data-ru="Кадры">İnsan Kaynakları</option> <option value="Finance" data-tr="Finans" data-en="Finance" data-ru="Финансы">Finans</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Ana Tip" data-en="Main Type" data-ru="Основной тип">Ana Tip</label> <select class="filter-select" id="material-type-filter" onchange="applyFilters()"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="Kırtasiye" data-tr="Kırtasiye" data-en="Stationery" data-ru="Канцелярия">Kırtasiye</option> <option value="Elektronik" data-tr="Elektronik" data-en="Electronics" data-ru="Электроника">Elektronik</option> <option value="Mobilya" data-tr="Mobilya" data-en="Furniture" data-ru="Мебель">Mobilya</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Durum" data-en="Status" data-ru="Статус">Durum</label> <select class="filter-select" id="material-status-filter" onchange="applyFilters()"> <option value="" data-tr="Tümü" data-en="All" data-ru="Все">Tümü</option> <option value="approved" data-tr="Onaylandı" data-en="Approved" data-ru="Одобрено">Onaylandı</option> <option value="pending" data-tr="Bekliyor" data-en="Pending" data-ru="В ожидании">Bekliyor</option> <option value="rejected" data-tr="Reddedildi" data-en="Rejected" data-ru="Отклонено">Reddedildi</option> </select>
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Tarih Aralığı" data-en="Date Range" data-ru="Диапазон дат">Tarih Aralığı</label> <input type="date" class="filter-input" id="material-date-from" onchange="applyFilters()" data-tr-placeholder="Başlangıç tarihi" data-en-placeholder="Start date" data-ru-placeholder="Дата начала">
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Bitiş Tarihi" data-en="End Date" data-ru="Дата окончания">Bitiş Tarihi</label> <input type="date" class="filter-input" id="material-date-to" onchange="applyFilters()" data-tr-placeholder="Bitiş tarihi" data-en-placeholder="End date" data-ru-placeholder="Дата окончания">
       </div>
       <div class="filter-group"><label class="filter-label" data-tr="Arama" data-en="Search" data-ru="Поиск">Arama</label> <input type="text" class="filter-input" id="material-search-input" oninput="applyFilters()" data-tr-placeholder="SOF No veya malzeme ara..." data-en-placeholder="Search SOF No or material..." data-ru-placeholder="Поиск SOF No или материала...">
       </div>
      </div>
      <div style="overflow-x: auto;">
       <table class="data-table">
        <thead>
         <tr>
          <th data-tr="SOF No" data-en="SOF No" data-ru="SOF No">SOF No</th>
          <th data-tr="Talep Tarihi" data-en="Request Date" data-ru="Дата запроса">Talep Tarihi</th>
          <th data-tr="Malzeme Tipi" data-en="Material Type" data-ru="Тип материала">Malzeme Tipi</th>
          <th data-tr="Birim" data-en="Unit" data-ru="Подразделение">Birim</th>
          <th data-tr="Adet" data-en="Quantity" data-ru="Количество">Adet</th>
          <th data-tr="Teslim Tarihi" data-en="Delivery Date" data-ru="Дата доставки">Teslim Tarihi</th>
          <th data-tr="Durum" data-en="Status" data-ru="Статус">Durum</th>
          <th data-tr="İşlemler" data-en="Actions" data-ru="Действия">İşlemler</th>
         </tr>
        </thead>
        <tbody id="material-records-table-body"><!-- Material records will be loaded here -->
        </tbody>
       </table>
      </div>
      <div class="pagination" id="material-pagination"><!-- Pagination will be generated here -->
      </div>
     </div>
    </div><!-- Settings Section -->
    <div id="settings-section" class="section hidden">
     <div class="settings-section">
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Kullanıcı Bilgileri" data-en="User Information" data-ru="Информация о пользователе">Kullanıcı Bilgileri</h3>
       <div class="form-group"><label class="form-label" data-tr="Ad Soyad" data-en="Full Name" data-ru="Полное имя">Ad Soyad</label> <input type="text" class="form-input" id="user-fullname" value="Oğuzhan Kaya">
       </div>
       <div class="form-group"><label class="form-label" data-tr="E-posta" data-en="Email" data-ru="Электронная почта">E-posta</label> <input type="email" class="form-input" id="user-email" value="oguzhan@somtech.com">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Rol" data-en="Role" data-ru="Роль">Rol</label> <input type="text" class="form-input" id="user-role-input" value="Satın Alma" readonly>
       </div><button class="btn-primary" onclick="updateUserInfo()" data-tr="Bilgileri Güncelle" data-en="Update Information" data-ru="Обновить информацию">Bilgileri Güncelle</button>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Sistem Ayarları" data-en="System Settings" data-ru="Системные настройки">Sistem Ayarları</h3>
       <div class="form-group"><label class="form-label" data-tr="Dil" data-en="Language" data-ru="Язык">Dil</label> <select class="form-input" id="language-select" onchange="setLanguage(this.value)"> <option value="tr" data-tr="Türkçe" data-en="Turkish" data-ru="Турецкий">Türkçe</option> <option value="en" data-tr="İngilizce" data-en="English" data-ru="Английский">İngilizce</option> <option value="ru" data-tr="Rusça" data-en="Russian" data-ru="Русский">Rusça</option> </select>
       </div>
       <div class="form-group"><label class="form-label" data-tr="Tema" data-en="Theme" data-ru="Тема">Tema</label> <select class="form-input" id="theme-select" onchange="setTheme(this.value)"> <option value="light" data-tr="Açık" data-en="Light" data-ru="Светлый">Açık</option> <option value="dark" data-tr="Koyu" data-en="Dark" data-ru="Темный">Koyu</option> </select>
       </div>
      </div>
      <div class="settings-card">
       <h3 class="settings-title" data-tr="Şifre Değiştir" data-en="Change Password" data-ru="Изменить пароль">Şifre Değiştir</h3>
       <div class="form-group"><label class="form-label" data-tr="Mevcut Şifre" data-en="Current Password" data-ru="Текущий пароль">Mevcut Şifre</label> <input type="password" class="form-input" id="current-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Şifre" data-en="New Password" data-ru="Новый пароль">Yeni Şifre</label> <input type="password" class="form-input" id="new-password">
       </div>
       <div class="form-group"><label class="form-label" data-tr="Yeni Şifre Tekrar" data-en="Confirm New Password" data-ru="Подтвердите новый пароль">Yeni Şifre Tekrar</label> <input type="password" class="form-input" id="confirm-password">
       </div><button class="btn-primary" onclick="changePassword()" data-tr="Şifreyi Değiştir" data-en="Change Password" data-ru="Изменить пароль">Şifreyi Değiştir</button>
      </div>
     </div>
    </div>
   </div>
  </div><!-- Login Overlay -->
  <div id="login-overlay" class="login-overlay">
   <div class="login-container">
    <div class="login-header">
     <div class="login-logo">
      <div class="logo-icon">
       <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewbox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
       </svg>
      </div>
      <div class="login-title">
       <h1 data-tr="SOMTECH_SOF v2.0.0 Giriş" data-en="SOMTECH_SOF v2.0.0 Login" data-ru="SOMTECH_SOF v2.0.0 Вход">SOMTECH_SOF v2.0.0 Giriş</h1>
       <p data-tr="Malzeme Yönetim Sistemi" data-en="Material Management System" data-ru="Система управления материалами">Malzeme Yönetim Sistemi</p>
      </div>
     </div>
    </div>
    <form id="login-form" class="login-form">
     <div class="form-group"><label class="form-label" data-tr="E-posta / Kullanıcı Adı" data-en="Email / Username" data-ru="Email / Имя пользователя">E-posta / Kullanıcı Adı</label> <input type="text" class="form-input" id="login-username" required data-tr-placeholder="E-posta adresinizi girin" data-en-placeholder="Enter your email address" data-ru-placeholder="Введите ваш email">
     </div>
     <div class="form-group"><label class="form-label" data-tr="Şifre" data-en="Password" data-ru="Пароль">Şifre</label> <input type="password" class="form-input" id="login-password" required data-tr-placeholder="Şifrenizi girin" data-en-placeholder="Enter your password" data-ru-placeholder="Введите ваш пароль">
     </div>
     <div class="login-buttons"><button type="submit" class="btn-login" data-tr="Giriş Yap" data-en="Login" data-ru="Войти">Giriş Yap</button> <button type="button" class="btn-register" onclick="showRegister()" data-tr="Kayıt Ol" data-en="Register" data-ru="Регистрация">Kayıt Ol</button>
     </div>
     <div class="login-footer">
      <p data-tr="Admin hesap: admin@somtech.com / somtech2025" data-en="Admin account: admin@somtech.com / somtech2025" data-ru="Админ аккаунт: admin@somtech.com / somtech2025">Admin hesap: admin@somtech.com / somtech2025</p>
     </div>
    </form>
   </div>
  </div>
  <script>
        // Configuration
        const defaultConfig = {
            company_name: "SOMTECH",
            system_version: "v2.0.0",
            welcome_message: "Hoş geldin"
        };

        // Global variables
        let currentLanguage = 'tr';
        let isDarkTheme = false;
        let isSidebarCollapsed = false;
        let isLoggedIn = false;
        let currentUser = {
            name: "Oğuzhan Karslı",
            role: "Satın Alma",
            email: "admin@somtech.com"
        };
        let allRecords = [];
        let currentPage = 1;
        let recordsPerPage = 10;
        let statusChart = null;

        // Sample data for demonstration
        const sampleRecords = [
            {
                id: '1',
                sofNo: 'SOF-2024-001',
                requestDate: '2024-01-15',
                materialType: 'Kırtasiye',
                unit: 'IT',
                quantity: 50,
                deliveryDate: '2024-01-25',
                status: 'approved',
                requester: 'Oğuzhan Kaya',
                createdAt: new Date().toISOString()
            },
            {
                id: '2',
                sofNo: 'SOF-2024-002',
                requestDate: '2024-01-16',
                materialType: 'Elektronik',
                unit: 'HR',
                quantity: 2,
                deliveryDate: '2024-02-01',
                status: 'pending',
                requester: 'Ayşe Demir',
                createdAt: new Date().toISOString()
            },
            {
                id: '3',
                sofNo: 'SOF-2024-003',
                requestDate: '2024-01-17',
                materialType: 'Mobilya',
                unit: 'Finance',
                quantity: 1,
                deliveryDate: '2024-02-15',
                status: 'rejected',
                requester: 'Mehmet Yılmaz',
                createdAt: new Date().toISOString()
            }
        ];

        // Data SDK handler
        const dataHandler = {
            onDataChanged(data) {
                allRecords = data.length > 0 ? data : sampleRecords;
                updateDashboardStats();
                updateRecordsTable();
                updateChart();
            }
        };

        // Language detection and setup
        function detectBrowserLanguage() {
            const browserLang = navigator.language || navigator.userLanguage;
            if (browserLang.startsWith('en')) return 'en';
            if (browserLang.startsWith('ru')) return 'ru';
            return 'tr';
        }

        function setLanguage(lang) {
            currentLanguage = lang;
            
            // Update active language button
            document.querySelectorAll('.lang-btn').forEach(btn => {
                btn.classList.remove('active');
                if (btn.textContent === lang.toUpperCase()) {
                    btn.classList.add('active');
                }
            });
            
            // Update language select in settings
            document.getElementById('language-select').value = lang;
            
            updateTranslations();
            updatePlaceholders();
            showNotification(getTranslation('Dil değiştirildi', 'Language changed', 'Язык изменен'), 'success');
        }

        function updateTranslations() {
            document.querySelectorAll('[data-tr]').forEach(element => {
                const trText = element.getAttribute('data-tr');
                const enText = element.getAttribute('data-en');
                const ruText = element.getAttribute('data-ru');
                
                if (currentLanguage === 'en' && enText) {
                    element.textContent = enText;
                } else if (currentLanguage === 'ru' && ruText) {
                    element.textContent = ruText;
                } else if (trText) {
                    element.textContent = trText;
                }
            });
        }

        function updatePlaceholders() {
            document.querySelectorAll('[data-tr-placeholder]').forEach(element => {
                const trPlaceholder = element.getAttribute('data-tr-placeholder');
                const enPlaceholder = element.getAttribute('data-en-placeholder');
                const ruPlaceholder = element.getAttribute('data-ru-placeholder');
                
                if (currentLanguage === 'en' && enPlaceholder) {
                    element.placeholder = enPlaceholder;
                } else if (currentLanguage === 'ru' && ruPlaceholder) {
                    element.placeholder = ruPlaceholder;
                } else if (trPlaceholder) {
                    element.placeholder = trPlaceholder;
                }
            });
        }

        function getTranslation(tr, en, ru) {
            if (currentLanguage === 'en') return en;
            if (currentLanguage === 'ru') return ru;
            return tr;
        }

        // Theme functions
        function toggleTheme() {
            isDarkTheme = !isDarkTheme;
            setTheme(isDarkTheme ? 'dark' : 'light');
        }

        function setTheme(theme) {
            isDarkTheme = theme === 'dark';
            const body = document.body;
            const themeIcon = document.getElementById('theme-icon');
            
            if (isDarkTheme) {
                body.classList.add('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>';
            } else {
                body.classList.remove('dark-theme');
                themeIcon.innerHTML = '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>';
            }
            
            document.getElementById('theme-select').value = theme;
            updateChart();
        }

        // Sidebar functions
        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            isSidebarCollapsed = !isSidebarCollapsed;
            
            if (window.innerWidth <= 768) {
                sidebar.classList.toggle('mobile-open');
            } else {
                sidebar.classList.toggle('collapsed');
            }
        }

        // Session management functions
        function showSessionElements() {
            // Update welcome message
            const welcomeText = document.getElementById('welcome-text');
            welcomeText.textContent = `Hoş geldiniz, ${currentUser.name.split(' ')[0]}`;
            
            // Update user info
            document.getElementById('user-name').textContent = currentUser.name;
            document.getElementById('user-role').textContent = currentUser.role;
            document.getElementById('user-avatar').textContent = currentUser.name.charAt(0).toUpperCase();
            
            // Show elements with staggered animation
            setTimeout(() => {
                document.getElementById('welcome-message').classList.add('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.add('show');
            }, 400);
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.add('show');
            }, 600);
            
            setTimeout(() => {
                document.getElementById('logout-btn').classList.add('show');
            }, 800);
        }
        
        function hideSessionElements() {
            // Hide elements with reverse animation
            document.getElementById('logout-btn').classList.remove('show');
            
            setTimeout(() => {
                document.getElementById('theme-toggle').classList.remove('show');
            }, 100);
            
            setTimeout(() => {
                document.getElementById('user-info').classList.remove('show');
            }, 200);
            
            setTimeout(() => {
                document.getElementById('welcome-message').classList.remove('show');
            }, 300);
        }

        // Login functions
        function handleLogin(event) {
            event.preventDefault();
            
            const username = document.getElementById('login-username').value;
            const password = document.getElementById('login-password').value;
            
            // Admin authentication
            if ((username === 'admin@somtech.com' || username === 'admin') && password === 'somtech2025') {
                isLoggedIn = true;
                
                // Update user info
                currentUser.name = "Oğuzhan Karslı";
                currentUser.role = "Satın Alma";
                currentUser.email = "admin@somtech.com";
                
                // Save login state to localStorage
                localStorage.setItem('somtech_logged_in', 'true');
                localStorage.setItem('somtech_user', JSON.stringify(currentUser));
                
                // Hide login overlay
                document.getElementById('login-overlay').classList.add('hidden');
                
                // Remove blur from dashboard
                document.querySelector('.dashboard-container').classList.remove('blurred');
                
                // Show session elements with animation
                showSessionElements();
                
                showNotification(getTranslation('Başarıyla giriş yapıldı', 'Successfully logged in', 'Успешный вход в систему'), 'success');
            } else if (username && password) {
                // Other users - pending approval
                showNotification(getTranslation('Hesabınız onay bekliyor. Lütfen yöneticinizle iletişime geçin.', 'Your account is pending approval. Please contact your administrator.', 'Ваш аккаунт ожидает одобрения. Пожалуйста, свяжитесь с администратором.'), 'error');
            } else {
                showNotification(getTranslation('Geçersiz kullanıcı adı veya şifre', 'Invalid username or password', 'Неверное имя пользователя или пароль'), 'error');
            }
        }

        function showRegister() {
            showNotification(getTranslation('Kayıt özelliği yakında eklenecek', 'Registration feature coming soon', 'Функция регистрации скоро появится'), 'success');
        }

        // Navigation functions
        function showSection(sectionName) {
            if (!isLoggedIn) {
                showNotification(getTranslation('Lütfen önce giriş yapın', 'Please login first', 'Пожалуйста, сначала войдите в систему'), 'error');
                return;
            }
            
            // Update active nav item
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Find and activate the clicked nav item
            const clickedItem = event.target.closest('.nav-item');
            if (clickedItem) {
                clickedItem.classList.add('active');
            }
            
            // Fade out current section
            const currentSection = document.querySelector('.section.active');
            if (currentSection) {
                currentSection.classList.add('fade-out');
                
                setTimeout(() => {
                    // Hide all sections
                    document.querySelectorAll('.section').forEach(section => {
                        section.classList.add('hidden');
                        section.classList.remove('active', 'fade-out');
                    });
                    
                    // Show and activate selected section
                    const targetSection = document.getElementById(sectionName + '-section');
                    targetSection.classList.remove('hidden');
                    
                    setTimeout(() => {
                        targetSection.classList.add('active');
                    }, 50);
                }, 200);
            }
            
            // Update page title
            const titles = {
                'dashboard': getTranslation('Ana Sayfa', 'Dashboard', 'Панель управления'),
                'new-request': getTranslation('Yeni Talep', 'New Request', 'Новый запрос'),
                'records': getTranslation('Kayıtlar', 'Records', 'Записи'),
                'material-records': getTranslation('Malzeme Kayıtları', 'Material Records', 'Записи материалов'),
                'google-drive': getTranslation('Google Drive', 'Google Drive', 'Google Drive'),
                'settings': getTranslation('Ayarlar', 'Settings', 'Настройки')
            };
            
            document.getElementById('page-title').textContent = titles[sectionName] || titles['dashboard'];
            
            // Load section-specific data
            if (sectionName === 'material-records') {
                setTimeout(() => {
                    updateMaterialRecordsTable();
                }, 300);
            }
        }

        // Filtering functions
        let filteredRecords = [];
        let materialCurrentPage = 1;

        function applyFilters() {
            const unitFilter = document.getElementById('material-unit-filter').value;
            const typeFilter = document.getElementById('material-type-filter').value;
            const statusFilter = document.getElementById('material-status-filter').value;
            const dateFromFilter = document.getElementById('material-date-from').value;
            const dateToFilter = document.getElementById('material-date-to').value;
            const searchFilter = document.getElementById('material-search-input').value.toLowerCase();
            
            filteredRecords = allRecords.filter(record => {
                // Unit filter
                if (unitFilter && record.unit !== unitFilter) return false;
                
                // Type filter
                if (typeFilter && record.materialType !== typeFilter) return false;
                
                // Status filter
                if (statusFilter && record.status !== statusFilter) return false;
                
                // Date range filter
                if (dateFromFilter && record.requestDate < dateFromFilter) return false;
                if (dateToFilter && record.requestDate > dateToFilter) return false;
                
                // Search filter
                if (searchFilter && 
                    !record.sofNo.toLowerCase().includes(searchFilter) &&
                    !record.materialType.toLowerCase().includes(searchFilter)) return false;
                
                return true;
            });
            
            materialCurrentPage = 1;
            updateMaterialRecordsTable();
        }

        function updateMaterialRecordsTable() {
            const tbody = document.getElementById('material-records-table-body');
            const recordsToShow = filteredRecords.length > 0 ? filteredRecords : allRecords;
            const startIndex = (materialCurrentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = recordsToShow.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="Görüntüle" data-en="View" data-ru="Просмотр">Görüntüle</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="Düzenle" data-en="Edit" data-ru="Редактировать">Düzenle</button>
                    </td>
                </tr>
            `).join('');
            
            updateMaterialPagination(recordsToShow.length);
            updateTranslations();
        }

        function updateMaterialPagination(totalRecords) {
            const totalPages = Math.ceil(totalRecords / recordsPerPage);
            const pagination = document.getElementById('material-pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (materialCurrentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage - 1})">‹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === materialCurrentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (materialCurrentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changeMaterialPage(${materialCurrentPage + 1})">›</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changeMaterialPage(page) {
            materialCurrentPage = page;
            updateMaterialRecordsTable();
        }

        // Dashboard statistics
        function updateDashboardStats() {
            const total = allRecords.length;
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending').length;
            const rejected = allRecords.filter(r => r.status === 'rejected').length;
            
            document.getElementById('total-requests').textContent = total;
            document.getElementById('approved-requests').textContent = approved;
            document.getElementById('pending-requests').textContent = pending;
            document.getElementById('rejected-requests').textContent = rejected;
            
            document.getElementById('record-count').textContent = total;
            document.getElementById('mini-approved').textContent = approved;
            document.getElementById('mini-pending').textContent = pending;
            document.getElementById('mini-rejected').textContent = rejected;
        }

        // Chart functions
        function updateChart() {
            const ctx = document.getElementById('statusChart').getContext('2d');
            
            if (statusChart) {
                statusChart.destroy();
            }
            
            const approved = allRecords.filter(r => r.status === 'approved').length;
            const pending = allRecords.filter(r => r.status === 'pending').length;
            const rejected = allRecords.filter(r => r.status === 'rejected').length;
            
            statusChart = new Chart(ctx, {
                type: 'doughnut',
                data: {
                    labels: [
                        getTranslation('Onaylanan', 'Approved', 'Одобрено'),
                        getTranslation('Bekleyen', 'Pending', 'В ожидании'),
                        getTranslation('Reddedilen', 'Rejected', 'Отклонено')
                    ],
                    datasets: [{
                        data: [approved, pending, rejected],
                        backgroundColor: [
                            '#10b981',
                            '#f59e0b',
                            '#ef4444'
                        ],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                color: isDarkTheme ? '#f1f5f9' : '#1e293b',
                                padding: 20
                            }
                        }
                    }
                }
            });
        }

        // Table functions
        function updateRecordsTable() {
            const tbody = document.getElementById('records-table-body');
            const startIndex = (currentPage - 1) * recordsPerPage;
            const endIndex = startIndex + recordsPerPage;
            const pageRecords = allRecords.slice(startIndex, endIndex);
            
            tbody.innerHTML = pageRecords.map(record => `
                <tr>
                    <td>${record.sofNo}</td>
                    <td>${formatDate(record.requestDate)}</td>
                    <td>${record.materialType}</td>
                    <td>${record.unit}</td>
                    <td>${record.quantity}</td>
                    <td>${formatDate(record.deliveryDate)}</td>
                    <td>
                        <span class="status-badge status-${record.status}">
                            ${getStatusText(record.status)}
                        </span>
                    </td>
                    <td>
                        <button class="action-btn" onclick="viewRecord('${record.id}')" data-tr="Görüntüle" data-en="View" data-ru="Просмотр">Görüntüle</button>
                        <button class="action-btn" onclick="editRecord('${record.id}')" data-tr="Düzenle" data-en="Edit" data-ru="Редактировать">Düzenle</button>
                    </td>
                </tr>
            `).join('');
            
            updatePagination();
            updateTranslations();
        }

        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('tr-TR');
        }

        function getStatusText(status) {
            const statusTexts = {
                'approved': getTranslation('Onaylandı', 'Approved', 'Одобрено'),
                'pending': getTranslation('Bekliyor', 'Pending', 'В ожидании'),
                'rejected': getTranslation('Reddedildi', 'Rejected', 'Отклонено')
            };
            return statusTexts[status] || status;
        }

        function updatePagination() {
            const totalPages = Math.ceil(allRecords.length / recordsPerPage);
            const pagination = document.getElementById('pagination');
            
            let paginationHTML = '';
            
            // Previous button
            if (currentPage > 1) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage - 1})">‹</button>`;
            }
            
            // Page numbers
            for (let i = 1; i <= totalPages; i++) {
                if (i === currentPage) {
                    paginationHTML += `<button class="page-btn active">${i}</button>`;
                } else {
                    paginationHTML += `<button class="page-btn" onclick="changePage(${i})">${i}</button>`;
                }
            }
            
            // Next button
            if (currentPage < totalPages) {
                paginationHTML += `<button class="page-btn" onclick="changePage(${currentPage + 1})">›</button>`;
            }
            
            pagination.innerHTML = paginationHTML;
        }

        function changePage(page) {
            currentPage = page;
            updateRecordsTable();
        }

        // Form functions
        async function createNewRequest(event) {
            event.preventDefault();
            
            const formData = {
                id: Date.now().toString(),
                sofNo: document.getElementById('sof-no').value,
                requestDate: new Date().toISOString().split('T')[0],
                materialType: document.getElementById('material-type').value,
                unit: document.getElementById('unit').value,
                quantity: parseInt(document.getElementById('quantity').value),
                deliveryDate: document.getElementById('delivery-date').value,
                status: 'pending',
                requester: currentUser.name,
                createdAt: new Date().toISOString()
            };
            
            try {
                const result = await window.dataSdk.create(formData);
                
                if (result.isOk) {
                    showNotification(getTranslation('Talep başarıyla oluşturuldu', 'Request created successfully', 'Запрос успешно создан'), 'success');
                    document.getElementById('new-request-form').reset();
                    showSection('dashboard');
                } else {
                    showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
                }
            } catch (error) {
                console.error('Create request error:', error);
                showNotification(getTranslation('Talep oluşturulurken hata oluştu', 'Error creating request', 'Ошибка создания запроса'), 'error');
            }
        }

        // Export functions
        function exportToPDF() {
            showNotification(getTranslation('PDF dışa aktarma özelliği yakında eklenecek', 'PDF export feature coming soon', 'Функция экспорта PDF скоро появится'), 'success');
        }

        function exportToCSV() {
            const headers = ['SOF No', 'Talep Tarihi', 'Malzeme Tipi', 'Birim', 'Adet', 'Teslim Tarihi', 'Durum'];
            const csvContent = [
                headers.join(','),
                ...allRecords.map(record => [
                    record.sofNo,
                    record.requestDate,
                    record.materialType,
                    record.unit,
                    record.quantity,
                    record.deliveryDate,
                    record.status
                ].join(','))
            ].join('\n');
            
            const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
            const link = document.createElement('a');
            const url = URL.createObjectURL(blob);
            link.setAttribute('href', url);
            link.setAttribute('download', 'malzeme_kayitlari.csv');
            link.style.visibility = 'hidden';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            
            showNotification(getTranslation('CSV dosyası indirildi', 'CSV file downloaded', 'CSV файл загружен'), 'success');
        }

        // Google Drive functions
        function connectDrive() {
            showNotification(getTranslation('Google Drive bağlantısı yakında eklenecek', 'Google Drive connection coming soon', 'Подключение Google Drive скоро появится'), 'success');
        }

        function backupToDrive() {
            showNotification(getTranslation('Yedekleme özelliği yakında eklenecek', 'Backup feature coming soon', 'Функция резервного копирования скоро появится'), 'success');
        }

        function restoreFromDrive() {
            showNotification(getTranslation('Geri yükleme özelliği yakında eklenecek', 'Restore feature coming soon', 'Функция восстановления скоро появится'), 'success');
        }

        // Settings functions
        function updateUserInfo() {
            const fullname = document.getElementById('user-fullname').value;
            const email = document.getElementById('user-email').value;
            
            currentUser.name = fullname;
            currentUser.email = email;
            
            document.getElementById('user-name').textContent = fullname;
            document.getElementById('user-avatar').textContent = fullname.charAt(0).toUpperCase();
            
            showNotification(getTranslation('Kullanıcı bilgileri güncellendi', 'User information updated', 'Информация о пользователе обновлена'), 'success');
        }

        function changePassword() {
            const currentPassword = document.getElementById('current-password').value;
            const newPassword = document.getElementById('new-password').value;
            const confirmPassword = document.getElementById('confirm-password').value;
            
            if (!currentPassword || !newPassword || !confirmPassword) {
                showNotification(getTranslation('Tüm alanları doldurun', 'Fill all fields', 'Заполните все поля'), 'error');
                return;
            }
            
            if (newPassword !== confirmPassword) {
                showNotification(getTranslation('Yeni şifreler eşleşmiyor', 'New passwords do not match', 'Новые пароли не совпадают'), 'error');
                return;
            }
            
            if (newPassword.length < 6) {
                showNotification(getTranslation('Şifre en az 6 karakter olmalı', 'Password must be at least 6 characters', 'Пароль должен содержать минимум 6 символов'), 'error');
                return;
            }
            
            // Clear form
            document.getElementById('current-password').value = '';
            document.getElementById('new-password').value = '';
            document.getElementById('confirm-password').value = '';
            
            showNotification(getTranslation('Şifre başarıyla değiştirildi', 'Password changed successfully', 'Пароль успешно изменен'), 'success');
        }

        // Record actions
        function viewRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydı görüntüleniyor`, `Viewing record ${record.sofNo}`, `Просмотр записи ${record.sofNo}`), 'success');
            }
        }

        function editRecord(id) {
            const record = allRecords.find(r => r.id === id);
            if (record) {
                showNotification(getTranslation(`${record.sofNo} kaydı düzenleniyor`, `Editing record ${record.sofNo}`, `Редактирование записи ${record.sofNo}`), 'success');
            }
        }

        // Utility functions
        function showNotification(message, type = 'success') {
            const notification = document.createElement('div');
            notification.className = `notification ${type}`;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.classList.add('show');
            }, 100);
            
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 400);
            }, 4000);
        }

        function logout() {
            isLoggedIn = false;
            
            // Hide session elements first
            hideSessionElements();
            
            setTimeout(() => {
                // Clear localStorage
                localStorage.removeItem('somtech_logged_in');
                localStorage.removeItem('somtech_user');
                
                // Show login overlay
                document.getElementById('login-overlay').classList.remove('hidden');
                
                // Blur dashboard
                document.querySelector('.dashboard-container').classList.add('blurred');
                
                // Clear login form
                document.getElementById('login-form').reset();
                
                // Reset to dashboard section
                resetToDefaultSection();
                
                showNotification(getTranslation('Başarıyla çıkış yapıldı', 'Successfully logged out', 'Успешный выход из системы'), 'success');
            }, 500);
        }
        
        function resetToDefaultSection() {
            // Remove active from all nav items
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            // Activate dashboard nav item
            document.querySelector('.nav-item[onclick*="dashboard"]').classList.add('active');
            
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
                section.classList.remove('active', 'fade-out');
            });
            
            // Show dashboard section
            const dashboardSection = document.getElementById('dashboard-section');
            dashboardSection.classList.remove('hidden');
            dashboardSection.classList.add('active');
            
            // Reset page title
            document.getElementById('page-title').textContent = getTranslation('Ana Sayfa', 'Dashboard', 'Панель управления');
        }

        // Check login state on page load
        function checkLoginState() {
            const savedLoginState = localStorage.getItem('somtech_logged_in');
            const savedUser = localStorage.getItem('somtech_user');
            
            if (savedLoginState === 'true' && savedUser) {
                isLoggedIn = true;
                currentUser = JSON.parse(savedUser);
                
                // Hide login overlay
                document.getElementById('login-overlay').classList.add('hidden');
                
                // Remove blur from dashboard
                document.querySelector('.dashboard-container').classList.remove('blurred');
                
                // Show session elements
                setTimeout(() => {
                    showSessionElements();
                }, 500);
            } else {
                // Show login overlay and blur dashboard
                document.getElementById('login-overlay').classList.remove('hidden');
                document.querySelector('.dashboard-container').classList.add('blurred');
            }
        }

        // Initialize dashboard
        document.addEventListener('DOMContentLoaded', async function() {
            // Check login state first
            checkLoginState();
            
            // Set up login form handler
            document.getElementById('login-form').addEventListener('submit', handleLogin);
            // Initialize Data SDK
            try {
                const initResult = await window.dataSdk.init(dataHandler);
                if (!initResult.isOk) {
                    console.error('Data SDK initialization failed');
                }
            } catch (error) {
                console.error('Data SDK error:', error);
                // Use sample data if SDK fails
                allRecords = sampleRecords;
                updateDashboardStats();
                updateRecordsTable();
                updateChart();
            }
            
            // Detect and set browser language
            const detectedLang = detectBrowserLanguage();
            setLanguage(detectedLang);
            
            // Set up form handlers
            document.getElementById('new-request-form').addEventListener('submit', createNewRequest);
            
            // Set up responsive sidebar
            window.addEventListener('resize', function() {
                if (window.innerWidth > 768) {
                    document.getElementById('sidebar').classList.remove('mobile-open');
                }
            });
            
            // User info will be updated by showSessionElements() if logged in
            
            console.log('SOMTECH_SOF v2.0.0 Dashboard initialized');
            showNotification(getTranslation('Dashboard yüklendi', 'Dashboard loaded', 'Панель управления загружена'), 'success');
        });

        // Element SDK implementation
        const element = {
            defaultConfig: defaultConfig,
            
            onConfigChange: async (config) => {
                // Update company name
                const companyElement = document.getElementById('company-name');
                if (companyElement) {
                    companyElement.textContent = config.company_name || defaultConfig.company_name;
                }
                
                // Update system version
                const versionElement = document.getElementById('system-version');
                if (versionElement) {
                    versionElement.textContent = config.system_version || defaultConfig.system_version;
                }
            },
            
            mapToCapabilities: (config) => ({
                recolorables: [],
                borderables: [],
                fontEditable: undefined,
                fontSizeable: undefined
            }),
            
            mapToEditPanelValues: (config) => new Map([
                ["company_name", config.company_name || defaultConfig.company_name],
                ["system_version", config.system_version || defaultConfig.system_version],
                ["welcome_message", config.welcome_message || defaultConfig.welcome_message]
            ])
        };

        // Initialize Element SDK
        if (window.elementSdk) {
            window.elementSdk.init(element);
        }
    </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'994a15fcf185e34c',t:'MTc2MTQ4MzA5NS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
